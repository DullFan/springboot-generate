{"version":3,"file":"color-picker.mjs","sources":["../../src/color-picker/color-picker.tsx"],"sourcesContent":["import { defineComponent, ref, toRefs } from 'vue';\nimport useVModel from '../hooks/useVModel';\nimport { renderTNodeJSXDefault } from '../utils/render-tnode';\nimport props from './props';\nimport { Popup as TPopup } from '../popup';\nimport ColorPanel from './panel';\nimport DefaultTrigger from './trigger';\nimport { TdColorContext } from './interfaces';\nimport { useBaseClassName } from './hooks';\n\nexport default defineComponent({\n  name: 'TColorPicker',\n  props: {\n    ...props,\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const visible = ref(false);\n    const setVisible = (value: boolean) => (visible.value = value);\n\n    const { value: inputValue, modelValue } = toRefs(props);\n    const [innerValue, setInnerValue] = useVModel(inputValue, modelValue, props.defaultValue, props.onChange);\n\n    const refTrigger = ref<HTMLElement>();\n\n    const renderPopupContent = () => {\n      if (props.disabled) {\n        return null;\n      }\n      const newProps = { ...props };\n      delete newProps.onChange;\n      return (\n        <ColorPanel\n          {...newProps}\n          disabled={props.disabled}\n          value={innerValue.value}\n          togglePopup={setVisible}\n          onChange={(value: string, context: TdColorContext) => setInnerValue(value, context)}\n        />\n      );\n    };\n\n    return {\n      baseClassName,\n      innerValue,\n      visible,\n      refTrigger,\n      renderPopupContent,\n      setVisible,\n      setInnerValue,\n    };\n  },\n  render() {\n    const { popupProps, baseClassName } = this;\n    const popProps = {\n      placement: 'bottom-left',\n      ...((popupProps as any) || {}),\n      trigger: 'click',\n      attach: 'body',\n      overlayClassName: [baseClassName],\n      visible: this.visible,\n      overlayInnerStyle: {\n        padding: 0,\n      },\n      onVisibleChange: (\n        visible: boolean,\n        context: {\n          trigger: string;\n        },\n      ) => {\n        if (context.trigger === 'document') {\n          this.setVisible(false);\n        }\n      },\n    };\n    return (\n      <TPopup {...popProps} content={this.renderPopupContent}>\n        <div class={`${baseClassName}__trigger`} onClick={() => this.setVisible(!this.visible)} ref=\"refTrigger\">\n          {renderTNodeJSXDefault(\n            this,\n            'default',\n            <DefaultTrigger\n              color={this.innerValue}\n              disabled={this.disabled}\n              clearable={this.clearable}\n              input-props={this.inputProps}\n              onTriggerChange={this.setInnerValue}\n              size={this.size}\n            />,\n          )}\n        </div>\n      </TPopup>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","_objectSpread","setup","baseClassName","useBaseClassName","visible","ref","setVisible","value","_toRefs","toRefs","inputValue","modelValue","_useVModel","useVModel","defaultValue","onChange","_useVModel2","_slicedToArray","innerValue","setInnerValue","refTrigger","renderPopupContent","disabled","newProps","_createVNode","ColorPanel","_mergeProps","context","render","_this","popupProps","popProps","placement","trigger","attach","overlayClassName","overlayInnerStyle","padding","onVisibleChange","TPopup","_default","concat","onClick","renderTNodeJSXDefault","DefaultTrigger","clearable","inputProps","size"],"mappings":"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"}