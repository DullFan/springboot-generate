{"version":3,"file":"swatches.js","sources":["../../../src/color-picker/panel/swatches.tsx"],"sourcesContent":["import { computed, defineComponent, PropType, ref } from 'vue';\nimport { DeleteIcon as TdDeleteIcon, AddIcon as TdAddIcon } from 'tdesign-icons-vue-next';\n\nimport { Color } from '../utils';\nimport { useBaseClassName } from '../hooks';\nimport { useCommonClassName } from '../../hooks/useConfig';\nimport { useGlobalIcon } from '../../hooks/useGlobalIcon';\nimport baseProps from './base-props';\n\nexport default defineComponent({\n  name: 'SwatchesPanel',\n  props: {\n    ...baseProps,\n    colors: {\n      type: Array as PropType<string[]>,\n      default: () => [] as PropType<string[]>,\n    },\n    title: {\n      type: String,\n      default: '系统色彩',\n    },\n    editable: {\n      type: Boolean,\n      default: false,\n    },\n    onSetColor: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n    handleAddColor: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const { DeleteIcon, AddIcon } = useGlobalIcon({ DeleteIcon: TdDeleteIcon, AddIcon: TdAddIcon });\n    const { STATUS } = useCommonClassName();\n    const statusClassNames = STATUS.value;\n    const visiblePopConfirm = ref<boolean>(false);\n    const setVisiblePopConfirm = (visible: boolean) => {\n      visiblePopConfirm.value = visible;\n    };\n\n    const handleClick = (color: string) => props.onSetColor(color);\n\n    const isEqualCurrentColor = (color: string) => {\n      return Color.compare(color, props.color.css);\n    };\n\n    const selectedColorIndex = computed(() => {\n      return props.colors.findIndex((color) => isEqualCurrentColor(color));\n    });\n\n    /**\n     * 移除颜色\n     */\n    const handleRemoveColor = () => {\n      const colors = [...props.colors];\n      const selectedIndex = selectedColorIndex.value;\n      if (selectedIndex > -1) {\n        colors.splice(selectedIndex, 1);\n      } else {\n        colors.length = 0;\n      }\n      props.onChange(colors);\n      setVisiblePopConfirm(false);\n    };\n\n    return {\n      baseClassName,\n      DeleteIcon,\n      AddIcon,\n      statusClassNames,\n      selectedColorIndex,\n      visiblePopConfirm,\n      setVisiblePopConfirm,\n      handleClick,\n      isEqualCurrentColor,\n      handleRemoveColor,\n    };\n  },\n  render() {\n    const { baseClassName, DeleteIcon, AddIcon, statusClassNames, title, editable } = this;\n    const swatchesClass = `${baseClassName}__swatches`;\n\n    const renderActions = () => {\n      if (!editable) {\n        return null;\n      }\n\n      return (\n        <div class={`${swatchesClass}--actions`}>\n          <span role=\"button\" class={`${baseClassName}__icon`} onClick={() => this.handleAddColor()}>\n            <AddIcon />\n          </span>\n          {this.colors.length > 0 ? (\n            <span role=\"button\" class={`${baseClassName}__icon`} onClick={() => this.handleRemoveColor()}>\n              <DeleteIcon />\n            </span>\n          ) : null}\n        </div>\n      );\n    };\n\n    return (\n      <div class={swatchesClass}>\n        <h3 class={`${swatchesClass}--title`}>\n          <span>{title}</span>\n          {renderActions()}\n        </h3>\n        <ul class={[`${swatchesClass}--items`, 'narrow-scrollbar']}>\n          {this.colors.map((color) => {\n            return (\n              <li\n                class={[\n                  `${swatchesClass}--item`,\n                  this.isEqualCurrentColor(color) && editable ? statusClassNames.active : '',\n                ]}\n                title={color}\n                key={color}\n                onClick={() => {\n                  if (this.disabled) {\n                    return;\n                  }\n                  this.handleClick(color);\n                }}\n              >\n                <div class={[`${swatchesClass}--color`, `${baseClassName}--bg-alpha`]}>\n                  <span\n                    class={`${swatchesClass}--inner`}\n                    style={{\n                      background: color,\n                    }}\n                  ></span>\n                </div>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","_objectSpread","baseProps","colors","type","Array","_default","title","String","editable","Boolean","onSetColor","Function","handleAddColor","setup","baseClassName","useBaseClassName","_useGlobalIcon","useGlobalIcon","DeleteIcon","TdDeleteIcon","AddIcon","TdAddIcon","_useCommonClassName","useCommonClassName","STATUS","statusClassNames","value","visiblePopConfirm","ref","setVisiblePopConfirm","visible","handleClick","color","isEqualCurrentColor","Color","compare","css","selectedColorIndex","computed","findIndex","handleRemoveColor","_toConsumableArray","selectedIndex","splice","length","onChange","render","_this","swatchesClass","renderActions","_createVNode","concat","onClick","map","active","disabled","background"],"mappings":"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"}