{"version":3,"file":"useImagePreviewUrl.js","sources":["../../src/hooks/useImagePreviewUrl.ts"],"sourcesContent":["import { ComputedRef, ref, Ref, watch } from 'vue';\nimport { getFileUrlByFileRaw } from '../_common/js/upload/utils';\n\nexport function useImagePreviewUrl(imgUrl: Ref<string | File> | ComputedRef<string | File>) {\n  const previewUrl = ref('');\n\n  watch(\n    [imgUrl],\n    ([imgUrl], [preImgUrl]) => {\n      if (preImgUrl === imgUrl) return;\n      if (typeof imgUrl === 'string') {\n        previewUrl.value = imgUrl;\n        return;\n      }\n      getFileUrlByFileRaw(imgUrl).then((url) => {\n        previewUrl.value = url;\n      });\n    },\n    { immediate: true },\n  );\n\n  return { previewUrl };\n}\n"],"names":["useImagePreviewUrl","imgUrl","previewUrl","ref","watch","_ref","_ref2","_ref3","_slicedToArray","_ref4","preImgUrl","value","getFileUrlByFileRaw","then","url","immediate"],"mappings":";;;;;;;;;;;AAGO,SAASA,mBAAmBC,MAAyD,EAAA;AACpF,EAAA,IAAAC,UAAA,GAAaC,IAAI,EAAE,CAAA,CAAA;EAEzBC,KAAA,CACE,CAACH,MAAM,CAAA,EACP,UAAAI,IAAA,EAAAC,KAAA,EAA2B;AAAA,IAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAH,IAAA,EAAA,CAAA,CAAA;AAAzBJ,MAAAA,OAAM,GAAAM,KAAA,CAAA,CAAA,CAAA,CAAA;AAAA,IAAA,IAAAE,KAAA,GAAAD,cAAA,CAAAF,KAAA,EAAA,CAAA,CAAA;AAAII,MAAAA,SAAS,GAAAD,KAAA,CAAA,CAAA,CAAA,CAAA;IACnB,IAAIC,SAAcT,KAAAA,OAAAA,EAAQ,OAAA;AACtB,IAAA,IAAA,OAAOA,YAAW,QAAU,EAAA;MAC9BC,UAAA,CAAWS,KAAQV,GAAAA,OAAAA,CAAAA;AACnB,MAAA,OAAA;AACF,KAAA;IACAW,mBAAA,CAAoBX,OAAM,CAAA,CAAEY,IAAK,CAAA,UAACC,GAAQ,EAAA;MACxCZ,UAAA,CAAWS,KAAQ,GAAAG,GAAA,CAAA;AACrB,KAAC,CAAA,CAAA;AACH,GAAA,EACA;AAAEC,IAAAA,WAAW,IAAA;AAAK,GACpB,CAAA,CAAA;EAEA,OAAO;AAAEb,IAAAA,UAAW,EAAXA,UAAAA;GAAW,CAAA;AACtB;;;;"}