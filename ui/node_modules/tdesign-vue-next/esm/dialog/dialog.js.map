{"version":3,"file":"dialog.js","sources":["../../src/dialog/dialog.tsx"],"sourcesContent":["import { computed, defineComponent, nextTick, onBeforeUnmount, onMounted, ref, Transition, watch, Teleport } from 'vue';\nimport {\n  CloseIcon as TdCloseIcon,\n  InfoCircleFilledIcon as TdInfoCircleFilledIcon,\n  CheckCircleFilledIcon as TdCheckCircleFilledIcon,\n  ErrorCircleFilledIcon as TdErrorCircleFilledIcon,\n} from 'tdesign-icons-vue-next';\n\nimport { DialogCloseContext } from './type';\nimport props from './props';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { useAction, useSameTarget } from './hooks';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\nimport useDestroyOnClose from '../hooks/useDestroyOnClose';\nimport { getScrollbarWidth } from '../_common/js/utils/getScrollbarWidth';\n\nimport type { TdDialogProps } from './type';\nimport useTeleport from '../hooks/useTeleport';\nimport usePopupManager from '../hooks/usePopupManager';\n\nfunction GetCSSValue(v: string | number) {\n  return Number.isNaN(Number(v)) ? v : `${Number(v)}px`;\n}\n\nlet mousePosition: { x: number; y: number } | null;\nconst getClickPosition = (e: MouseEvent) => {\n  mousePosition = {\n    x: e.clientX,\n    y: e.clientY,\n  };\n  setTimeout(() => {\n    mousePosition = null;\n  }, 100);\n};\n\nif (typeof window !== 'undefined' && window.document && window.document.documentElement) {\n  document.documentElement.addEventListener('click', getClickPosition, true);\n}\n\nfunction InitDragEvent(dragBox: HTMLElement) {\n  const target = dragBox;\n  const windowInnerWidth = window.innerWidth || document.documentElement.clientWidth;\n  const windowInnerHeight = window.innerHeight || document.documentElement.clientHeight;\n  target.addEventListener('mousedown', (targetEvent: MouseEvent) => {\n    // 算出鼠标相对元素的位置\n    const disX = targetEvent.clientX - target.offsetLeft;\n    const disY = targetEvent.clientY - target.offsetTop;\n    const dialogW = target.offsetWidth;\n    const dialogH = target.offsetHeight;\n    // 如果弹出框超出屏幕范围 不能进行拖拽\n    if (dialogW > windowInnerWidth || dialogH > windowInnerHeight) return;\n    function mouseMoverHandler(documentEvent: MouseEvent) {\n      // 用鼠标的位置减去鼠标相对元素的位置，得到元素的位置\n      let left = documentEvent.clientX - disX;\n      let top = documentEvent.clientY - disY;\n      // 临界判断\n      // 拖拽上左边界限制\n      if (left < 0) left = 0;\n      if (top < 0) top = 0;\n      if (windowInnerWidth - target.offsetWidth - left < 0) left = windowInnerWidth - target.offsetWidth;\n      if (windowInnerHeight - target.offsetHeight - top < 0) top = windowInnerHeight - target.offsetHeight;\n      target.style.position = 'absolute';\n      target.style.left = `${left}px`;\n      target.style.top = `${top}px`;\n    }\n    function mouseUpHandler() {\n      // 鼠标弹起来的时候不再移动\n      document.removeEventListener('mousemove', mouseMoverHandler);\n      // 预防鼠标弹起来后还会循环（即预防鼠标放上去的时候还会移动）\n      document.removeEventListener('mouseup', mouseUpHandler);\n    }\n    // 元素按下时注册document鼠标监听事件\n    document.addEventListener('mousemove', mouseMoverHandler);\n    // 鼠标弹起来移除document鼠标监听事件\n    document.addEventListener('mouseup', mouseUpHandler);\n    // 拖拽结束移除鼠标监听事件，解决文字拖拽结束事件未解绑问题\n    document.addEventListener('dragend', mouseUpHandler);\n  });\n}\n\nlet key = 1;\n\nexport default defineComponent({\n  name: 'TDialog',\n  // 注册v-draggable指令,传入true时候初始化拖拽事件\n  directives: {\n    draggable(el, binding) {\n      // el 指令绑定的元素\n      if (el && binding && binding.value) {\n        InitDragEvent(el);\n      }\n    },\n  },\n  inheritAttrs: false,\n  props,\n  emits: ['update:visible'],\n  setup(props, context) {\n    const COMPONENT_NAME = usePrefixClass('dialog');\n    const classPrefix = usePrefixClass();\n    const renderContent = useContent();\n    const renderTNodeJSX = useTNodeJSX();\n    const dialogEle = ref<HTMLElement | null>(null);\n    const { globalConfig } = useConfig('dialog');\n    const { CloseIcon, InfoCircleFilledIcon, CheckCircleFilledIcon, ErrorCircleFilledIcon } = useGlobalIcon({\n      CloseIcon: TdCloseIcon,\n      InfoCircleFilledIcon: TdInfoCircleFilledIcon,\n      CheckCircleFilledIcon: TdCheckCircleFilledIcon,\n      ErrorCircleFilledIcon: TdErrorCircleFilledIcon,\n    });\n    const confirmBtnAction = (e: MouseEvent) => {\n      props.onConfirm?.({ e });\n    };\n    const cancelBtnAction = (e: MouseEvent) => {\n      props.onCancel?.({ e });\n      emitCloseEvent({ e, trigger: 'cancel' });\n    };\n    const { getConfirmBtn, getCancelBtn } = useAction({ confirmBtnAction, cancelBtnAction });\n    // teleport容器\n    const teleportElement = useTeleport(() => props.attach);\n    useDestroyOnClose();\n    const timer = ref();\n    const styleEl = ref();\n    // 是否模态形式的对话框\n    const isModal = computed(() => props.mode === 'modal');\n    // 是否非模态对话框\n    const isModeLess = computed(() => props.mode === 'modeless');\n    // 是否普通对话框，没有脱离文档流的对话框\n    const isNormal = computed(() => props.mode === 'normal');\n    // 是否全屏对话框\n    const isFullScreen = computed(() => props.mode === 'full-screen');\n    const computedVisible = computed(() => props.visible);\n    const maskClass = computed(() => [\n      `${COMPONENT_NAME.value}__mask`,\n      !props.showOverlay && `${classPrefix.value}-is-hidden`,\n    ]);\n    const positionClass = computed(() => {\n      if (isNormal.value) return [];\n      if (isFullScreen.value) return [`${COMPONENT_NAME.value}__position_fullscreen`];\n\n      return [\n        `${COMPONENT_NAME.value}__position`,\n        !!props.top && `${COMPONENT_NAME.value}--top`,\n        `${props.placement && !props.top ? `${COMPONENT_NAME.value}--${props.placement}` : ''}`,\n      ];\n    });\n    const wrapClass = computed(() => [!isNormal.value && `${COMPONENT_NAME.value}__wrap`]);\n    const positionStyle = computed(() => {\n      if (isFullScreen.value) return {}; // 全屏模式，top属性不生效\n\n      // 此处获取定位方式 top 优先级较高 存在时 默认使用top定位\n      const { top } = props;\n      let topStyle = {};\n      if (top !== undefined) {\n        const topValue = GetCSSValue(top);\n        topStyle = { paddingTop: topValue };\n      }\n      return topStyle;\n    });\n    const dialogClass = computed(() => {\n      const dialogClass = [\n        `${COMPONENT_NAME.value}`,\n        `${COMPONENT_NAME.value}__modal-${props.theme}`,\n        isModeLess.value && props.draggable && `${COMPONENT_NAME.value}--draggable`,\n      ];\n\n      if (isFullScreen.value) {\n        dialogClass.push(`${COMPONENT_NAME.value}__fullscreen`);\n      } else {\n        dialogClass.push(...[`${COMPONENT_NAME.value}--default`, `${COMPONENT_NAME.value}--${props.placement}`]);\n      }\n      return dialogClass;\n    });\n    const dialogStyle = computed(() => {\n      return !isFullScreen.value ? { width: GetCSSValue(props.width) } : {}; // width全屏模式不生效\n    });\n    const { isLastDialog } = usePopupManager('dialog', {\n      visible: computedVisible,\n    });\n\n    watch(\n      () => props.visible,\n      (value) => {\n        if (value) {\n          if ((isModal.value && !props.showInAttachedElement) || isFullScreen.value) {\n            if (props.preventScrollThrough) {\n              document.body.appendChild(styleEl.value);\n            }\n\n            nextTick(() => {\n              if (mousePosition && dialogEle.value) {\n                dialogEle.value.style.transformOrigin = `${mousePosition.x - dialogEle.value.offsetLeft}px ${\n                  mousePosition.y - dialogEle.value.offsetTop\n                }px`;\n              }\n            });\n          }\n          // 清除鼠标焦点 避免entry事件多次触发（按钮弹出弹窗 不移除焦点 立即按Entry按键 会造成弹窗关闭再弹出）\n          (document.activeElement as HTMLElement)?.blur();\n        } else {\n          clearStyleFunc();\n        }\n        addKeyboardEvent(value);\n      },\n    );\n\n    function destroySelf() {\n      styleEl.value.parentNode?.removeChild?.(styleEl.value);\n    }\n\n    function clearStyleFunc() {\n      clearTimeout(timer.value);\n      timer.value = setTimeout(() => {\n        destroySelf();\n      }, 150);\n    }\n\n    const addKeyboardEvent = (status: boolean) => {\n      if (status) {\n        document.addEventListener('keydown', keyboardEvent);\n        props.confirmOnEnter && document.addEventListener('keydown', keyboardEnterEvent);\n      } else {\n        document.removeEventListener('keydown', keyboardEvent);\n        props.confirmOnEnter && document.removeEventListener('keydown', keyboardEnterEvent);\n      }\n    };\n    // 回车出发确认事件\n    const keyboardEnterEvent = (e: KeyboardEvent) => {\n      const eventSrc = e.target as HTMLElement;\n      if (eventSrc.tagName.toLowerCase() === 'input') return; // 若是input触发 则不执行\n      const { code } = e;\n      if ((code === 'Enter' || code === 'NumpadEnter') && isLastDialog()) {\n        props.onConfirm?.({ e });\n      }\n    };\n    const keyboardEvent = (e: KeyboardEvent) => {\n      if (e.code === 'Escape' && isLastDialog()) {\n        props.onEscKeydown?.({ e });\n        // 根据closeOnEscKeydown判断按下ESC时是否触发close事件\n        if (props.closeOnEscKeydown ?? globalConfig.value.closeOnEscKeydown) {\n          emitCloseEvent({ e, trigger: 'esc' });\n        }\n      }\n    };\n    const overlayAction = (e: MouseEvent) => {\n      if (props.showOverlay && (props.closeOnOverlayClick ?? globalConfig.value.closeOnOverlayClick)) {\n        props.onOverlayClick?.({ e });\n        emitCloseEvent({ e, trigger: 'overlay' });\n      }\n    };\n    const { onClick, onMousedown, onMouseup } = useSameTarget(overlayAction);\n    const closeBtnAction = (e: MouseEvent) => {\n      props.onCloseBtnClick?.({ e });\n      emitCloseEvent({\n        trigger: 'close-btn',\n        e,\n      });\n    };\n\n    // 打开弹窗动画结束时事件\n    const afterEnter = () => {\n      props.onOpened?.();\n    };\n    // 关闭弹窗动画结束时事件\n    const afterLeave = () => {\n      if (isModeLess.value && props.draggable && dialogEle.value) {\n        // 关闭弹窗 清空拖拽设置的相关css\n        dialogEle.value.style.position = 'relative';\n        dialogEle.value.style.left = 'unset';\n        dialogEle.value.style.top = 'unset';\n      }\n      props.onClosed?.();\n    };\n\n    const emitCloseEvent = (ctx: DialogCloseContext) => {\n      props.onClose?.(ctx);\n      // 默认关闭弹窗\n      context.emit('update:visible', false);\n    };\n\n    // Vue在引入阶段对事件的处理还做了哪些初始化操作。Vue在实例上用一个_events属性存贮管理事件的派发和更新，\n    // 暴露出$on, $once, $off, $emit方法给外部管理事件和派发执行事件\n    // 所以通过判断_events某个事件下监听函数数组是否超过一个，可以判断出组件是否监听了当前事件\n    const hasEventOn = (name: string) => {\n      // _events 因没有被暴露在vue实例接口中，只能把这个规则注释掉\n      // eslint-disable-next-line dot-notation\n      const eventFuncs = this['_events']?.[name];\n      return !!eventFuncs?.length;\n    };\n    const getIcon = () => {\n      const icon = {\n        info: <InfoCircleFilledIcon class={`${classPrefix.value}-is-info`} />,\n        warning: <ErrorCircleFilledIcon class={`${classPrefix.value}-is-warning`} />,\n        danger: <ErrorCircleFilledIcon class={`${classPrefix.value}-is-error`} />,\n        success: <CheckCircleFilledIcon class={`${classPrefix.value}-is-success`} />,\n      };\n      return icon[props.theme];\n    };\n    const renderDialog = () => {\n      // header 值为 true 显示空白头部\n      const defaultHeader = <h5 class=\"title\"></h5>;\n      const defaultCloseBtn = <CloseIcon />;\n      const body = renderContent('default', 'body');\n      const defaultFooter = (\n        <div>\n          {getCancelBtn({\n            cancelBtn: props.cancelBtn as TdDialogProps['cancelBtn'],\n            globalCancel: globalConfig.value.cancel,\n            className: `${COMPONENT_NAME.value}__cancel`,\n          })}\n          {getConfirmBtn({\n            theme: props.theme,\n            confirmBtn: props.confirmBtn as TdDialogProps['confirmBtn'],\n            globalConfirm: globalConfig.value.confirm,\n            globalConfirmBtnTheme: globalConfig.value.confirmBtnTheme,\n            className: `${COMPONENT_NAME.value}__confirm`,\n            confirmLoading: props.confirmLoading,\n          })}\n        </div>\n      );\n      const headerClassName = isFullScreen.value\n        ? [`${COMPONENT_NAME.value}__header`, `${COMPONENT_NAME.value}__header--fullscreen`]\n        : `${COMPONENT_NAME.value}__header`;\n\n      const closeClassName = isFullScreen.value\n        ? [`${COMPONENT_NAME.value}__close`, `${COMPONENT_NAME.value}__close--fullscreen`]\n        : `${COMPONENT_NAME.value}__close`;\n\n      const bodyClassName =\n        props.theme === 'default' ? [`${COMPONENT_NAME.value}__body`] : [`${COMPONENT_NAME.value}__body__icon`];\n\n      const footerContent = renderTNodeJSX('footer', defaultFooter);\n\n      if (isFullScreen.value && footerContent) {\n        bodyClassName.push(`${COMPONENT_NAME.value}__body--fullscreen`);\n      } else if (isFullScreen.value) {\n        bodyClassName.push(`${COMPONENT_NAME.value}__body--fullscreen--without-footer`);\n      }\n\n      const footerClassName = isFullScreen.value\n        ? [`${COMPONENT_NAME.value}__footer`, `${COMPONENT_NAME.value}__footer--fullscreen`]\n        : `${COMPONENT_NAME.value}__footer`;\n\n      const onStopDown = (e: MouseEvent) => {\n        if (isModeLess.value && props.draggable) e.stopPropagation();\n      };\n\n      return (\n        // /* 非模态形态下draggable为true才允许拖拽 */\n        <div class={wrapClass.value}>\n          <div\n            class={positionClass.value}\n            style={positionStyle.value}\n            onClick={onClick}\n            onMousedown={onMousedown}\n            onMouseup={onMouseup}\n          >\n            <div\n              key=\"dialog\"\n              class={dialogClass.value}\n              style={dialogStyle.value}\n              v-draggable={isModeLess.value && props.draggable}\n              ref={dialogEle}\n            >\n              <div class={headerClassName} onMousedown={onStopDown}>\n                <div class={`${COMPONENT_NAME.value}__header-content`}>\n                  {getIcon()}\n                  {renderTNodeJSX('header', defaultHeader)}\n                </div>\n\n                {props.closeBtn ? (\n                  <span class={closeClassName} onClick={closeBtnAction}>\n                    {renderTNodeJSX('closeBtn', defaultCloseBtn)}\n                  </span>\n                ) : null}\n              </div>\n              <div class={bodyClassName} onMousedown={onStopDown}>\n                {body}\n              </div>\n              {footerContent && (\n                <div class={footerClassName} onMousedown={onStopDown}>\n                  {footerContent}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      );\n    };\n\n    onMounted(() => {\n      const hasScrollBar = document.documentElement.scrollHeight > document.documentElement.clientHeight;\n      const scrollWidth = hasScrollBar ? getScrollbarWidth() : 0;\n      styleEl.value = document.createElement('style');\n      styleEl.value.dataset.id = `td_dialog_${+new Date()}_${(key += 1)}`;\n      styleEl.value.innerHTML = `\n        html body {\n          overflow-y: hidden;\n          width: calc(100% - ${scrollWidth}px);\n        }\n      `;\n    });\n\n    onBeforeUnmount(() => {\n      addKeyboardEvent(false);\n      destroySelf();\n    });\n\n    return {\n      COMPONENT_NAME,\n      isModal,\n      isModeLess,\n      isFullScreen,\n      maskClass,\n      dialogClass,\n      dialogStyle,\n      dialogEle,\n      afterEnter,\n      afterLeave,\n      hasEventOn,\n      renderDialog,\n      teleportElement,\n    };\n  },\n  render() {\n    const { COMPONENT_NAME } = this;\n    const maskView = (this.isModal || this.isFullScreen) && <div key=\"mask\" class={this.maskClass}></div>;\n    const dialogView = this.renderDialog();\n    const view = [maskView, dialogView];\n    const ctxStyle = { zIndex: this.zIndex };\n    // dialog__ctx--fixed 绝对定位\n    // dialog__ctx--absolute 挂载在attach元素上 相对定位\n    // __ctx--modeless modeless 点击穿透\n    const ctxClass = [\n      `${COMPONENT_NAME}__ctx`,\n      {\n        [`${COMPONENT_NAME}__ctx--fixed`]: this.isModal || this.isFullScreen,\n        [`${COMPONENT_NAME}__ctx--absolute`]: this.isModal && this.showInAttachedElement,\n        [`${COMPONENT_NAME}__ctx--modeless`]: this.isModeLess,\n      },\n    ];\n    return (\n      <Teleport disabled={!this.attach || !this.teleportElement} to={this.teleportElement}>\n        <Transition\n          duration={300}\n          name={`${COMPONENT_NAME}-zoom__vue`}\n          onAfterEnter={this.afterEnter}\n          onAfterLeave={this.afterLeave}\n        >\n          {(!this.destroyOnClose || this.visible) && (\n            <div v-show={this.visible} class={ctxClass} style={ctxStyle} {...this.$attrs}>\n              {view}\n            </div>\n          )}\n        </Transition>\n      </Teleport>\n    );\n  },\n});\n"],"names":["GetCSSValue","v","Number","isNaN","concat","mousePosition","getClickPosition","e","x","clientX","y","clientY","setTimeout","window","document","documentElement","addEventListener","InitDragEvent","dragBox","target","windowInnerWidth","innerWidth","clientWidth","windowInnerHeight","innerHeight","clientHeight","targetEvent","disX","offsetLeft","disY","offsetTop","dialogW","offsetWidth","dialogH","offsetHeight","mouseMoverHandler","documentEvent","left","top","style","position","mouseUpHandler","removeEventListener","key","defineComponent","name","directives","draggable","el","binding","value","inheritAttrs","props","emits","setup","context","_this","COMPONENT_NAME","usePrefixClass","classPrefix","renderContent","useContent","renderTNodeJSX","useTNodeJSX","dialogEle","ref","_useConfig","useConfig","globalConfig","_useGlobalIcon","useGlobalIcon","CloseIcon","TdCloseIcon","InfoCircleFilledIcon","TdInfoCircleFilledIcon","CheckCircleFilledIcon","TdCheckCircleFilledIcon","ErrorCircleFilledIcon","TdErrorCircleFilledIcon","confirmBtnAction","_props2$onConfirm","onConfirm","cancelBtnAction","_props2$onCancel","onCancel","emitCloseEvent","trigger","_useAction","useAction","getConfirmBtn","getCancelBtn","teleportElement","useTeleport","attach","useDestroyOnClose","timer","styleEl","isModal","computed","mode","isModeLess","isNormal","isFullScreen","computedVisible","visible","maskClass","showOverlay","positionClass","placement","wrapClass","positionStyle","topStyle","topValue","paddingTop","dialogClass","theme","push","apply","dialogStyle","width","_usePopupManager","usePopupManager","isLastDialog","watch","_document$activeEleme","showInAttachedElement","preventScrollThrough","body","appendChild","nextTick","transformOrigin","activeElement","blur","clearStyleFunc","addKeyboardEvent","destroySelf","_styleEl$value$parent","_styleEl$value$parent2","parentNode","removeChild","call","clearTimeout","status","keyboardEvent","confirmOnEnter","keyboardEnterEvent","eventSrc","tagName","toLowerCase","code","_props2$onConfirm2","_props2$onEscKeydown","_props2$closeOnEscKey","onEscKeydown","closeOnEscKeydown","overlayAction","_props2$closeOnOverla","closeOnOverlayClick","_props2$onOverlayClic","onOverlayClick","_useSameTarget","useSameTarget","onClick","onMousedown","onMouseup","closeBtnAction","_props2$onCloseBtnCli","onCloseBtnClick","afterEnter","_props2$onOpened","onOpened","afterLeave","_props2$onClosed","onClosed","ctx","_props2$onClose","onClose","emit","hasEventOn","_this$_events","eventFuncs","length","getIcon","icon","info","warning","danger","success","renderDialog","defaultHeader","_createVNode","defaultCloseBtn","defaultFooter","cancelBtn","globalCancel","cancel","className","confirmBtn","globalConfirm","confirm","globalConfirmBtnTheme","confirmBtnTheme","confirmLoading","headerClassName","closeClassName","bodyClassName","footerContent","footerClassName","onStopDown","stopPropagation","_withDirectives","closeBtn","_resolveDirective","onMounted","hasScrollBar","scrollHeight","scrollWidth","getScrollbarWidth","createElement","dataset","id","Date","innerHTML","onBeforeUnmount","render","_this2","maskView","dialogView","view","ctxStyle","zIndex","ctxClass","_defineProperty","Teleport","_default","Transition","destroyOnClose","$attrs"],"mappings":"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"}