{"version":3,"file":"hooks.js","sources":["../../src/drawer/hooks.ts"],"sourcesContent":["import { computed, ref } from 'vue';\nimport { Styles } from '../common';\nimport type { TdDrawerProps } from './type';\n\nexport const useDrag = (props: TdDrawerProps) => {\n  // 以下为拖拽改变抽屉大小相关 可以抽成hooks\n  const isSizeDragging = ref(false);\n  const draggedSizeValue = ref<string>(null);\n\n  const enableDrag = () => {\n    // mousedown绑定mousemove和mouseup事件\n    document.addEventListener('mouseup', handleMouseup, true);\n    document.addEventListener('mousemove', handleMousemove, true);\n    isSizeDragging.value = true;\n  };\n\n  const handleMouseup = () => {\n    document.removeEventListener('mouseup', handleMouseup, true);\n    document.removeEventListener('mousemove', handleMousemove, true);\n    isSizeDragging.value = false;\n  };\n\n  const handleMousemove = (e: MouseEvent) => {\n    // 鼠标移动时计算draggedSizeValue的值\n    const { x, y } = e;\n    const maxHeight = document.documentElement.clientHeight;\n    const maxWidth = document.documentElement.clientWidth;\n    const offsetHeight = 8;\n    const offsetWidth = 8;\n\n    if (isSizeDragging.value && props.sizeDraggable) {\n      if (props.placement === 'right') {\n        const moveLeft = Math.min(Math.max(maxWidth - x + offsetWidth, offsetWidth), maxWidth);\n        draggedSizeValue.value = `${moveLeft}px`;\n      }\n      if (props.placement === 'left') {\n        const moveRight = Math.min(Math.max(x + offsetWidth, offsetWidth), maxWidth);\n        draggedSizeValue.value = `${moveRight}px`;\n      }\n      if (props.placement === 'top') {\n        const moveBottom = Math.min(Math.max(y + offsetHeight, offsetHeight), maxHeight);\n        draggedSizeValue.value = `${moveBottom}px`;\n      }\n      if (props.placement === 'bottom') {\n        const moveTop = Math.min(Math.max(maxHeight - y + offsetHeight, offsetHeight), maxHeight);\n        draggedSizeValue.value = `${moveTop}px`;\n      }\n    }\n  };\n\n  const draggableLineStyles = computed(() => {\n    // 设置拖拽control的样式\n    const isHorizontal = ['right', 'left'].includes(props.placement);\n    const oppositeMap = {\n      left: 'right',\n      right: 'left',\n      top: 'bottom',\n      bottom: 'top',\n    };\n    return {\n      zIndex: 1,\n      position: 'absolute',\n      background: 'transparent',\n      [oppositeMap[props.placement]]: 0,\n      width: isHorizontal ? '16px' : '100%',\n      height: isHorizontal ? '100%' : '16px',\n      cursor: isHorizontal ? 'col-resize' : 'row-resize',\n    } as Styles;\n  });\n\n  return { draggedSizeValue, enableDrag, draggableLineStyles };\n};\n"],"names":["useDrag","props","isSizeDragging","ref","draggedSizeValue","enableDrag","document","addEventListener","handleMouseup","handleMousemove","value","removeEventListener","e","x","y","maxHeight","documentElement","clientHeight","maxWidth","clientWidth","offsetHeight","offsetWidth","sizeDraggable","placement","moveLeft","Math","min","max","moveRight","moveBottom","moveTop","draggableLineStyles","computed","isHorizontal","includes","oppositeMap","left","right","top","bottom","_defineProperty","zIndex","position","background"],"mappings":"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"}