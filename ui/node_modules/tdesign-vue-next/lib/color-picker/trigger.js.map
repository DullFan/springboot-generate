{"version":3,"file":"trigger.js","sources":["../../src/color-picker/trigger.tsx"],"sourcesContent":["import { defineComponent, PropType, ref, watch } from 'vue';\nimport TInput from '../input';\nimport { Color } from './utils';\nimport { TdColorPickerProps } from './type';\nimport { useBaseClassName } from './hooks';\nimport { useCommonClassName } from '../hooks/useConfig';\n\nexport default defineComponent({\n  name: 'DefaultTrigger',\n  inheritAttrs: false,\n  props: {\n    color: {\n      type: String,\n      default: '',\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    clearable: {\n      type: Boolean,\n      default: false,\n    },\n    inputProps: {\n      type: Object as PropType<TdColorPickerProps['inputProps']>,\n      default: () => {\n        return {\n          autoWidth: true,\n        };\n      },\n    },\n    onTriggerChange: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n    size: {\n      type: String as PropType<TdColorPickerProps['size']>,\n      default: 'medium',\n    },\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const value = ref(props.color);\n    const { SIZE: sizeClassNames } = useCommonClassName();\n    watch(\n      () => [props.color],\n      () => (value.value = props.color),\n    );\n\n    const handleChange = (input: string) => {\n      if (input === props.color) {\n        return;\n      }\n      if (input && !Color.isValid(input)) {\n        value.value = props.color;\n      } else {\n        value.value = input;\n      }\n      props.onTriggerChange(value.value);\n    };\n\n    return {\n      baseClassName,\n      value,\n      handleChange,\n      sizeClassNames,\n    };\n  },\n\n  render() {\n    const { baseClassName, sizeClassNames } = this;\n\n    const inputSlots = {\n      label: () => {\n        return (\n          <div class={[`${baseClassName}__trigger--default__color`, `${baseClassName}--bg-alpha`]}>\n            <span\n              class={[\n                'color-inner',\n                {\n                  [sizeClassNames[this.size]]: this.size !== 'medium',\n                },\n              ]}\n              style={{\n                background: this.value,\n              }}\n            ></span>\n          </div>\n        );\n      },\n    };\n    return (\n      <TInput\n        clearable={this.clearable}\n        size={this.size}\n        v-slots={inputSlots}\n        v-model={this.value}\n        disabled={this.disabled}\n        onBlur={this.handleChange}\n        {...this.inputProps}\n      />\n    );\n  },\n});\n"],"names":["defineComponent","name","inheritAttrs","props","color","type","String","disabled","Boolean","clearable","inputProps","Object","_default","autoWidth","onTriggerChange","Function","size","setup","baseClassName","useBaseClassName","value","ref","_useCommonClassName","useCommonClassName","sizeClassNames","SIZE","watch","handleChange","input","Color","isValid","render","_this","inputSlots","label","_createVNode","concat","_defineProperty","background","TInput","_mergeProps","onUpdateModelValue","$event"],"mappings":"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"}