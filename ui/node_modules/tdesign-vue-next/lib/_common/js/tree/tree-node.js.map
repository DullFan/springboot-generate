{"version":3,"file":"tree-node.js","sources":["../../../../src/_common/js/tree/tree-node.ts"],"sourcesContent":["import isNull from 'lodash/isNull';\nimport isFunction from 'lodash/isFunction';\nimport isNumber from 'lodash/isNumber';\nimport uniqueId from 'lodash/uniqueId';\nimport isBoolean from 'lodash/isBoolean';\nimport isNil from 'lodash/isNil';\nimport get from 'lodash/get';\nimport { TreeStore } from './tree-store';\nimport {\n  TreeNodeValue,\n  TreeNodeState,\n  TypeIdMap,\n  TypeTreeItem,\n  TypeSettingOptions,\n  TypeTreeNodeModel,\n  TypeTreeNodeData,\n  TypeTreeStoreOptions,\n  TypeFnOperation,\n} from './types';\nimport {\n  createNodeModel,\n} from './tree-node-model';\nimport log from '../log';\n\nconst { hasOwnProperty } = Object.prototype;\n\n// 这里的属性为 data 中属性可以同步到 treeNode 实例属性的白名单\n// 仅 label 属性和在列表中的属性可以通过 set 方法配置到 treeNode 实例上\nexport const setableStatus: Record<string, boolean | null> = {\n  expandMutex: null,\n  activable: null,\n  checkable: null,\n  draggable: null,\n  loading: false,\n};\n\nexport const setableProps = Object.keys(setableStatus);\n\nexport const syncableProps = [...setableProps, 'actived', 'expanded', 'checked'];\n\nexport const privateKey = '__tdesign_id__';\n\n// vm 开头为视图属性，不可以外部设置\n// 用于触发视图更新\n// public 方法，在 ui 组件中有可能在使用，会保障其输入输出实现\n// private 方法，可能会改动其输入输出\n\n/**\n * tree 节点数据模型\n * @class TreeNode\n * @param {TreeStore} tree TreeStore 实例\n * @param {object} [data] 节点数据\n * @param {TreeNode} parent 指定的当前 TreeStore 实例中的父节点\n */\nexport class TreeNode {\n  // 节点隶属的树实例\n  public tree: TreeStore;\n\n  // 节点私有 id，不接受外部传入，确保唯一性\n  public [privateKey]: string;\n\n  // 节点 id ，唯一标志\n  public value: string;\n\n  // 节点文本\n  public label: string;\n\n  // 节点数据\n  public data: TypeTreeNodeData;\n\n  // 父节点\n  public parent: TreeNode;\n\n  // 子节点列表\n  public children: TreeNode[] | boolean;\n\n  // 暴露的 treeNodeModel，这个对象的属性和 api 提供给用户使用\n  public model: TypeTreeNodeModel;\n\n  // 是否为叶节点\n  public vmIsLeaf: boolean;\n\n  // 是否为子节点中的第一个\n  public vmIsFirst: boolean;\n\n  // 是否为子节点中的最后\n  public vmIsLast: boolean;\n\n  // 节点是否是经过过滤剩下的\n  public vmIsRest: boolean;\n\n  // 节点是否展示为锁定状态\n  public vmIsLocked: boolean;\n\n  // 节点在视图上实际的展开状态\n  public expanded: boolean;\n\n  // 展开时是否收起同级节点，对子节点生效\n  public expandMutex: null | boolean;\n\n  // 节点在视图上实际的激活状态\n  public actived: boolean;\n\n  // 是否可激活\n  public activable: null | boolean;\n\n  // 是否可选中\n  public checkable: null | boolean;\n\n  // 是否可选中的视图呈现\n  public vmCheckable: boolean;\n\n  // 节点在视图上实际的选中态\n  public checked: boolean;\n\n  // 节点实际是否为半选状态\n  public indeterminate: boolean;\n\n  // 节点是否已禁用\n  public disabled: null | boolean;\n\n  // 节点是否可拖动\n  public draggable: null | boolean;\n\n  // 节点是否可视\n  public visible: boolean;\n\n  // 节点在树中的层级\n  public level: number;\n\n  // 节点是否正在加载数据\n  public loading: boolean;\n\n  public constructor(\n    tree: TreeStore,\n    data?: TypeTreeNodeData,\n    parent?: TreeNode,\n  ) {\n    this.data = data;\n    this.tree = tree;\n\n    const config = tree.config || {};\n    const prefix = config.prefix || 't';\n    const keys = config.keys || {};\n    const propChildren = keys.children || 'children';\n    const propLabel = keys.label || 'label';\n    const propValue = keys.value || 'value';\n    const propDisabled = keys.disabled || 'disabled';\n\n    // 节点自身初始化数据\n    this.model = null;\n    this.children = null;\n    this.level = 0;\n\n    // vm 开头为视图属性，不可以外部设置\n    this.vmCheckable = false;\n    this.vmIsLeaf = false;\n    this.vmIsFirst = false;\n    this.vmIsLast = false;\n    this.vmIsRest = false;\n    this.vmIsLocked = false;\n\n    // 初始化节点基本状态\n    this.visible = false;\n    this.actived = false;\n    this.checked = false;\n    this.indeterminate = false;\n    this.loading = false;\n    this.expanded = config.expandAll;\n\n    // 下面几个属性，节点初始化的时候，可以设置与 treeStore.config 不同的值\n    // 初始化默认值为 null, 则在方法判断时，默认以 treeStore.config 为准\n    // 传递或者设置属性为 boolean 类型的值，则以节点属性值为准\n    // 这种处理方式主要是解决 treeStore.setConfig 方法配置全局属性导致的状态切换与保留的问题\n    this.activable = null;\n    this.checkable = null;\n    this.expandMutex = null;\n    this.draggable = null;\n\n    // 为节点设置唯一 id\n    // tree 数据替换时，value 相同有可能导致节点状态渲染冲突\n    // 用这个 唯一 id 来解决，用于类似 vue 组件的唯一 key 指定场景\n    this[privateKey] = uniqueId(prefix);\n\n    // 设置 value\n    // 没有 value 的时候，value 默认使用自动生成的 唯一 id\n    this.value = isNil(get(data, propValue))\n      ? this[privateKey]\n      : get(data, propValue);\n    const { nodeMap, privateMap } = tree;\n    if (nodeMap.get(this.value)) {\n      log.warn('Tree', `Dulplicate value: ${this.value}`);\n    }\n    nodeMap.set(this.value, this);\n    privateMap.set(this[privateKey], this);\n\n    // 设置标签\n    this.label = get(data, propLabel) || '';\n    // 设置是否禁用\n    this.disabled = get(data, propDisabled) || false;\n\n    // 设置子节点\n    const children = data[propChildren];\n    // 子节点为 true 的状态逻辑需要放到状态计算之前\n    // 初始化加载逻辑需要依据这个来进行\n    if (children === true) {\n      this.children = children;\n    }\n\n    // 设置父节点\n    if (parent && parent instanceof TreeNode) {\n      this.parent = parent;\n    } else {\n      this.parent = null;\n    }\n\n    // 同步数据属性到节点属性\n    // 仅 syncableStatus 列举的属性被同步到 treeNode 实例属性\n    syncableProps.forEach((prop) => {\n      if (typeof data[prop] !== 'undefined') {\n        this[prop] = data[prop];\n      }\n    });\n\n    // 初始化节点激活状态\n    this.initActived();\n    // 展开状态影响了子节点的显示状态，所以要在子节点插入之前初始化展开状态\n    this.initExpanded();\n\n    // 这里的子节点加载逻辑不能放到状态初始化之前\n    // 因为子节点状态计算依赖父节点初始化状态\n    if (Array.isArray(children)) {\n      this.append(children);\n    } else if (children === true && !config.lazy) {\n      this.loadChildren();\n    }\n\n    // 节点的选中状态同时依赖于子节点状态与父节点状态\n    // 因此在子节点插入之后再更新选中状态\n    this.initChecked();\n    this.updateChecked();\n\n    // 标记节点更新\n    this.update();\n    // 创建节点需要回流操作\n    tree.reflow(this);\n  }\n\n  /* ------ 状态初始化 ------ */\n\n  /**\n   * 初始化选中态\n   * @return void\n   */\n  private initChecked(): void {\n    const { tree, value, parent } = this;\n    const { checkedMap } = tree;\n    const { checkStrictly } = tree.config;\n    if (this.checked) {\n      checkedMap.set(value, true);\n    }\n    // 这里不可以使用 parent.isChecked 方法\n    // 因为当前节点创建时尚未插入父节点的 children 数组，可能父节点选中态仅受到之前子节点状态的影响\n    // 这会导致父节点状态计算错误，进而引发子节点变更了选中状态\n    if (!checkStrictly && parent?.checked) {\n      checkedMap.set(value, true);\n    }\n  }\n\n  /**\n   * 初始化节点展开状态\n   * @return void\n   */\n  private initExpanded(): void {\n    const { tree } = this;\n    let { expanded } = this;\n    const { config } = tree;\n    if (isNumber(config.expandLevel) && this.getLevel() < config.expandLevel) {\n      tree.expandedMap.set(this.value, true);\n      expanded = true;\n    }\n    if (this.children === true && config.lazy) {\n      expanded = false;\n    }\n    if (expanded) {\n      tree.expandedMap.set(this.value, true);\n    } else {\n      tree.expandedMap.delete(this.value);\n    }\n    this.expanded = expanded;\n  }\n\n  /**\n   * 初始化节点激活状态\n   * @return void\n   */\n  private initActived(): void {\n    const { tree, actived } = this;\n    if (actived && this.isActivable()) {\n      tree.activedMap.set(this.value, true);\n    }\n  }\n\n  /* ------ 节点操作 ------ */\n\n  /**\n   * 追加节点数据\n   * @param {object | object[]} data 节点数据\n   * @return void\n   */\n  public append(data: TypeTreeNodeData | TypeTreeNodeData[]): void {\n    const list = [];\n    if (!Array.isArray(data)) {\n      list.push(data);\n    } else {\n      list.push(...data);\n    }\n    if (list.length <= 0) {\n      return;\n    }\n    if (!Array.isArray(this.children)) {\n      this.children = [];\n    }\n    const { children, tree } = this;\n    list.forEach((item) => {\n      let node = null;\n      if (item instanceof TreeNode) {\n        node = item;\n        node.appendTo(this.tree, this);\n      } else {\n        node = new TreeNode(this.tree, item, this);\n        children.push(node);\n      }\n    });\n    tree.reflow(this);\n    this.updateRelated();\n  }\n\n  /**\n   * 将当前节点追加到某个父节点的子节点列表中\n   * @param {TreeStore} tree 目标树\n   * @param {TreeNode} [parent] 目标父节点\n   * @param {number} [index] 预期在子节点列表中的位置\n   * @return void\n   */\n  public appendTo(tree: TreeStore, parent?: TreeNode, index?: number): void {\n    const parentNode = parent;\n    let targetIndex = -1;\n    if (isNumber(index)) {\n      targetIndex = index;\n    }\n\n    const targetParents = parentNode?.getParents() || [];\n    const includeCurrent = targetParents.some((pnode) => pnode === this);\n    if (includeCurrent) {\n      throw new Error('无法将父节点插入到子节点');\n    }\n\n    if (parentNode === this) {\n      throw new Error('无法将节点插入到本节点');\n    }\n\n    if (Array.isArray(parentNode?.children)) {\n      const targetPosNode = parentNode?.children[targetIndex];\n      if (targetPosNode && targetPosNode === this) {\n        // 无需将节点插入到原位置\n        return;\n      }\n    }\n\n    // 先要取得 siblings\n    // 因为要应对节点在同一个 siblings 中变换位置的情况\n    let siblings = null;\n    if (parentNode instanceof TreeNode) {\n      if (!Array.isArray(parentNode?.children)) {\n        parentNode.children = [];\n      }\n      siblings = parent.children;\n    } else {\n      siblings = tree.children;\n    }\n\n    // 上面的逻辑其实已经覆盖了所有业务情况\n    // 这里的逻辑报错仅用于极限兜底，防止 treeStore 被误使用\n    if (!Array.isArray(siblings)) {\n      throw new Error('无法插入到目标位置，可插入的节点列表不存在');\n    }\n\n    const prevLength = siblings.length;\n    const prevIndex = this.getIndex();\n\n    this.remove();\n\n    if (isNumber(index)) {\n      let targetIndex = index;\n      if (parentNode === this.parent) {\n        // 前置节点被拔出后再插入到同一个 siblings 时，会引起目标 index 的变化\n        // 因此要相应的变更插入位置\n        // 后置节点被拔出时，目标 index 是不变的\n        const curLength = siblings.length;\n        if (curLength < prevLength && prevIndex <= targetIndex) {\n          targetIndex -= 1;\n        }\n      }\n      siblings.splice(targetIndex, 0, this);\n    } else {\n      siblings.push(this);\n    }\n\n    this.parent = parentNode;\n\n    // 插入节点应当继承展开状态\n    // 但不要继承选中状态和高亮状态\n    const nodes = this.walk();\n    nodes.forEach((item) => {\n      const node = item;\n      node.tree = tree;\n      tree.nodeMap.set(node.value, node);\n      tree.privateMap.set(node[privateKey], node);\n      if (node.expanded) {\n        tree.expandedMap.set(node.value, true);\n      }\n    });\n\n    const updateNodes = parentNode?.walk() || tree.children.map((item) => item.walk()).flat();\n    updateNodes.forEach((node) => {\n      node.update();\n      node.updateChecked();\n    });\n\n    tree.reflow();\n  }\n\n  /**\n   * 插入一个节点或者数据到到同级节点的目标位置\n   * @param {TreeNode | object} item 要插入的节点或者数据\n   * @param {number} [index] 预期在子节点列表中的位置\n   * @return void\n   */\n  private insert(item: TypeTreeItem, index?: number): void {\n    const { tree, parent } = this;\n    const siblings = this.getSiblings();\n    let node = null;\n    if (item instanceof TreeNode) {\n      node = item;\n      node.appendTo(tree, parent, index);\n    } else if (item) {\n      node = new TreeNode(tree, item, parent);\n      if (isNumber(index)) {\n        siblings.splice(index, 0, node);\n      }\n      siblings.forEach((sibling) => {\n        sibling.update();\n      });\n    }\n    tree.reflow();\n  }\n\n  /**\n   * 在当前节点之前插入节点\n   * @param {TreeNode | object} newData 要插入的节点或者数据\n   * @return void\n   */\n  public insertBefore(newData: TypeTreeItem): void {\n    const index = this.getIndex();\n    this.insert(newData, index);\n  }\n\n  /**\n   * 在当前节点之后插入节点\n   * @param {TreeNode | object} newData 要插入的节点或者数据\n   * @return void\n   */\n  public insertAfter(newData: TypeTreeItem): void {\n    const index = this.getIndex();\n    this.insert(newData, index + 1);\n  }\n\n  /**\n   * 从当前树中移除本节点\n   * @return void\n   */\n  public remove(): void {\n    const { tree } = this;\n\n    const nodes = this.walk();\n    const siblings = this.getSiblings();\n    const index = this.getIndex();\n    // 从父节点的子节点列表中移除自己\n    // 但不要将自己的父节点移除，避免渲染与判断失败\n    if (Array.isArray(siblings)) {\n      siblings.splice(index, 1);\n    }\n    // 清理与树的关系，但不清理自身状态\n    nodes.forEach((node) => {\n      node.clean();\n    });\n    // 同级节点的连线状态会受到影响\n    siblings.forEach((node) => {\n      node.update();\n    });\n    // 父节点选中态会受到影响\n    this.updateParents();\n    tree.reflow();\n  }\n\n  /**\n   * 清除本节点与当前树的关系\n   * @return void\n   */\n  private clean(): void {\n    const { tree, value } = this;\n    tree.activedMap.delete(value);\n    tree.checkedMap.delete(value);\n    tree.expandedMap.delete(value);\n    tree.nodeMap.delete(value);\n    tree.filterMap.delete(value);\n    tree.privateMap.delete(this[privateKey]);\n  }\n\n  /**\n   * 异步加载子节点\n   * @return Promise<void>\n   */\n  private async loadChildren(): Promise<void> {\n    const config: TypeTreeStoreOptions = get(this, 'tree.config') || {};\n    if (this.children === true && !this.loading) {\n      if (isFunction(config.load)) {\n        this.loading = true;\n        this.update();\n        let list = [];\n        list = await config.load(this);\n        this.tree.emit('load', {\n          node: this,\n          data: list,\n        });\n        this.loading = false;\n        if (Array.isArray(list) && list.length > 0) {\n          this.append(list);\n        } else {\n          this.children = false;\n        }\n        this.update();\n      }\n    }\n  }\n\n  /**\n   * 设置节点状态\n   * - 为节点设置独立于配置的 disabled 状态: set({ disabled: true })\n   * - 清除独立于配置的 disabled 状态: set({ disabled: null })\n   * @param {object} item 节点状态对象\n   * @return void\n   */\n  public set(item: TreeNodeState): void {\n    const { tree } = this;\n    const keys = Object.keys(item);\n    keys.forEach((key) => {\n      // key, disabled 字段可被 tree.config.keys 定义\n      if (hasOwnProperty.call(setableStatus, key) || key === 'label') {\n        this[key] = item[key];\n      }\n      if (key === 'disabled') {\n        this.setDisabled(item[key]);\n      }\n    });\n    tree.updated(this);\n  }\n\n  /* ------ 节点获取 ------- */\n\n  /**\n   * 获取本节点的父节点\n   * @return TreeNode 父节点\n   */\n  public getParent(): TreeNode {\n    return this.parent;\n  }\n\n  /**\n   * 获取所有父级节点\n   * - 顺序为从当前到根\n   * @return TreeNode[] 父级节点数组\n   */\n  public getParents(): TreeNode[] {\n    const parents = [];\n    let node = this.parent;\n    while (node) {\n      parents.push(node);\n      node = node.parent;\n    }\n    return parents;\n  }\n\n  /**\n   * 获取所有兄弟节点，包含自己在内\n   * @return TreeNode[] 兄弟节点数组\n   */\n  public getSiblings(): TreeNode[] {\n    const { parent, tree } = this;\n    let list: TreeNode[] = [];\n    if (parent) {\n      if (Array.isArray(parent.children)) {\n        list = parent.children;\n      }\n    } else if (tree) {\n      list = tree.children;\n    }\n    return list;\n  }\n\n  /**\n   * 获取当前节点的子节点\n   * @param {boolean} deep 是否获取所有深层子节点\n   * @return TreeNodeModel[] 子节点数组\n   */\n  public getChildren(deep?: boolean): boolean | TypeTreeNodeModel[] {\n    let childrenModel: boolean | TypeTreeNodeModel[] = false;\n    const { children } = this;\n    if (Array.isArray(children)) {\n      if (children.length > 0) {\n        if (deep) {\n          const nodes = this.walk();\n          nodes.shift();\n          childrenModel = nodes.map((item) => item.getModel());\n        } else {\n          childrenModel = children.map((item) => item.getModel());\n        }\n      } else {\n        childrenModel = false;\n      }\n    } else if (isBoolean(children)) {\n      childrenModel = children;\n    }\n    return childrenModel;\n  }\n\n  /**\n   * 获取本节点的根节点\n   * @return TreeNode 根节点\n   */\n  public getRoot(): TreeNode {\n    const parents = this.getParents();\n    return parents[parents.length - 1] || null;\n  }\n\n  /**\n   * 获取节点在父节点的子节点列表中的位置\n   * - 如果没有父节点，则获取节点在根节点列表的位置\n   * @return number 节点位置序号\n   */\n  public getIndex(): number {\n    const list = this.getSiblings();\n    return list.indexOf(this);\n  }\n\n  /**\n   * 返回路径节点\n   * - 路径节点包含自己在内\n   * - 节点顺序与父级节点顺序相反，从根到当前\n   * @return TreeNode[] 路径节点数组\n   */\n  public getPath(): TreeNode[] {\n    const nodes = this.getParents();\n    nodes.unshift(this);\n    return nodes.reverse();\n  }\n\n  /**\n   * 获取节点所在层级\n   * @return number 层级序号\n   */\n  public getLevel(): number {\n    const parents = this.getParents();\n    return parents.length;\n  }\n\n  /* ------ 节点状态判断 ------ */\n\n  /**\n   * 判断节点是否被过滤\n   * @return boolean 是否被过滤方法命中\n   */\n  public isRest(): boolean {\n    const { config, filterMap, hasFilter } = this.tree;\n\n    let rest = false;\n    if (hasFilter) {\n      // 仅在存在过滤条件时，过滤命中才有效\n      const nodeModel = this.getModel();\n      rest = config.filter(nodeModel);\n    }\n\n    if (rest) {\n      filterMap.set(this.value, true);\n    } else if (filterMap.get(this.value)) {\n      filterMap.delete(this.value);\n    }\n\n    return rest;\n  }\n\n  /**\n   * 判断节点是否可见\n   * @return boolean 是否可见\n   */\n  public isVisible(): boolean {\n    const { nodeMap, hasFilter, config } = this.tree;\n    const { allowFoldNodeOnFilter } = config;\n\n    let visible = true;\n\n    if (!nodeMap.get(this.value)) {\n      // 节点不在当前树上，所以不可见\n      return false;\n    }\n\n    if (hasFilter && !allowFoldNodeOnFilter) {\n      // 如果存在过滤条件\n      // 锁定状态和过滤命中状态，直接呈现\n      visible = this.vmIsLocked || this.vmIsRest;\n      return visible;\n    }\n\n    // 标志所有父节点展开导致的可见状态\n    let expandVisible = true;\n    const parents = this.getParents();\n    if (parents.length > 0) {\n      expandVisible = parents.every((node: TreeNode) => node.expanded);\n    }\n\n    if (hasFilter) {\n      visible = expandVisible && (this.vmIsRest || this.vmIsLocked);\n    } else {\n      visible = expandVisible;\n    }\n    return visible;\n  }\n\n  /**\n   * 判断节点为逻辑禁用状态，不包含过滤锁定状态\n   * @return boolean 是否被禁用\n   */\n  public isDisabledState(): boolean {\n    const { tree, parent } = this;\n    const { config } = tree;\n    const { disabled, disableCheck, checkStrictly } = config;\n    let state = disabled || false;\n    if (this.disabled) {\n      // 整个树被禁用，则节点为禁用状态\n      state = true;\n    }\n    if (!checkStrictly && parent?.isDisabledState()) {\n      // 如果 checkStrictly 为 false\n      // 父节点被禁用，则子节点也为禁用状态\n      state = true;\n    }\n    if (typeof disableCheck === 'boolean') {\n      if (disableCheck) {\n        state = true;\n      }\n    } else if (typeof disableCheck === 'function') {\n      // disableCheck 视为禁用节点的过滤函数\n      if (disableCheck(this.getModel())) {\n        state = true;\n      }\n    }\n    return state;\n  }\n\n  /**\n   * 判断节点是否呈现为禁用态，包含过滤锁定状态\n   * @return boolean 是否被禁用\n   */\n  public isDisabled(): boolean {\n    const { tree } = this;\n    const { hasFilter, config } = tree;\n    const { allowFoldNodeOnFilter } = config;\n    if (hasFilter && !allowFoldNodeOnFilter && this.vmIsLocked && !this.vmIsRest) {\n      // 当前树存在过滤条件，允许节点过滤后被折叠，当前节点为锁定节点，并且不是筛选后剩下的节点\n      // 则该节点应当呈现禁用状态\n      return true;\n    }\n    return this.isDisabledState();\n  }\n\n  /**\n   * 判断节点是否能拖拽\n   * @return boolean 是否能拖拽\n   */\n  public isDraggable(): boolean {\n    let state = !!get(this, 'tree.config.draggable');\n    if (typeof this.draggable === 'boolean') {\n      state = this.draggable;\n    }\n    return state;\n  }\n\n  /**\n   * 判断子节点是否互斥展开\n   * @return boolean 子节点是否互斥展开\n   */\n  public isExpandMutex(): boolean {\n    let state = !!get(this, 'tree.config.expandMutex');\n    if (typeof this.expandMutex === 'boolean') {\n      state = this.expandMutex;\n    }\n    return state;\n  }\n\n  /**\n   * 节点是否可被激活\n   * @return boolean 是否可被激活\n   */\n  public isActivable() {\n    let state = !!get(this, 'tree.config.activable');\n    if (typeof this.activable === 'boolean') {\n      state = this.activable;\n    }\n    return state;\n  }\n\n  /**\n   * 节点是否可选\n   * @return boolean 是否可选\n   */\n  public isCheckable() {\n    let state = !!get(this, 'tree.config.checkable');\n    if (typeof this.checkable === 'boolean') {\n      state = this.checkable;\n    }\n    return state;\n  }\n\n  /**\n   * 节点是否被激活\n   * @param {Map} [map] 预设激活节点 map, 用于计算节点在预期环境中的激活状态\n   * @return boolean 是否被激活\n   */\n  public isActived(map?: Map<string, boolean>): boolean {\n    const { tree, value } = this;\n    const activedMap = map || tree.activedMap;\n    return !!(tree.nodeMap.get(value) && activedMap.get(value));\n  }\n\n  /**\n   * 节点是否已展开\n   * @param {Map} [map] 预设展开节点 map, 用于计算节点在预期环境中的展开状态\n   * @return boolean 是否已展开\n   */\n  public isExpanded(map?: Map<string, boolean>): boolean {\n    const { tree, value, vmIsLocked } = this;\n    const { hasFilter, config } = tree;\n    const { allowFoldNodeOnFilter } = config;\n    if (hasFilter && !allowFoldNodeOnFilter && vmIsLocked) return true;\n    const expandedMap = map || tree.expandedMap;\n    return !!(tree.nodeMap.get(value) && expandedMap.get(value));\n  }\n\n  /**\n   * 节点是否被选中\n   * @param {Map} [map] 预设选中节点 map, 用于计算节点在预期环境中的选中态\n   * @return boolean 是否被选中\n   */\n  public isChecked(map?: TypeIdMap): boolean {\n    const { children, tree, value } = this;\n    const { checkStrictly } = tree.config;\n    // 节点不在当前树上，视为未选中\n    if (!tree.nodeMap.get(value)) return false;\n    // 节点不可选，视为未选中\n    if (!this.isCheckable()) return false;\n    const checkedMap = map || tree.checkedMap;\n    let checked = false;\n    // 如果在 checkedMap 中，则直接为 true\n    if (checkedMap.get(value)) {\n      return true;\n    }\n    // 严格模式，则已经可以判定选中状态\n    if (checkStrictly) {\n      return !!checkedMap.get(value);\n    }\n    // 允许关联状态的情况下，需要进一步判断\n    if (Array.isArray(children) && children.length > 0) {\n      // 子节点全部选中，则当前节点选中\n      checked = children.every((node) => {\n        const childIsChecked = node.isChecked(checkedMap);\n        return childIsChecked;\n      });\n    } else {\n      // 从父节点状态推断子节点状态\n      // 这里再调用 isChecked 会导致死循环\n      const parents = this.getParents();\n      checked = parents.some((node) => checkedMap.get(node.value));\n    }\n    return checked;\n  }\n\n  /**\n   * 是否为半选状态\n   * @return boolean 是否为半选状态\n   */\n  public isIndeterminate(): boolean {\n    const { children, tree, value } = this;\n    const { checkStrictly } = tree.config;\n    // 节点不在当前树上，视为未选中\n    if (!tree.nodeMap.get(value)) return false;\n    // 节点不可选，视为未选中\n    if (!this.isCheckable()) return false;\n    // 严格模式没有半选状态\n    if (checkStrictly) return false;\n    // 叶节点不存在半选状态\n    if (!Array.isArray(children)) return false;\n\n    let childChecked: null | boolean = null;\n    const indeterminate = children.some((node: TreeNode) => {\n      if (node.isIndeterminate()) {\n        // 子节点有任意一个半选，则其为半选状态\n        return true;\n      }\n      if (isNull(childChecked)) {\n        childChecked = node.isChecked();\n      }\n      if (childChecked !== node.isChecked()) {\n        // 子节点选中状态不一致，则其为半选状态\n        return true;\n      }\n      return false;\n    });\n\n    return indeterminate;\n  }\n\n  /**\n   * 是否为兄弟节点中的第一个节点\n   * @return boolean 是否为第一个节点\n   */\n  public isFirst(): boolean {\n    const siblings = this.getSiblings();\n    return siblings[0] === this;\n  }\n\n  /**\n   * 是否为兄弟节点中的最后一个节点\n   * @return boolean 是否为最后一个节点\n   */\n  public isLast(): boolean {\n    const siblings = this.getSiblings();\n    return siblings[siblings.length - 1] === this;\n  }\n\n  /**\n   * 是否为叶子节点，叶子节点没有子节点\n   * @return boolean 是否为叶子节点\n   */\n  public isLeaf(): boolean {\n    let isLeaf = false;\n    if (Array.isArray(this.children)) {\n      isLeaf = this.children.length <= 0;\n    } else {\n      isLeaf = !this.children;\n    }\n    return isLeaf;\n  }\n\n  /* ------ 节点状态切换 ------ */\n\n  /**\n   * 锁定节点，解锁节点\n   * - 搜索过滤节点时，路径节点需要固定呈现，视其为锁定态\n   * @param {boolean} lockState 锁定状态\n   * @return void\n   */\n  public lock(lockState: boolean): void {\n    this.vmIsLocked = lockState;\n    this.expanded = this.isExpanded();\n    this.visible = this.isVisible();\n  }\n\n  /**\n   * 节点展开关闭后需要调用的状态检查函数\n   * @return void\n   */\n  public afterExpanded(): void {\n    this.update();\n    // 节点展开时检查延迟加载的数据\n    if (this.expanded && this.children === true) {\n      this.loadChildren();\n    }\n    this.updateChildren();\n  }\n\n  /**\n   * 切换节点展开状态\n   * - 用于受控逻辑处理\n   * - 仅返回预期状态值数组，不直接操作状态\n   * @return string[] 当前树展开的节点值数组\n   */\n  public toggleExpanded(opts?: TypeSettingOptions): TreeNodeValue[] {\n    return this.setExpanded(!this.isExpanded(), opts);\n  }\n\n  /**\n   * 设置节点展开状态\n   * @param {boolean} expanded 节点展开状态\n   * @param {object} [opts] 操作选项\n   * @param {boolean} [opts.directly=false] 是否直接操作节点状态\n   * @return string[] 当前树展开的节点值数组\n   */\n  public setExpanded(\n    expanded: boolean,\n    opts?: TypeSettingOptions\n  ): TreeNodeValue[] {\n    const { tree } = this;\n    const { config } = tree;\n    const options = {\n      directly: false,\n      ...opts,\n    };\n\n    let map = tree.expandedMap;\n    if (!options.directly) {\n      map = new Map(tree.expandedMap);\n    }\n\n    // 手风琴效果，先折叠同级节点\n    if (expanded) {\n      // 列举需要展开的节点\n      const shouldExpandNodes = [];\n      // 自己一定在展开列表中\n      shouldExpandNodes.push(this);\n      if (config.expandParent) {\n        // expandParent 为 true，则父节点都要展开\n        this.getParents().forEach((node) => {\n          shouldExpandNodes.push(node);\n        });\n      }\n      shouldExpandNodes.forEach((node) => {\n        let isExpandMutex = false;\n        // 对于每一个节点，都需要判断是否启用手风琴效果\n        if (node.parent) {\n          isExpandMutex = node.parent.isExpandMutex();\n        } else {\n          isExpandMutex = tree?.config?.expandMutex;\n        }\n        if (isExpandMutex) {\n          // 折叠列表中，先移除同级节点\n          const siblings = node.getSiblings();\n          siblings.forEach((snode) => {\n            map.delete(snode.value);\n            // 同级节点相关状态更新\n            snode.update();\n            snode.updateChildren();\n          });\n        }\n        // 最后设置自己的折叠状态\n        map.set(node.value, true);\n        node.update();\n        node.updateChildren();\n      });\n    } else {\n      map.delete(this.value);\n    }\n\n    if (options.directly) {\n      this.afterExpanded();\n    }\n\n    return tree.getExpanded(map);\n  }\n\n  /**\n   * 切换节点激活状态\n   * - 用于受控逻辑处理\n   * - 仅返回预期状态值数组，不直接操作状态\n   * @return string[] 当前树激活的节点值数组\n   */\n  public toggleActived(opts?: TypeSettingOptions): TreeNodeValue[] {\n    return this.setActived(!this.isActived(), opts);\n  }\n\n  /**\n   * 设置节点激活状态\n   * @param {boolean} actived 节点激活状态\n   * @param {object} [opts] 操作选项\n   * @param {boolean} [opts.directly=false] 是否直接操作节点状态\n   * @return string[] 当前树激活的节点值数组\n   */\n  public setActived(\n    actived: boolean,\n    opts?: TypeSettingOptions\n  ): TreeNodeValue[] {\n    const { tree } = this;\n    const options = {\n      // 为 true, 为 UI 操作，状态变更受 disabled 影响\n      // 为 false, 为值操作, 状态变更不受 disabled 影响\n      isAction: true,\n      // 为 true, 直接操作节点状态\n      // 为 false, 返回预期状态\n      directly: false,\n      ...opts,\n    };\n    const config = tree.config || {};\n    let map = tree.activedMap;\n    if (!options.directly) {\n      map = new Map(tree.activedMap);\n    }\n    if (options.isAction && this.isDisabledState()) {\n      // 对于 UI 动作，禁用时不可切换激活状态\n      return tree.getActived(map);\n    }\n    if (this.isActivable()) {\n      if (actived) {\n        const prevKeys = Array.from(map.keys());\n        if (!config.activeMultiple) {\n          map.clear();\n        }\n        prevKeys.forEach((value) => {\n          const node = tree.getNode(value);\n          node?.update();\n        });\n        map.set(this.value, true);\n      } else {\n        map.delete(this.value);\n      }\n    }\n    this.update();\n    return tree.getActived(map);\n  }\n\n  /**\n   * 是否存在未选中的未禁用子节点\n   * @return boolean 未选中的未禁用子节点存在与否\n   */\n  public hasEnableUnCheckedChild(): boolean {\n    const { children } = this;\n    if (!Array.isArray(children) || children.length <= 0) {\n      // 没有子节点\n      return false;\n    }\n    let state = false;\n    children.some((child) => {\n      // 不理会禁用节点\n      if (child.isDisabledState()) return false;\n      // 不理会选中节点\n      if (child.isChecked()) return false;\n      if (child.isIndeterminate()) {\n        // 为半选节点则进行递归检查\n        if (child.hasEnableUnCheckedChild()) {\n          state = true;\n          return true;\n        }\n        // 都尽可能选中了，则检查之后的节点\n        return false;\n      }\n      // 子节点为未选中状态，且非半选状态\n      // 则直接返回 true\n      state = true;\n      return true;\n    });\n    return state;\n  }\n\n  /**\n   * 切换节点选中状态\n   * - 用于受控逻辑处理\n   * - 仅返回预期状态值数组，不直接操作状态\n   * @return string[] 当前树选中的节点值数组\n   */\n  public toggleChecked(opts?: TypeSettingOptions): TreeNodeValue[] {\n    if (this.isIndeterminate()) {\n      // 当前节点为半选情况下需要判断子节点是否尽可能全部选中\n      // 存在可操作的未选中的子节点，则应当尽可能选中子节点\n      // 不存在可操作的未选中的子节点，则应取消选中子节点\n      const expectState = this.hasEnableUnCheckedChild();\n      return this.setChecked(expectState, opts);\n    }\n    return this.setChecked(!this.isChecked(), opts);\n  }\n\n  /**\n   * 设置节点选中状态\n   * - 节点 UI 操作时调用这个方法\n   * - 节点设置自身状态时调用这个方法\n   * @param {boolean} checked 节点选中状态\n   * @param {object} [opts] 操作选项\n   * @param {boolean} [opts.isAction=true] 是否为 UI 动作\n   * @param {boolean} [opts.directly=false] 是否直接操作节点状态\n   * @return string[] 当前树选中的节点值数组\n   */\n  public setChecked(\n    checked: boolean,\n    opts?: TypeSettingOptions\n  ): TreeNodeValue[] {\n    const { tree } = this;\n    const config = tree.config || {};\n    const options: TypeSettingOptions = {\n      // 为 true, 为 UI 操作，状态变更受 disabled 影响\n      // 为 false, 为值操作, 状态变更不受 disabled 影响\n      isAction: true,\n      // 为 true, 直接操作节点状态\n      // 为 false, 返回预期状态\n      directly: false,\n      ...opts,\n    };\n    let map = tree.checkedMap;\n    if (!options.directly) {\n      map = new Map(tree.checkedMap);\n    }\n    if (!this.isCheckable()) {\n      // 当前节点非可选节点，则不可设置选中态\n      return tree.getChecked(map);\n    }\n    if (options.isAction && this.isDisabledState()) {\n      // 对于 UI 动作，禁用时不可切换选中态\n      return tree.getChecked(map);\n    }\n\n    if (checked === this.isChecked()) {\n      const shouldSet = this.isIndeterminate() && !this.hasEnableUnCheckedChild();\n      if (!shouldSet) {\n        // 值没有变更, 则选中态无变化\n        return tree.getChecked(map);\n      }\n    }\n\n    if (checked) {\n      map.set(this.value, true);\n    } else {\n      map.delete(this.value);\n    }\n\n    if (config.checkStrictly) {\n      // 严格模式下，选中态不扩散，仅操作节点自身\n      if (options.directly) {\n        // 严格模式值更新节点自身\n        this.updateChecked();\n      }\n    } else {\n      // 先向下游扩散选中态\n      this.spreadChildrenChecked(checked, map, options);\n      // 再计算上游选中态\n      this.spreadParentChecked(checked, map, options);\n      // 状态更新务必放到扩散动作之后\n      // 过早的状态更新会导致后续计算出错\n      if (options.directly) {\n        const relatedNodes = tree.getRelatedNodes([this.value], {\n          reverse: true,\n        });\n        relatedNodes.forEach((node) => {\n          node.updateChecked();\n        });\n      }\n    }\n\n    return tree.getChecked(map);\n  }\n\n  // 选中态向上游扩散\n  private spreadParentChecked(\n    checked: boolean,\n    map?: TypeIdMap,\n    opts?: TypeSettingOptions\n  ) {\n    const options: TypeSettingOptions = {\n      isAction: true,\n      directly: false,\n      ...opts,\n    };\n\n    // 碰到不可选节点，中断扩散\n    if (!this.isCheckable()) return;\n\n    const { children } = this;\n    if (Array.isArray(children) && children.length > 0) {\n      // 有子节点，则选中态由子节点选中态集合来决定\n      map.delete(this.value);\n    }\n\n    const { parent } = this;\n    if (!parent) return;\n    parent.spreadParentChecked(checked, map, options);\n  }\n\n  // 选中态向下游扩散\n  private spreadChildrenChecked(\n    checked: boolean,\n    map?: TypeIdMap,\n    opts?: TypeSettingOptions\n  ) {\n    const options: TypeSettingOptions = {\n      isAction: true,\n      directly: false,\n      ...opts,\n    };\n\n    // 碰到不可选节点，中断扩散\n    if (!this.isCheckable()) return;\n    // 对于 UI 动作操作，节点禁用，中断扩散\n    if (options.isAction && this.isDisabledState()) return;\n\n    const { children } = this;\n    if (!Array.isArray(children)) return;\n    if (children.length <= 0) return;\n    // 有子节点，则选中态由子节点选中态集合来决定\n    map.delete(this.value);\n    children.forEach((node) => {\n      // 对于 UI 动作，向下扩散时，禁用状态会阻止状态切换\n      if (options.isAction && node.isDisabledState()) return;\n      if (checked) {\n        map.set(node.value, true);\n      } else {\n        map.delete(node.value);\n      }\n      node.spreadChildrenChecked(checked, map, options);\n    });\n  }\n\n  /**\n   * 设置节点禁用状态\n   * @return void\n   */\n  public setDisabled(disabled: boolean) {\n    this.disabled = disabled;\n    this.update();\n    this.updateChildren();\n  }\n\n  /* ------ 节点状态更新 ------ */\n\n  /**\n   * 更新节点当前状态，将节点放到延时更新检查队列\n   * @return void\n   */\n  public update(): void {\n    this.level = this.getLevel();\n    this.vmIsFirst = this.isFirst();\n    this.vmIsLast = this.isLast();\n    this.vmIsLeaf = this.isLeaf();\n    this.vmCheckable = this.isCheckable();\n    this.vmIsRest = this.isRest();\n    this.actived = this.isActived();\n    this.expanded = this.isExpanded();\n    this.visible = this.isVisible();\n    this.tree.updated(this);\n  }\n\n  /**\n   * 更新节点选中态\n   * @return void\n   */\n  public updateChecked(): void {\n    const { tree, value } = this;\n    const { checkedMap } = tree;\n    this.checked = this.isChecked();\n    this.indeterminate = this.isIndeterminate();\n    if (this.checked) {\n      checkedMap.set(value, true);\n    }\n    tree.updated(this);\n  }\n\n  /**\n   * 更新所有子节点状态\n   * - 不包含自己\n   * @return void\n   */\n  public updateChildren(): void {\n    this.spreadChildren((node) => {\n      if (node === this) return;\n      node.update();\n      node.updateChecked();\n    });\n  }\n\n  /**\n   * 更新所有父级节点状态\n   * - 不包含自己\n   * @return void\n   */\n  public updateParents(): void {\n    this.spreadParents((node: TreeNode) => {\n      if (node === this) return;\n      node.update();\n      node.updateChecked();\n    });\n  }\n\n  /**\n   * 更新上下游相关节点状态\n   * - 包含自己\n   * @return void\n   */\n  public updateRelated(): void {\n    const { tree } = this;\n    const relatedNodes = tree.getRelatedNodes([this.value]);\n    relatedNodes.forEach((node) => {\n      node.update();\n      node.updateChecked();\n    });\n  }\n\n  /* ------ 节点遍历 ------ */\n\n  /**\n   * 获取包含自己在内所有的子节点\n   * - 包含自己\n   * @return TreeNode[] 遍历结果节点数组\n   */\n  public walk(): TreeNode[] {\n    const list: TreeNode[] = [];\n    this.spreadChildren((node: TreeNode) => {\n      list.push(node);\n    });\n    return list;\n  }\n\n  /**\n   * 向下遍历操作\n   * - 包含自己\n   * @return void\n   */\n  private spreadChildren(fn: TypeFnOperation) {\n    fn(this);\n    const { children } = this;\n    if (Array.isArray(children) && children.length > 0) {\n      children.forEach((node) => {\n        node?.spreadChildren(fn);\n      });\n    }\n  }\n\n  /**\n   * 向上遍历操作\n   * - 包含自己\n   * @return void\n   */\n  private spreadParents(fn: TypeFnOperation) {\n    fn(this);\n    const { parent } = this;\n    if (!parent) return;\n    parent?.spreadParents(fn);\n  }\n\n  /**\n   * 获取节点封装对象\n   * - TreeNode 对象 => TypeTreeNodeModel 对象\n   * - TypeTreeNodeModel 用于封装 treeNode 对外暴露的 api\n   * - 用户仅可操作经过封装的对象，减少了对外暴露的 api，利于代码重构\n   * @return TypeTreeNodeModel 节点封装对象\n   */\n  public getModel(): TypeTreeNodeModel {\n    let { model } = this;\n    if (!model) {\n      model = createNodeModel(this);\n      this.model = model;\n    }\n    return model;\n  }\n}\n\nexport default TreeNode;\n"],"names":["hasOwnProperty","Object","prototype","setableStatus","expandMutex","activable","checkable","draggable","loading","setableProps","keys","syncableProps","privateKey","TreeNode","tree","data","parent","_this","_classCallCheck","_defineProperty","config","prefix","propChildren","children","propLabel","label","propValue","value","propDisabled","disabled","model","level","vmCheckable","vmIsLeaf","vmIsFirst","vmIsLast","vmIsRest","vmIsLocked","visible","actived","checked","indeterminate","expanded","expandAll","uniqueId","isNil","get","nodeMap","privateMap","log","warn","concat","set","forEach","prop","initActived","initExpanded","Array","isArray","append","lazy","loadChildren","initChecked","updateChecked","update","reflow","_createClass","key","checkedMap","checkStrictly","isNumber","expandLevel","getLevel","expandedMap","isActivable","activedMap","_this2","list","push","apply","_toConsumableArray","length","item","node","appendTo","updateRelated","index","_this3","parentNode","targetIndex","targetParents","getParents","includeCurrent","some","pnode","Error","targetPosNode","siblings","prevLength","prevIndex","getIndex","remove","curLength","splice","nodes","walk","updateNodes","map","flat","insert","getSiblings","sibling","insertBefore","newData","insertAfter","clean","updateParents","filterMap","_loadChildren","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","isFunction","load","sent","emit","stop","arguments","_this4","call","setDisabled","updated","getParent","parents","getChildren","deep","childrenModel","shift","getModel","isBoolean","getRoot","indexOf","getPath","unshift","reverse","isRest","_this$tree","hasFilter","rest","nodeModel","filter","isVisible","_this$tree2","allowFoldNodeOnFilter","expandVisible","every","isDisabledState","disableCheck","state","isDisabled","isDraggable","isExpandMutex","isCheckable","isActived","isExpanded","isChecked","childIsChecked","isIndeterminate","childChecked","isNull","isFirst","isLast","isLeaf","lock","lockState","afterExpanded","updateChildren","toggleExpanded","opts","setExpanded","options","_objectSpread","directly","Map","shouldExpandNodes","expandParent","_tree$config","snode","getExpanded","toggleActived","setActived","isAction","getActived","prevKeys","from","activeMultiple","clear","getNode","hasEnableUnCheckedChild","child","toggleChecked","expectState","setChecked","getChecked","shouldSet","spreadChildrenChecked","spreadParentChecked","relatedNodes","getRelatedNodes","_this5","spreadChildren","_this6","spreadParents","fn","createNodeModel"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,IAAQA,cAAe,GAAIC,MAAO,CAAAC,SAAA,CAA1BF,cAAe,CAAA;AAIhB,IAAMG,aAAgD,GAAA;AAC3DC,EAAAA,WAAa,EAAA,IAAA;AACbC,EAAAA,SAAW,EAAA,IAAA;AACXC,EAAAA,SAAW,EAAA,IAAA;AACXC,EAAAA,SAAW,EAAA,IAAA;AACXC,EAAAA,OAAS,EAAA,KAAA;AACX,EAAA;AAEa,IAAAC,YAAA,GAAeR,MAAO,CAAAS,IAAA,CAAKP,aAAa,EAAA;AAExCQ,IAAAA,0BAAoBF,YAAc,EAAA,CAAA,SAAA,EAAW,YAAY,SAAS,CAAA,EAAA;AAExE,IAAMG,UAAa,GAAA,iBAAA;AAcnB,IAAMC,QAAS,gBAAA,YAAA;AA+Eb,EAAA,SAAAA,SACLC,IACA,EAAAC,IAAA,EACAC,MACA,EAAA;AAAA,IAAA,IAAAC,KAAA,GAAA,IAAA,CAAA;AAAAC,IAAAA,eAAA,OAAAL,QAAA,CAAA,CAAA;IAAAM,eAAA,CAAA,IAAA,EAAA,MAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAAAA,IAAAA,eAAA,OA9EMP,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAO,eAAA,CAAA,IAAA,EAAA,OAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,OAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,MAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,QAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,OAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,YAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,aAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,SAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,aAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,SAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,eAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,SAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,OAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,SAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IA+EN,IAAA,CAAKJ,IAAO,GAAAA,IAAA,CAAA;IACZ,IAAA,CAAKD,IAAO,GAAAA,IAAA,CAAA;AAEN,IAAA,IAAAM,MAAA,GAASN,IAAK,CAAAM,MAAA,IAAU,EAAC,CAAA;AACzB,IAAA,IAAAC,MAAA,GAASD,OAAOC,MAAU,IAAA,GAAA,CAAA;AAC1B,IAAA,IAAAX,IAAA,GAAOU,MAAO,CAAAV,IAAA,IAAQ,EAAC,CAAA;AACvB,IAAA,IAAAY,YAAA,GAAeZ,KAAKa,QAAY,IAAA,UAAA,CAAA;AAChC,IAAA,IAAAC,SAAA,GAAYd,KAAKe,KAAS,IAAA,OAAA,CAAA;AAC1B,IAAA,IAAAC,SAAA,GAAYhB,KAAKiB,KAAS,IAAA,OAAA,CAAA;AAC1B,IAAA,IAAAC,YAAA,GAAelB,KAAKmB,QAAY,IAAA,UAAA,CAAA;IAGtC,IAAA,CAAKC,KAAQ,GAAA,IAAA,CAAA;IACb,IAAA,CAAKP,QAAW,GAAA,IAAA,CAAA;IAChB,IAAA,CAAKQ,KAAQ,GAAA,CAAA,CAAA;IAGb,IAAA,CAAKC,WAAc,GAAA,KAAA,CAAA;IACnB,IAAA,CAAKC,QAAW,GAAA,KAAA,CAAA;IAChB,IAAA,CAAKC,SAAY,GAAA,KAAA,CAAA;IACjB,IAAA,CAAKC,QAAW,GAAA,KAAA,CAAA;IAChB,IAAA,CAAKC,QAAW,GAAA,KAAA,CAAA;IAChB,IAAA,CAAKC,UAAa,GAAA,KAAA,CAAA;IAGlB,IAAA,CAAKC,OAAU,GAAA,KAAA,CAAA;IACf,IAAA,CAAKC,OAAU,GAAA,KAAA,CAAA;IACf,IAAA,CAAKC,OAAU,GAAA,KAAA,CAAA;IACf,IAAA,CAAKC,aAAgB,GAAA,KAAA,CAAA;IACrB,IAAA,CAAKjC,OAAU,GAAA,KAAA,CAAA;AACf,IAAA,IAAA,CAAKkC,WAAWtB,MAAO,CAAAuB,SAAA,CAAA;IAMvB,IAAA,CAAKtC,SAAY,GAAA,IAAA,CAAA;IACjB,IAAA,CAAKC,SAAY,GAAA,IAAA,CAAA;IACjB,IAAA,CAAKF,WAAc,GAAA,IAAA,CAAA;IACnB,IAAA,CAAKG,SAAY,GAAA,IAAA,CAAA;AAKZ,IAAA,IAAA,CAAAK,UAAA,CAAA,GAAcgC,SAASvB,MAAM,CAAA,CAAA;IAI7B,IAAA,CAAAM,KAAA,GAAQkB,KAAM,CAAAC,GAAA,CAAI/B,IAAM,EAAAW,SAAS,CAAC,CAAA,GACnC,IAAK,CAAAd,UAAA,CAAA,GACLkC,GAAI,CAAA/B,IAAA,EAAMW,SAAS,CAAA,CAAA;AACjB,IAAA,IAAEqB,OAAS,GAAejC,IAAA,CAAxBiC,OAAS;MAAAC,UAAA,GAAelC,IAAA,CAAfkC,UAAA,CAAA;IACjB,IAAID,OAAQ,CAAAD,GAAA,CAAI,IAAK,CAAAnB,KAAK,CAAG,EAAA;MAC3BsB,GAAA,CAAIC,IAAK,CAAA,MAAA,EAAA,oBAAA,CAAAC,MAAA,CAA6B,IAAA,CAAKxB,KAAO,CAAA,CAAA,CAAA;AACpD,KAAA;IACQoB,OAAA,CAAAK,GAAA,CAAI,IAAK,CAAAzB,KAAA,EAAO,IAAI,CAAA,CAAA;IACjBqB,UAAA,CAAAI,GAAA,CAAI,IAAK,CAAAxC,UAAA,CAAA,EAAa,IAAI,CAAA,CAAA;IAGrC,IAAA,CAAKa,KAAQ,GAAAqB,GAAA,CAAI/B,IAAM,EAAAS,SAAS,CAAK,IAAA,EAAA,CAAA;IAErC,IAAA,CAAKK,QAAW,GAAAiB,GAAA,CAAI/B,IAAM,EAAAa,YAAY,CAAK,IAAA,KAAA,CAAA;AAG3C,IAAA,IAAML,WAAWR,IAAK,CAAAO,YAAA,CAAA,CAAA;IAGtB,IAAIC,aAAa,IAAM,EAAA;MACrB,IAAA,CAAKA,QAAW,GAAAA,QAAA,CAAA;AAClB,KAAA;AAGI,IAAA,IAAAP,MAAA,IAAUA,kBAAkBH,QAAU,EAAA;MACxC,IAAA,CAAKG,MAAS,GAAAA,MAAA,CAAA;AAChB,KAAO,MAAA;MACL,IAAA,CAAKA,MAAS,GAAA,IAAA,CAAA;AAChB,KAAA;AAIcL,IAAAA,aAAA,CAAA0C,OAAA,CAAQ,UAACC,IAAS,EAAA;AAC1B,MAAA,IAAA,OAAOvC,IAAK,CAAAuC,IAAA,CAAA,KAAU,WAAa,EAAA;AACrCrC,QAAAA,KAAA,CAAKqC,QAAQvC,IAAK,CAAAuC,IAAA,CAAA,CAAA;AACpB,OAAA;AACF,KAAC,CAAA,CAAA;IAGD,IAAA,CAAKC,WAAY,EAAA,CAAA;IAEjB,IAAA,CAAKC,YAAa,EAAA,CAAA;AAId,IAAA,IAAAC,KAAA,CAAMC,OAAQ,CAAAnC,QAAQ,CAAG,EAAA;AAC3B,MAAA,IAAA,CAAKoC,OAAOpC,QAAQ,CAAA,CAAA;KACX,MAAA,IAAAA,QAAA,KAAa,IAAQ,IAAA,CAACH,OAAOwC,IAAM,EAAA;MAC5C,IAAA,CAAKC,YAAa,EAAA,CAAA;AACpB,KAAA;IAIA,IAAA,CAAKC,WAAY,EAAA,CAAA;IACjB,IAAA,CAAKC,aAAc,EAAA,CAAA;IAGnB,IAAA,CAAKC,MAAO,EAAA,CAAA;AAEZlD,IAAAA,IAAA,CAAKmD,OAAO,IAAI,CAAA,CAAA;AAClB,GAAA;EAAA,OAAAC,YAAA,CAAArD,QAAA,EAAA,CAAA;IAAAsD,GAAA,EAAA,aAAA;IAAAxC,KAAA,EAQQ,SAAAmC,WAAAA,GAAoB;AAC1B,MAAA,IAAQhD,IAAA,GAAwB,IAAA,CAAxBA,IAAA;QAAMa,KAAO,GAAW,IAAA,CAAlBA,KAAO;QAAAX,MAAA,GAAW,IAAA,CAAXA,MAAA,CAAA;AACf,MAAA,IAAEoD,aAAetD,IAAA,CAAfsD;AACF,MAAA,IAAEC,aAAc,GAAIvD,IAAK,CAAAM,MAAA,CAAvBiD,aAAc,CAAA;MACtB,IAAI,KAAK7B,OAAS,EAAA;AACL4B,QAAAA,UAAA,CAAAhB,GAAA,CAAIzB,OAAO,IAAI,CAAA,CAAA;AAC5B,OAAA;MAII,IAAA,CAAC0C,aAAiB,IAAArD,MAAA,KAAA,IAAA,IAAAA,MAAA,KAAAA,KAAAA,CAAAA,IAAAA,MAAA,CAAQwB,OAAS,EAAA;AAC1B4B,QAAAA,UAAA,CAAAhB,GAAA,CAAIzB,OAAO,IAAI,CAAA,CAAA;AAC5B,OAAA;AACF,KAAA;AAAA,GAAA,EAAA;IAAAwC,GAAA,EAAA,cAAA;IAAAxC,KAAA,EAMQ,SAAA6B,YAAAA,GAAqB;AACrB,MAAA,IAAE1C,OAAS,IAAA,CAATA;AACJ,MAAA,IAAE4B,WAAa,IAAA,CAAbA;AACA,MAAA,IAAEtB,SAAWN,IAAA,CAAXM;AACJ,MAAA,IAAAkD,QAAA,CAASlD,OAAOmD,WAAW,CAAA,IAAK,KAAKC,QAAS,EAAA,GAAIpD,OAAOmD,WAAa,EAAA;QACxEzD,IAAA,CAAK2D,WAAY,CAAArB,GAAA,CAAI,IAAK,CAAAzB,KAAA,EAAO,IAAI,CAAA,CAAA;AAC1Be,QAAAA,QAAA,GAAA,IAAA,CAAA;AACb,OAAA;MACA,IAAI,IAAK,CAAAnB,QAAA,KAAa,IAAQ,IAAAH,MAAA,CAAOwC,IAAM,EAAA;AAC9BlB,QAAAA,QAAA,GAAA,KAAA,CAAA;AACb,OAAA;AACA,MAAA,IAAIA,QAAU,EAAA;QACZ5B,IAAA,CAAK2D,WAAY,CAAArB,GAAA,CAAI,IAAK,CAAAzB,KAAA,EAAO,IAAI,CAAA,CAAA;AACvC,OAAO,MAAA;AACAb,QAAAA,IAAA,CAAA2D,WAAA,CAAA,QAAA,CAAmB,CAAA,IAAA,CAAK9C,KAAK,CAAA,CAAA;AACpC,OAAA;MACA,IAAA,CAAKe,QAAW,GAAAA,QAAA,CAAA;AAClB,KAAA;AAAA,GAAA,EAAA;IAAAyB,GAAA,EAAA,aAAA;IAAAxC,KAAA,EAMQ,SAAA4B,WAAAA,GAAoB;AACpB,MAAA,IAAEzC,IAAM,GAAY,IAAA,CAAlBA,IAAM;QAAAyB,OAAA,GAAY,IAAA,CAAZA,OAAA,CAAA;AACV,MAAA,IAAAA,OAAA,IAAW,IAAK,CAAAmC,WAAA,EAAe,EAAA;QACjC5D,IAAA,CAAK6D,UAAW,CAAAvB,GAAA,CAAI,IAAK,CAAAzB,KAAA,EAAO,IAAI,CAAA,CAAA;AACtC,OAAA;AACF,KAAA;AAAA,GAAA,EAAA;IAAAwC,GAAA,EAAA,QAAA;AAAAxC,IAAAA,KAAA,EASO,SAAAgC,MAAO5C,CAAAA,IAAmD,EAAA;AAAA,MAAA,IAAA6D,MAAA,GAAA,IAAA,CAAA;MAC/D,IAAMC,OAAO,EAAC,CAAA;AACd,MAAA,IAAI,CAACpB,KAAA,CAAMC,OAAQ,CAAA3C,IAAI,CAAG,EAAA;AACxB8D,QAAAA,IAAA,CAAKC,KAAK/D,IAAI,CAAA,CAAA;AAChB,OAAO,MAAA;QACA8D,IAAA,CAAAC,IAAA,CAAAC,KAAA,CAAAF,IAAA,EAAAG,kBAAA,CAAQjE,IAAI,CAAA,CAAA,CAAA;AACnB,OAAA;AACI,MAAA,IAAA8D,IAAA,CAAKI,UAAU,CAAG,EAAA;AACpB,QAAA,OAAA;AACF,OAAA;MACA,IAAI,CAACxB,KAAA,CAAMC,OAAQ,CAAA,IAAA,CAAKnC,QAAQ,CAAG,EAAA;QACjC,IAAA,CAAKA,WAAW,EAAC,CAAA;AACnB,OAAA;AACM,MAAA,IAAEA,QAAU,GAAS,IAAA,CAAnBA,QAAU;QAAAT,IAAA,GAAS,IAAA,CAATA,IAAA,CAAA;AACb+D,MAAAA,IAAA,CAAAxB,OAAA,CAAQ,UAAC6B,IAAS,EAAA;QACrB,IAAIC,IAAO,GAAA,IAAA,CAAA;QACX,IAAID,gBAAgBrE,QAAU,EAAA;AACrBsE,UAAAA,IAAA,GAAAD,IAAA,CAAA;UACFC,IAAA,CAAAC,QAAA,CAASR,MAAK,CAAA9D,IAAA,EAAM8D,MAAI,CAAA,CAAA;AAC/B,SAAO,MAAA;UACLO,IAAA,GAAO,IAAItE,QAAA,CAAS+D,MAAK,CAAA9D,IAAA,EAAMoE,MAAMN,MAAI,CAAA,CAAA;AACzCrD,UAAAA,QAAA,CAASuD,KAAKK,IAAI,CAAA,CAAA;AACpB,SAAA;AACF,OAAC,CAAA,CAAA;AACDrE,MAAAA,IAAA,CAAKmD,OAAO,IAAI,CAAA,CAAA;MAChB,IAAA,CAAKoB,aAAc,EAAA,CAAA;AACrB,KAAA;AAAA,GAAA,EAAA;IAAAlB,GAAA,EAAA,UAAA;IAAAxC,KAAA,EASO,SAAAyD,QAAStE,CAAAA,IAAiB,EAAAE,MAAA,EAAmBsE,KAAsB,EAAA;AAAA,MAAA,IAAAC,MAAA,GAAA,IAAA,CAAA;MACxE,IAAMC,UAAa,GAAAxE,MAAA,CAAA;MACnB,IAAIyE,WAAc,GAAA,CAAA,CAAA,CAAA;AACd,MAAA,IAAAnB,QAAA,CAASgB,KAAK,CAAG,EAAA;AACLG,QAAAA,WAAA,GAAAH,KAAA,CAAA;AAChB,OAAA;AAEA,MAAA,IAAMI,aAAgB,GAAA,CAAAF,UAAA,KAAAA,IAAAA,IAAAA,UAAA,KAAAA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,UAAA,CAAYG,UAAW,EAAA,KAAK,EAAC,CAAA;AACnD,MAAA,IAAMC,iBAAiBF,aAAc,CAAAG,IAAA,CAAK,UAACC,KAAA,EAAA;QAAA,OAAUA,UAAUP,MAAI,CAAA;OAAA,CAAA,CAAA;AACnE,MAAA,IAAIK,cAAgB,EAAA;AACZ,QAAA,MAAA,IAAIG,MAAM,0EAAc,CAAA,CAAA;AAChC,OAAA;MAEA,IAAIP,eAAe,IAAM,EAAA;AACjB,QAAA,MAAA,IAAIO,MAAM,oEAAa,CAAA,CAAA;AAC/B,OAAA;AAEA,MAAA,IAAItC,KAAM,CAAAC,OAAA,CAAQ8B,UAAY,KAAA,IAAA,IAAZA,UAAY,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAZA,UAAY,CAAAjE,QAAQ,CAAG,EAAA;QACjC,IAAAyE,aAAA,GAAgBR,eAAAA,IAAAA,IAAAA,eAAAA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,WAAYjE,QAAS,CAAAkE,WAAA,CAAA,CAAA;AACvC,QAAA,IAAAO,aAAA,IAAiBA,kBAAkB,IAAM,EAAA;AAE3C,UAAA,OAAA;AACF,SAAA;AACF,OAAA;MAIA,IAAIC,QAAW,GAAA,IAAA,CAAA;MACf,IAAIT,sBAAsB3E,QAAU,EAAA;AAClC,QAAA,IAAI,CAAC4C,KAAA,CAAMC,OAAQ,CAAA8B,UAAA,KAAAA,IAAAA,IAAAA,UAAA,KAAAA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,UAAA,CAAYjE,QAAQ,CAAG,EAAA;UACxCiE,UAAA,CAAWjE,WAAW,EAAC,CAAA;AACzB,SAAA;QACA0E,QAAA,GAAWjF,MAAO,CAAAO,QAAA,CAAA;AACpB,OAAO,MAAA;QACL0E,QAAA,GAAWnF,IAAK,CAAAS,QAAA,CAAA;AAClB,OAAA;AAIA,MAAA,IAAI,CAACkC,KAAA,CAAMC,OAAQ,CAAAuC,QAAQ,CAAG,EAAA;AACtB,QAAA,MAAA,IAAIF,MAAM,gIAAuB,CAAA,CAAA;AACzC,OAAA;AAEA,MAAA,IAAMG,aAAaD,QAAS,CAAAhB,MAAA,CAAA;AACtB,MAAA,IAAAkB,SAAA,GAAY,KAAKC,QAAS,EAAA,CAAA;MAEhC,IAAA,CAAKC,MAAO,EAAA,CAAA;AAER,MAAA,IAAA/B,QAAA,CAASgB,KAAK,CAAG,EAAA;QACnB,IAAIG,YAAc,GAAAH,KAAA,CAAA;AACd,QAAA,IAAAE,UAAA,KAAe,KAAKxE,MAAQ,EAAA;AAI9B,UAAA,IAAMsF,YAAYL,QAAS,CAAAhB,MAAA,CAAA;AACvB,UAAA,IAAAqB,SAAA,GAAYJ,UAAc,IAAAC,SAAA,IAAaV,YAAa,EAAA;AACtDA,YAAAA,YAAe,IAAA,CAAA,CAAA;AACjB,WAAA;AACF,SAAA;QACSQ,QAAA,CAAAM,MAAA,CAAOd,YAAa,EAAA,CAAA,EAAG,IAAI,CAAA,CAAA;AACtC,OAAO,MAAA;AACLQ,QAAAA,QAAA,CAASnB,KAAK,IAAI,CAAA,CAAA;AACpB,OAAA;MAEA,IAAA,CAAK9D,MAAS,GAAAwE,UAAA,CAAA;AAIR,MAAA,IAAAgB,KAAA,GAAQ,KAAKC,IAAK,EAAA,CAAA;AAClBD,MAAAA,KAAA,CAAAnD,OAAA,CAAQ,UAAC6B,IAAS,EAAA;QACtB,IAAMC,IAAO,GAAAD,IAAA,CAAA;QACbC,IAAA,CAAKrE,IAAO,GAAAA,IAAA,CAAA;QACZA,IAAA,CAAKiC,OAAQ,CAAAK,GAAA,CAAI+B,IAAK,CAAAxD,KAAA,EAAOwD,IAAI,CAAA,CAAA;QACjCrE,IAAA,CAAKkC,UAAW,CAAAI,GAAA,CAAI+B,IAAK,CAAAvE,UAAA,CAAA,EAAauE,IAAI,CAAA,CAAA;QAC1C,IAAIA,KAAKzC,QAAU,EAAA;UACjB5B,IAAA,CAAK2D,WAAY,CAAArB,GAAA,CAAI+B,IAAK,CAAAxD,KAAA,EAAO,IAAI,CAAA,CAAA;AACvC,SAAA;AACF,OAAC,CAAA,CAAA;MAED,IAAM+E,WAAc,GAAA,CAAAlB,UAAA,aAAAA,UAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,UAAA,CAAYiB,IAAK,EAAA,KAAK3F,IAAK,CAAAS,QAAA,CAASoF,GAAI,CAAA,UAACzB,IAAS,EAAA;AAAA,QAAA,OAAAA,IAAA,CAAKuB,IAAK,EAAC,CAAA;SAAEG,IAAK,EAAA,CAAA;AAC5EF,MAAAA,WAAA,CAAArD,OAAA,CAAQ,UAAC8B,IAAS,EAAA;QAC5BA,IAAA,CAAKnB,MAAO,EAAA,CAAA;QACZmB,IAAA,CAAKpB,aAAc,EAAA,CAAA;AACrB,OAAC,CAAA,CAAA;MAEDjD,IAAA,CAAKmD,MAAO,EAAA,CAAA;AACd,KAAA;AAAA,GAAA,EAAA;IAAAE,GAAA,EAAA,QAAA;AAAAxC,IAAAA,KAAA,EAQQ,SAAAkF,MAAAA,CAAO3B,MAAoBI,KAAsB,EAAA;AACjD,MAAA,IAAExE,IAAM,GAAW,IAAA,CAAjBA,IAAM;QAAAE,MAAA,GAAW,IAAA,CAAXA,MAAA,CAAA;AACR,MAAA,IAAAiF,QAAA,GAAW,KAAKa,WAAY,EAAA,CAAA;MAClC,IAAI3B,IAAO,GAAA,IAAA,CAAA;MACX,IAAID,gBAAgBrE,QAAU,EAAA;AACrBsE,QAAAA,IAAA,GAAAD,IAAA,CAAA;QACFC,IAAA,CAAAC,QAAA,CAAStE,IAAM,EAAAE,MAAA,EAAQsE,KAAK,CAAA,CAAA;iBACxBJ,IAAM,EAAA;QACfC,IAAA,GAAO,IAAItE,QAAA,CAASC,IAAM,EAAAoE,IAAA,EAAMlE,MAAM,CAAA,CAAA;AAClC,QAAA,IAAAsD,QAAA,CAASgB,KAAK,CAAG,EAAA;UACVW,QAAA,CAAAM,MAAA,CAAOjB,KAAO,EAAA,CAAA,EAAGH,IAAI,CAAA,CAAA;AAChC,SAAA;AACSc,QAAAA,QAAA,CAAA5C,OAAA,CAAQ,UAAC0D,OAAY,EAAA;UAC5BA,OAAA,CAAQ/C,MAAO,EAAA,CAAA;AACjB,SAAC,CAAA,CAAA;AACH,OAAA;MACAlD,IAAA,CAAKmD,MAAO,EAAA,CAAA;AACd,KAAA;AAAA,GAAA,EAAA;IAAAE,GAAA,EAAA,cAAA;AAAAxC,IAAAA,KAAA,EAOO,SAAAqF,YAAaC,CAAAA,OAA6B,EAAA;AACzC,MAAA,IAAA3B,KAAA,GAAQ,KAAKc,QAAS,EAAA,CAAA;AACvB,MAAA,IAAA,CAAAS,MAAA,CAAOI,SAAS3B,KAAK,CAAA,CAAA;AAC5B,KAAA;AAAA,GAAA,EAAA;IAAAnB,GAAA,EAAA,aAAA;AAAAxC,IAAAA,KAAA,EAOO,SAAAuF,WAAYD,CAAAA,OAA6B,EAAA;AACxC,MAAA,IAAA3B,KAAA,GAAQ,KAAKc,QAAS,EAAA,CAAA;MACvB,IAAA,CAAAS,MAAA,CAAOI,OAAS,EAAA3B,KAAA,GAAQ,CAAC,CAAA,CAAA;AAChC,KAAA;AAAA,GAAA,EAAA;IAAAnB,GAAA,EAAA,QAAA;IAAAxC,KAAA,EAMO,SAAA0E,MAAAA,GAAe;AACd,MAAA,IAAEvF,OAAS,IAAA,CAATA;AAEF,MAAA,IAAA0F,KAAA,GAAQ,KAAKC,IAAK,EAAA,CAAA;AAClB,MAAA,IAAAR,QAAA,GAAW,KAAKa,WAAY,EAAA,CAAA;AAC5B,MAAA,IAAAxB,KAAA,GAAQ,KAAKc,QAAS,EAAA,CAAA;AAGxB,MAAA,IAAA3C,KAAA,CAAMC,OAAQ,CAAAuC,QAAQ,CAAG,EAAA;AAClBA,QAAAA,QAAA,CAAAM,MAAA,CAAOjB,OAAO,CAAC,CAAA,CAAA;AAC1B,OAAA;AAEMkB,MAAAA,KAAA,CAAAnD,OAAA,CAAQ,UAAC8B,IAAS,EAAA;QACtBA,IAAA,CAAKgC,KAAM,EAAA,CAAA;AACb,OAAC,CAAA,CAAA;AAEQlB,MAAAA,QAAA,CAAA5C,OAAA,CAAQ,UAAC8B,IAAS,EAAA;QACzBA,IAAA,CAAKnB,MAAO,EAAA,CAAA;AACd,OAAC,CAAA,CAAA;MAED,IAAA,CAAKoD,aAAc,EAAA,CAAA;MACnBtG,IAAA,CAAKmD,MAAO,EAAA,CAAA;AACd,KAAA;AAAA,GAAA,EAAA;IAAAE,GAAA,EAAA,OAAA;IAAAxC,KAAA,EAMQ,SAAAwF,KAAAA,GAAc;AACd,MAAA,IAAErG,IAAM,GAAU,IAAA,CAAhBA,IAAM;QAAAa,KAAA,GAAU,IAAA,CAAVA,KAAA,CAAA;AACTb,MAAAA,IAAA,CAAA6D,UAAA,WAAkBhD,KAAK,CAAA,CAAA;AACvBb,MAAAA,IAAA,CAAAsD,UAAA,WAAkBzC,KAAK,CAAA,CAAA;AACvBb,MAAAA,IAAA,CAAA2D,WAAA,WAAmB9C,KAAK,CAAA,CAAA;AACxBb,MAAAA,IAAA,CAAAiC,OAAA,WAAepB,KAAK,CAAA,CAAA;AACpBb,MAAAA,IAAA,CAAAuG,SAAA,WAAiB1F,KAAK,CAAA,CAAA;MACtBb,IAAA,CAAAkC,UAAA,CAAkB,QAAA,CAAA,CAAA,IAAA,CAAKpC,UAAW,CAAA,CAAA,CAAA;AACzC,KAAA;AAAA,GAAA,EAAA;IAAAuD,GAAA,EAAA,cAAA;IAAAxC,KAAA,EAAA,YAAA;MAAA,IAAA2F,aAAA,GAAAC,iBAAA,eAAAC,mBAAA,CAAAC,IAAA,CAMA,SAAAC,OAAA,GAAA;QAAA,IAAAtG,MAAA,EAAAyD,IAAA,CAAA;AAAA,QAAA,OAAA2C,mBAAA,CAAAG,IAAA,CAAA,SAAAC,SAAAC,QAAA,EAAA;AAAA,UAAA,OAAA,CAAA,EAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;AAAA,YAAA,KAAA,CAAA;cACQ3G,MAA+B,GAAA0B,GAAA,CAAI,IAAM,EAAA,aAAa,KAAK,EAAC,CAAA;cAAA,IAC9D,EAAA,IAAK,CAAAvB,QAAA,KAAa,IAAQ,IAAA,CAAC,KAAKf,OAAS,CAAA,EAAA;AAAAqH,gBAAAA,QAAA,CAAAE,IAAA,GAAA,EAAA,CAAA;AAAA,gBAAA,MAAA;AAAA,eAAA;AAAA,cAAA,IAAA,CACvCC,UAAA,CAAW5G,MAAO,CAAA6G,IAAI,CAAG,EAAA;AAAAJ,gBAAAA,QAAA,CAAAE,IAAA,GAAA,EAAA,CAAA;AAAA,gBAAA,MAAA;AAAA,eAAA;cAC3B,IAAA,CAAKvH,OAAU,GAAA,IAAA,CAAA;cACf,IAAA,CAAKwD,MAAO,EAAA,CAAA;AACRa,cAAAA,OAAO,EAAC,CAAA;AAAAgD,cAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA,CAAA;AAAA,cAAA,OACC3G,MAAO,CAAA6G,IAAA,CAAK,IAAI,CAAA,CAAA;AAAA,YAAA,KAAA,CAAA;cAAtBpD,IAAA,GAAAgD,QAAA,CAAAK,IAAA,CAAA;AACF,cAAA,IAAA,CAAApH,IAAA,CAAKqH,KAAK,MAAQ,EAAA;AACrBhD,gBAAAA,IAAM,EAAA,IAAA;AACNpE,gBAAAA,IAAM,EAAA8D,IAAAA;AACR,eAAC,CAAA,CAAA;cACD,IAAA,CAAKrE,OAAU,GAAA,KAAA,CAAA;AACf,cAAA,IAAIiD,MAAMC,OAAQ,CAAAmB,IAAI,CAAK,IAAAA,IAAA,CAAKI,SAAS,CAAG,EAAA;AAC1C,gBAAA,IAAA,CAAKtB,OAAOkB,IAAI,CAAA,CAAA;AAClB,eAAO,MAAA;gBACL,IAAA,CAAKtD,QAAW,GAAA,KAAA,CAAA;AAClB,eAAA;cACA,IAAA,CAAKyC,MAAO,EAAA,CAAA;AAAA,YAAA,KAAA,EAAA,CAAA;AAAA,YAAA,KAAA,KAAA;cAAA,OAAA6D,QAAA,CAAAO,IAAA,EAAA,CAAA;AAAA,WAAA;AAAA,SAAA,EAAAV,OAAA,EAAA,IAAA,CAAA,CAAA;OAGlB,CAAA,CAAA,CAAA;AAAA,MAAA,SAAA7D,YAAA,GAAA;AAAA,QAAA,OAAAyD,aAAA,CAAAvC,KAAA,CAAA,IAAA,EAAAsD,SAAA,CAAA,CAAA;AAAA,OAAA;AAAA,MAAA,OAAAxE,YAAA,CAAA;AAAA,KAAA,EAAA;AAAA,GAAA,EAAA;IAAAM,GAAA,EAAA,KAAA;AAAAxC,IAAAA,KAAA,EASO,SAAAyB,GAAI8B,CAAAA,IAA2B,EAAA;AAAA,MAAA,IAAAoD,MAAA,GAAA,IAAA,CAAA;AAC9B,MAAA,IAAExH,OAAS,IAAA,CAATA;AACF,MAAA,IAAAJ,IAAA,GAAOT,MAAO,CAAAS,IAAA,CAAKwE,IAAI,CAAA,CAAA;AACxBxE,MAAAA,IAAA,CAAA2C,OAAA,CAAQ,UAACc,GAAQ,EAAA;AAEpB,QAAA,IAAInE,eAAeuI,IAAK,CAAApI,aAAA,EAAegE,GAAG,CAAA,IAAKA,QAAQ,OAAS,EAAA;AAC9DmE,UAAAA,MAAA,CAAKnE,OAAOe,IAAK,CAAAf,GAAA,CAAA,CAAA;AACnB,SAAA;QACA,IAAIA,QAAQ,UAAY,EAAA;AACjBmE,UAAAA,MAAA,CAAAE,WAAA,CAAYtD,KAAKf,GAAI,CAAA,CAAA,CAAA;AAC5B,SAAA;AACF,OAAC,CAAA,CAAA;AACDrD,MAAAA,IAAA,CAAK2H,QAAQ,IAAI,CAAA,CAAA;AACnB,KAAA;AAAA,GAAA,EAAA;IAAAtE,GAAA,EAAA,WAAA;IAAAxC,KAAA,EAQO,SAAA+G,SAAAA,GAAsB;MAC3B,OAAO,IAAK,CAAA1H,MAAA,CAAA;AACd,KAAA;AAAA,GAAA,EAAA;IAAAmD,GAAA,EAAA,YAAA;IAAAxC,KAAA,EAOO,SAAAgE,UAAAA,GAAyB;MAC9B,IAAMgD,UAAU,EAAC,CAAA;AACjB,MAAA,IAAIxD,OAAO,IAAK,CAAAnE,MAAA,CAAA;AAChB,MAAA,OAAOmE,IAAM,EAAA;AACXwD,QAAAA,OAAA,CAAQ7D,KAAKK,IAAI,CAAA,CAAA;QACjBA,IAAA,GAAOA,IAAK,CAAAnE,MAAA,CAAA;AACd,OAAA;AACO,MAAA,OAAA2H,OAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAAxE,GAAA,EAAA,aAAA;IAAAxC,KAAA,EAMO,SAAAmF,WAAAA,GAA0B;AACzB,MAAA,IAAE9F,MAAQ,GAAS,IAAA,CAAjBA,MAAQ;QAAAF,IAAA,GAAS,IAAA,CAATA,IAAA,CAAA;MAChB,IAAI+D,OAAmB,EAAC,CAAA;AACxB,MAAA,IAAI7D,MAAQ,EAAA;QACV,IAAIyC,KAAM,CAAAC,OAAA,CAAQ1C,MAAO,CAAAO,QAAQ,CAAG,EAAA;UAClCsD,IAAA,GAAO7D,MAAO,CAAAO,QAAA,CAAA;AAChB,SAAA;iBACST,IAAM,EAAA;QACf+D,IAAA,GAAO/D,IAAK,CAAAS,QAAA,CAAA;AACd,OAAA;AACO,MAAA,OAAAsD,IAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAAV,GAAA,EAAA,aAAA;AAAAxC,IAAAA,KAAA,EAOO,SAAAiH,WAAYC,CAAAA,IAA+C,EAAA;MAChE,IAAIC,aAA+C,GAAA,KAAA,CAAA;AAC7C,MAAA,IAAEvH,WAAa,IAAA,CAAbA;AACJ,MAAA,IAAAkC,KAAA,CAAMC,OAAQ,CAAAnC,QAAQ,CAAG,EAAA;AACvB,QAAA,IAAAA,QAAA,CAAS0D,SAAS,CAAG,EAAA;AACvB,UAAA,IAAI4D,IAAM,EAAA;AACF,YAAA,IAAArC,KAAA,GAAQ,KAAKC,IAAK,EAAA,CAAA;YACxBD,KAAA,CAAMuC,KAAM,EAAA,CAAA;AACZD,YAAAA,aAAA,GAAgBtC,MAAMG,GAAI,CAAA,UAACzB,IAAS,EAAA;AAAA,cAAA,OAAAA,IAAA,CAAK8D,UAAU,CAAA;aAAA,CAAA,CAAA;AACrD,WAAO,MAAA;AACLF,YAAAA,aAAA,GAAgBvH,SAASoF,GAAI,CAAA,UAACzB,IAAS,EAAA;AAAA,cAAA,OAAAA,IAAA,CAAK8D,UAAU,CAAA;aAAA,CAAA,CAAA;AACxD,WAAA;AACF,SAAO,MAAA;AACWF,UAAAA,aAAA,GAAA,KAAA,CAAA;AAClB,SAAA;AACF,OAAA,MAAA,IAAWG,SAAU,CAAA1H,QAAQ,CAAG,EAAA;AACduH,QAAAA,aAAA,GAAAvH,QAAA,CAAA;AAClB,OAAA;AACO,MAAA,OAAAuH,aAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAA3E,GAAA,EAAA,SAAA;IAAAxC,KAAA,EAMO,SAAAuH,OAAAA,GAAoB;AACnB,MAAA,IAAAP,OAAA,GAAU,KAAKhD,UAAW,EAAA,CAAA;MACzB,OAAAgD,OAAA,CAAQA,OAAQ,CAAA1D,MAAA,GAAS,CAAM,CAAA,IAAA,IAAA,CAAA;AACxC,KAAA;AAAA,GAAA,EAAA;IAAAd,GAAA,EAAA,UAAA;IAAAxC,KAAA,EAOO,SAAAyE,QAAAA,GAAmB;AAClB,MAAA,IAAAvB,IAAA,GAAO,KAAKiC,WAAY,EAAA,CAAA;AACvB,MAAA,OAAAjC,IAAA,CAAKsE,QAAQ,IAAI,CAAA,CAAA;AAC1B,KAAA;AAAA,GAAA,EAAA;IAAAhF,GAAA,EAAA,SAAA;IAAAxC,KAAA,EAQO,SAAAyH,OAAAA,GAAsB;AACrB,MAAA,IAAA5C,KAAA,GAAQ,KAAKb,UAAW,EAAA,CAAA;AAC9Ba,MAAAA,KAAA,CAAM6C,QAAQ,IAAI,CAAA,CAAA;AAClB,MAAA,OAAO7C,MAAM8C,OAAQ,EAAA,CAAA;AACvB,KAAA;AAAA,GAAA,EAAA;IAAAnF,GAAA,EAAA,UAAA;IAAAxC,KAAA,EAMO,SAAA6C,QAAAA,GAAmB;AAClB,MAAA,IAAAmE,OAAA,GAAU,KAAKhD,UAAW,EAAA,CAAA;MAChC,OAAOgD,OAAQ,CAAA1D,MAAA,CAAA;AACjB,KAAA;AAAA,GAAA,EAAA;IAAAd,GAAA,EAAA,QAAA;IAAAxC,KAAA,EAQO,SAAA4H,MAAAA,GAAkB;AACvB,MAAA,IAAAC,UAAA,GAAyC,IAAK,CAAA1I,IAAA;QAAtCM,MAAA,GAAAoI,UAAA,CAAApI,MAAA;QAAQiG,SAAW,GAAAmC,UAAA,CAAXnC,SAAW;QAAAoC,SAAA,GAAAD,UAAA,CAAAC,SAAA,CAAA;MAE3B,IAAIC,IAAO,GAAA,KAAA,CAAA;AACX,MAAA,IAAID,SAAW,EAAA;AAEP,QAAA,IAAAE,SAAA,GAAY,KAAKX,QAAS,EAAA,CAAA;AACzBU,QAAAA,IAAA,GAAAtI,MAAA,CAAOwI,OAAOD,SAAS,CAAA,CAAA;AAChC,OAAA;AAEA,MAAA,IAAID,IAAM,EAAA;QACErC,SAAA,CAAAjE,GAAA,CAAI,IAAK,CAAAzB,KAAA,EAAO,IAAI,CAAA,CAAA;OACrB,MAAA,IAAA0F,SAAA,CAAUvE,GAAI,CAAA,IAAA,CAAKnB,KAAK,CAAG,EAAA;AAC1B0F,QAAAA,SAAA,CAAA,QAAA,CAAA,CAAO,KAAK1F,KAAK,CAAA,CAAA;AAC7B,OAAA;AAEO,MAAA,OAAA+H,IAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAAvF,GAAA,EAAA,WAAA;IAAAxC,KAAA,EAMO,SAAAkI,SAAAA,GAAqB;AAC1B,MAAA,IAAAC,WAAA,GAAuC,IAAK,CAAAhJ,IAAA;QAApCiC,OAAA,GAAA+G,WAAA,CAAA/G,OAAA;QAAS0G,SAAW,GAAAK,WAAA,CAAXL,SAAW;QAAArI,MAAA,GAAA0I,WAAA,CAAA1I,MAAA,CAAA;AACtB,MAAA,IAAE2I,wBAA0B3I,MAAA,CAA1B2I;MAER,IAAIzH,OAAU,GAAA,IAAA,CAAA;MAEd,IAAI,CAACS,OAAA,CAAQD,GAAI,CAAA,IAAA,CAAKnB,KAAK,CAAG,EAAA;AAErB,QAAA,OAAA,KAAA,CAAA;AACT,OAAA;AAEI,MAAA,IAAA8H,SAAA,IAAa,CAACM,qBAAuB,EAAA;AAG7BzH,QAAAA,OAAA,GAAA,IAAA,CAAKD,cAAc,IAAK,CAAAD,QAAA,CAAA;AAC3B,QAAA,OAAAE,OAAA,CAAA;AACT,OAAA;MAGA,IAAI0H,aAAgB,GAAA,IAAA,CAAA;AACd,MAAA,IAAArB,OAAA,GAAU,KAAKhD,UAAW,EAAA,CAAA;AAC5B,MAAA,IAAAgD,OAAA,CAAQ1D,SAAS,CAAG,EAAA;AACtB+E,QAAAA,aAAA,GAAgBrB,OAAQ,CAAAsB,KAAA,CAAM,UAAC9E,IAAA,EAAA;UAAA,OAAmBA,KAAKzC,QAAQ,CAAA;SAAA,CAAA,CAAA;AACjE,OAAA;AAEA,MAAA,IAAI+G,SAAW,EAAA;QACHnH,OAAA,GAAA0H,aAAA,KAAkB,IAAK,CAAA5H,QAAA,IAAY,IAAK,CAAAC,UAAA,CAAA,CAAA;AACpD,OAAO,MAAA;AACKC,QAAAA,OAAA,GAAA0H,aAAA,CAAA;AACZ,OAAA;AACO,MAAA,OAAA1H,OAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAA6B,GAAA,EAAA,iBAAA;IAAAxC,KAAA,EAMO,SAAAuI,eAAAA,GAA2B;AAC1B,MAAA,IAAEpJ,IAAM,GAAW,IAAA,CAAjBA,IAAM;QAAAE,MAAA,GAAW,IAAA,CAAXA,MAAA,CAAA;AACR,MAAA,IAAEI,SAAWN,IAAA,CAAXM;AACR,MAAA,IAAQS,QAAA,GAA0CT,MAAA,CAA1CS,QAAA;QAAUsI,YAAc,GAAkB/I,MAAA,CAAhC+I,YAAc;QAAA9F,aAAA,GAAkBjD,MAAA,CAAlBiD,aAAA,CAAA;AAChC,MAAA,IAAI+F,QAAQvI,QAAY,IAAA,KAAA,CAAA;MACxB,IAAI,KAAKA,QAAU,EAAA;AAETuI,QAAAA,KAAA,GAAA,IAAA,CAAA;AACV,OAAA;AACA,MAAA,IAAI,CAAC/F,aAAA,IAAiBrD,MAAQ,KAARA,IAAAA,IAAAA,MAAQ,KAARA,KAAAA,CAAAA,IAAAA,MAAQ,CAAAkJ,eAAA,EAAmB,EAAA;AAGvCE,QAAAA,KAAA,GAAA,IAAA,CAAA;AACV,OAAA;AACI,MAAA,IAAA,OAAOD,iBAAiB,SAAW,EAAA;AACrC,QAAA,IAAIA,YAAc,EAAA;AACRC,UAAAA,KAAA,GAAA,IAAA,CAAA;AACV,SAAA;AACF,OAAA,MAAA,IAAW,OAAOD,YAAA,KAAiB,UAAY,EAAA;QAE7C,IAAIA,YAAa,CAAA,IAAA,CAAKnB,QAAS,EAAC,CAAG,EAAA;AACzBoB,UAAAA,KAAA,GAAA,IAAA,CAAA;AACV,SAAA;AACF,OAAA;AACO,MAAA,OAAAA,KAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAAjG,GAAA,EAAA,YAAA;IAAAxC,KAAA,EAMO,SAAA0I,UAAAA,GAAsB;AACrB,MAAA,IAAEvJ,OAAS,IAAA,CAATA;AACF,MAAA,IAAE2I,SAAW,GAAW3I,IAAA,CAAtB2I,SAAW;QAAArI,MAAA,GAAWN,IAAA,CAAXM,MAAA,CAAA;AACb,MAAA,IAAE2I,wBAA0B3I,MAAA,CAA1B2I;AACR,MAAA,IAAIN,aAAa,CAACM,qBAAA,IAAyB,KAAK1H,UAAc,IAAA,CAAC,KAAKD,QAAU,EAAA;AAGrE,QAAA,OAAA,IAAA,CAAA;AACT,OAAA;AACA,MAAA,OAAO,KAAK8H,eAAgB,EAAA,CAAA;AAC9B,KAAA;AAAA,GAAA,EAAA;IAAA/F,GAAA,EAAA,aAAA;IAAAxC,KAAA,EAMO,SAAA2I,WAAAA,GAAuB;MAC5B,IAAIF,KAAQ,GAAA,CAAC,CAACtH,GAAA,CAAI,MAAM,uBAAuB,CAAA,CAAA;AAC3C,MAAA,IAAA,OAAO,IAAK,CAAAvC,SAAA,KAAc,SAAW,EAAA;QACvC6J,KAAA,GAAQ,IAAK,CAAA7J,SAAA,CAAA;AACf,OAAA;AACO,MAAA,OAAA6J,KAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAAjG,GAAA,EAAA,eAAA;IAAAxC,KAAA,EAMO,SAAA4I,aAAAA,GAAyB;MAC9B,IAAIH,KAAQ,GAAA,CAAC,CAACtH,GAAA,CAAI,MAAM,yBAAyB,CAAA,CAAA;AAC7C,MAAA,IAAA,OAAO,IAAK,CAAA1C,WAAA,KAAgB,SAAW,EAAA;QACzCgK,KAAA,GAAQ,IAAK,CAAAhK,WAAA,CAAA;AACf,OAAA;AACO,MAAA,OAAAgK,KAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAAjG,GAAA,EAAA,aAAA;IAAAxC,KAAA,EAMO,SAAA+C,WAAAA,GAAc;MACnB,IAAI0F,KAAQ,GAAA,CAAC,CAACtH,GAAA,CAAI,MAAM,uBAAuB,CAAA,CAAA;AAC3C,MAAA,IAAA,OAAO,IAAK,CAAAzC,SAAA,KAAc,SAAW,EAAA;QACvC+J,KAAA,GAAQ,IAAK,CAAA/J,SAAA,CAAA;AACf,OAAA;AACO,MAAA,OAAA+J,KAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAAjG,GAAA,EAAA,aAAA;IAAAxC,KAAA,EAMO,SAAA6I,WAAAA,GAAc;MACnB,IAAIJ,KAAQ,GAAA,CAAC,CAACtH,GAAA,CAAI,MAAM,uBAAuB,CAAA,CAAA;AAC3C,MAAA,IAAA,OAAO,IAAK,CAAAxC,SAAA,KAAc,SAAW,EAAA;QACvC8J,KAAA,GAAQ,IAAK,CAAA9J,SAAA,CAAA;AACf,OAAA;AACO,MAAA,OAAA8J,KAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAAjG,GAAA,EAAA,WAAA;AAAAxC,IAAAA,KAAA,EAOO,SAAA8I,SAAU9D,CAAAA,GAAqC,EAAA;AAC9C,MAAA,IAAE7F,IAAM,GAAU,IAAA,CAAhBA,IAAM;QAAAa,KAAA,GAAU,IAAA,CAAVA,KAAA,CAAA;AACR,MAAA,IAAAgD,UAAA,GAAagC,OAAO7F,IAAK,CAAA6D,UAAA,CAAA;AACxB,MAAA,OAAA,CAAC,EAAE7D,IAAK,CAAAiC,OAAA,CAAQD,IAAInB,KAAK,CAAA,IAAKgD,UAAW,CAAA7B,GAAA,CAAInB,KAAK,CAAA,CAAA,CAAA;AAC3D,KAAA;AAAA,GAAA,EAAA;IAAAwC,GAAA,EAAA,YAAA;AAAAxC,IAAAA,KAAA,EAOO,SAAA+I,UAAW/D,CAAAA,GAAqC,EAAA;AACrD,MAAA,IAAQ7F,IAAA,GAA4B,IAAA,CAA5BA,IAAA;QAAMa,KAAO,GAAe,IAAA,CAAtBA,KAAO;QAAAU,UAAA,GAAe,IAAA,CAAfA,UAAA,CAAA;AACf,MAAA,IAAEoH,SAAW,GAAW3I,IAAA,CAAtB2I,SAAW;QAAArI,MAAA,GAAWN,IAAA,CAAXM,MAAA,CAAA;AACb,MAAA,IAAE2I,wBAA0B3I,MAAA,CAA1B2I;MACJ,IAAAN,SAAA,IAAa,CAACM,qBAAyB,IAAA1H,UAAA,EAAmB,OAAA,IAAA,CAAA;AACxD,MAAA,IAAAoC,WAAA,GAAckC,OAAO7F,IAAK,CAAA2D,WAAA,CAAA;AACzB,MAAA,OAAA,CAAC,EAAE3D,IAAK,CAAAiC,OAAA,CAAQD,IAAInB,KAAK,CAAA,IAAK8C,WAAY,CAAA3B,GAAA,CAAInB,KAAK,CAAA,CAAA,CAAA;AAC5D,KAAA;AAAA,GAAA,EAAA;IAAAwC,GAAA,EAAA,WAAA;AAAAxC,IAAAA,KAAA,EAOO,SAAAgJ,SAAUhE,CAAAA,GAA0B,EAAA;AACzC,MAAA,IAAQpF,QAAA,GAA0B,IAAA,CAA1BA,QAAA;QAAUT,IAAM,GAAU,IAAA,CAAhBA,IAAM;QAAAa,KAAA,GAAU,IAAA,CAAVA,KAAA,CAAA;AAClB,MAAA,IAAE0C,aAAc,GAAIvD,IAAK,CAAAM,MAAA,CAAvBiD,aAAc,CAAA;MAEtB,IAAI,CAACvD,IAAA,CAAKiC,OAAQ,CAAAD,GAAA,CAAInB,KAAK,CAAA,EAAU,OAAA,KAAA,CAAA;MAEjC,IAAA,CAAC,KAAK6I,WAAY,EAAA,EAAU,OAAA,KAAA,CAAA;AAC1B,MAAA,IAAApG,UAAA,GAAauC,OAAO7F,IAAK,CAAAsD,UAAA,CAAA;MAC/B,IAAI5B,OAAU,GAAA,KAAA,CAAA;AAEV,MAAA,IAAA4B,UAAA,CAAWtB,GAAI,CAAAnB,KAAK,CAAG,EAAA;AAClB,QAAA,OAAA,IAAA,CAAA;AACT,OAAA;AAEA,MAAA,IAAI0C,aAAe,EAAA;AACjB,QAAA,OAAO,CAAC,CAACD,UAAW,CAAAtB,GAAA,CAAInB,KAAK,CAAA,CAAA;AAC/B,OAAA;AAEA,MAAA,IAAI8B,MAAMC,OAAQ,CAAAnC,QAAQ,CAAK,IAAAA,QAAA,CAAS0D,SAAS,CAAG,EAAA;AAExCzC,QAAAA,OAAA,GAAAjB,QAAA,CAAS0I,KAAM,CAAA,UAAC9E,IAAS,EAAA;AAC3B,UAAA,IAAAyF,cAAA,GAAiBzF,IAAK,CAAAwF,SAAA,CAAUvG,UAAU,CAAA,CAAA;AACzC,UAAA,OAAAwG,cAAA,CAAA;AACT,SAAC,CAAA,CAAA;AACH,OAAO,MAAA;AAGC,QAAA,IAAAjC,OAAA,GAAU,KAAKhD,UAAW,EAAA,CAAA;AACtBnD,QAAAA,OAAA,GAAAmG,OAAA,CAAQ9C,KAAK,UAACV,IAAA,EAAA;AAAA,UAAA,OAASf,WAAWtB,GAAI,CAAAqC,IAAA,CAAKxD,KAAK,CAAC,CAAA;SAAA,CAAA,CAAA;AAC7D,OAAA;AACO,MAAA,OAAAa,OAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAA2B,GAAA,EAAA,iBAAA;IAAAxC,KAAA,EAMO,SAAAkJ,eAAAA,GAA2B;AAChC,MAAA,IAAQtJ,QAAA,GAA0B,IAAA,CAA1BA,QAAA;QAAUT,IAAM,GAAU,IAAA,CAAhBA,IAAM;QAAAa,KAAA,GAAU,IAAA,CAAVA,KAAA,CAAA;AAClB,MAAA,IAAE0C,aAAc,GAAIvD,IAAK,CAAAM,MAAA,CAAvBiD,aAAc,CAAA;MAEtB,IAAI,CAACvD,IAAA,CAAKiC,OAAQ,CAAAD,GAAA,CAAInB,KAAK,CAAA,EAAU,OAAA,KAAA,CAAA;MAEjC,IAAA,CAAC,KAAK6I,WAAY,EAAA,EAAU,OAAA,KAAA,CAAA;MAE5B,IAAAnG,aAAA,EAAsB,OAAA,KAAA,CAAA;MAEtB,IAAA,CAACZ,KAAM,CAAAC,OAAA,CAAQnC,QAAQ,CAAA,EAAU,OAAA,KAAA,CAAA;MAErC,IAAIuJ,YAA+B,GAAA,IAAA,CAAA;MACnC,IAAMrI,aAAgB,GAAAlB,QAAA,CAASsE,IAAK,CAAA,UAACV,IAAmB,EAAA;AAClD,QAAA,IAAAA,IAAA,CAAK0F,iBAAmB,EAAA;AAEnB,UAAA,OAAA,IAAA,CAAA;AACT,SAAA;AACI,QAAA,IAAAE,MAAA,CAAOD,YAAY,CAAG,EAAA;AACxBA,UAAAA,YAAA,GAAe3F,KAAKwF,SAAU,EAAA,CAAA;AAChC,SAAA;AACI,QAAA,IAAAG,YAAA,KAAiB3F,IAAK,CAAAwF,SAAA,EAAa,EAAA;AAE9B,UAAA,OAAA,IAAA,CAAA;AACT,SAAA;AACO,QAAA,OAAA,KAAA,CAAA;AACT,OAAC,CAAA,CAAA;AAEM,MAAA,OAAAlI,aAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAA0B,GAAA,EAAA,SAAA;IAAAxC,KAAA,EAMO,SAAAqJ,OAAAA,GAAmB;AAClB,MAAA,IAAA/E,QAAA,GAAW,KAAKa,WAAY,EAAA,CAAA;AAClC,MAAA,OAAOb,SAAS,CAAO,CAAA,KAAA,IAAA,CAAA;AACzB,KAAA;AAAA,GAAA,EAAA;IAAA9B,GAAA,EAAA,QAAA;IAAAxC,KAAA,EAMO,SAAAsJ,MAAAA,GAAkB;AACjB,MAAA,IAAAhF,QAAA,GAAW,KAAKa,WAAY,EAAA,CAAA;MAC3B,OAAAb,QAAA,CAASA,QAAS,CAAAhB,MAAA,GAAS,CAAO,CAAA,KAAA,IAAA,CAAA;AAC3C,KAAA;AAAA,GAAA,EAAA;IAAAd,GAAA,EAAA,QAAA;IAAAxC,KAAA,EAMO,SAAAuJ,MAAAA,GAAkB;MACvB,IAAIA,MAAS,GAAA,KAAA,CAAA;MACb,IAAIzH,KAAM,CAAAC,OAAA,CAAQ,IAAK,CAAAnC,QAAQ,CAAG,EAAA;AACvB2J,QAAAA,MAAA,GAAA,IAAA,CAAK3J,SAAS0D,MAAU,IAAA,CAAA,CAAA;AACnC,OAAO,MAAA;AACLiG,QAAAA,MAAA,GAAS,CAAC,IAAK,CAAA3J,QAAA,CAAA;AACjB,OAAA;AACO,MAAA,OAAA2J,MAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAA/G,GAAA,EAAA,MAAA;AAAAxC,IAAAA,KAAA,EAUO,SAAAwJ,IAAKC,CAAAA,SAA0B,EAAA;MACpC,IAAA,CAAK/I,UAAa,GAAA+I,SAAA,CAAA;AACb,MAAA,IAAA,CAAA1I,QAAA,GAAW,KAAKgI,UAAW,EAAA,CAAA;AAC3B,MAAA,IAAA,CAAApI,OAAA,GAAU,KAAKuH,SAAU,EAAA,CAAA;AAChC,KAAA;AAAA,GAAA,EAAA;IAAA1F,GAAA,EAAA,eAAA;IAAAxC,KAAA,EAMO,SAAA0J,aAAAA,GAAsB;MAC3B,IAAA,CAAKrH,MAAO,EAAA,CAAA;MAEZ,IAAI,IAAK,CAAAtB,QAAA,IAAY,IAAK,CAAAnB,QAAA,KAAa,IAAM,EAAA;QAC3C,IAAA,CAAKsC,YAAa,EAAA,CAAA;AACpB,OAAA;MACA,IAAA,CAAKyH,cAAe,EAAA,CAAA;AACtB,KAAA;AAAA,GAAA,EAAA;IAAAnH,GAAA,EAAA,gBAAA;AAAAxC,IAAAA,KAAA,EAQO,SAAA4J,cAAeC,CAAAA,IAA4C,EAAA;AAChE,MAAA,OAAO,KAAKC,WAAY,CAAA,CAAC,IAAK,CAAAf,UAAA,IAAcc,IAAI,CAAA,CAAA;AAClD,KAAA;AAAA,GAAA,EAAA;IAAArH,GAAA,EAAA,aAAA;AAAAxC,IAAAA,KAAA,EASO,SAAA8J,WAAAA,CACL/I,UACA8I,IACiB,EAAA;AACX,MAAA,IAAE1K,OAAS,IAAA,CAATA;AACF,MAAA,IAAEM,SAAWN,IAAA,CAAXM;MACR,IAAMsK,OAAU,GAAAC,aAAA,CAAA;AACdC,QAAAA,QAAU,EAAA,KAAA;AAAA,OAAA,EACPJ,IAAA,CACL,CAAA;AAEA,MAAA,IAAI7E,MAAM7F,IAAK,CAAA2D,WAAA,CAAA;AACX,MAAA,IAAA,CAACiH,QAAQE,QAAU,EAAA;AACfjF,QAAAA,GAAA,GAAA,IAAIkF,GAAI,CAAA/K,IAAA,CAAK2D,WAAW,CAAA,CAAA;AAChC,OAAA;AAGA,MAAA,IAAI/B,QAAU,EAAA;QAEZ,IAAMoJ,oBAAoB,EAAC,CAAA;AAE3BA,QAAAA,iBAAA,CAAkBhH,KAAK,IAAI,CAAA,CAAA;QAC3B,IAAI1D,OAAO2K,YAAc,EAAA;UAEvB,IAAA,CAAKpG,UAAW,EAAA,CAAEtC,OAAQ,CAAA,UAAC8B,IAAS,EAAA;AAClC2G,YAAAA,iBAAA,CAAkBhH,KAAKK,IAAI,CAAA,CAAA;AAC7B,WAAC,CAAA,CAAA;AACH,SAAA;AACkB2G,QAAAA,iBAAA,CAAAzI,OAAA,CAAQ,UAAC8B,IAAS,EAAA;UAClC,IAAIoF,aAAgB,GAAA,KAAA,CAAA;UAEpB,IAAIpF,KAAKnE,MAAQ,EAAA;AACCuJ,YAAAA,aAAA,GAAApF,IAAA,CAAKnE,OAAOuJ,aAAc,EAAA,CAAA;AAC5C,WAAO,MAAA;AAAA,YAAA,IAAAyB,YAAA,CAAA;AACLzB,YAAAA,aAAA,GAAgBzJ,SAAAA,IAAAA,IAAAA,mCAAAA,KAAMM,MAAQ,MAAA4K,IAAAA,IAAAA,YAAA,KAAdA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,YAAA,CAAc5L,WAAA,CAAA;AAChC,WAAA;AACA,UAAA,IAAImK,aAAe,EAAA;AAEX,YAAA,IAAAtE,QAAA,GAAWd,KAAK2B,WAAY,EAAA,CAAA;AACzBb,YAAAA,QAAA,CAAA5C,OAAA,CAAQ,UAAC4I,KAAU,EAAA;AACtBtF,cAAAA,GAAA,CAAA,QAAA,CAAA,CAAOsF,MAAMtK,KAAK,CAAA,CAAA;cAEtBsK,KAAA,CAAMjI,MAAO,EAAA,CAAA;cACbiI,KAAA,CAAMX,cAAe,EAAA,CAAA;AACvB,aAAC,CAAA,CAAA;AACH,WAAA;UAEI3E,GAAA,CAAAvD,GAAA,CAAI+B,IAAK,CAAAxD,KAAA,EAAO,IAAI,CAAA,CAAA;UACxBwD,IAAA,CAAKnB,MAAO,EAAA,CAAA;UACZmB,IAAA,CAAKmG,cAAe,EAAA,CAAA;AACtB,SAAC,CAAA,CAAA;AACH,OAAO,MAAA;AACD3E,QAAAA,GAAA,CAAA,QAAA,CAAA,CAAO,KAAKhF,KAAK,CAAA,CAAA;AACvB,OAAA;MAEA,IAAI+J,QAAQE,QAAU,EAAA;QACpB,IAAA,CAAKP,aAAc,EAAA,CAAA;AACrB,OAAA;AAEO,MAAA,OAAAvK,IAAA,CAAKoL,YAAYvF,GAAG,CAAA,CAAA;AAC7B,KAAA;AAAA,GAAA,EAAA;IAAAxC,GAAA,EAAA,eAAA;AAAAxC,IAAAA,KAAA,EAQO,SAAAwK,aAAcX,CAAAA,IAA4C,EAAA;AAC/D,MAAA,OAAO,KAAKY,UAAW,CAAA,CAAC,IAAK,CAAA3B,SAAA,IAAae,IAAI,CAAA,CAAA;AAChD,KAAA;AAAA,GAAA,EAAA;IAAArH,GAAA,EAAA,YAAA;AAAAxC,IAAAA,KAAA,EASO,SAAAyK,UAAAA,CACL7J,SACAiJ,IACiB,EAAA;AACX,MAAA,IAAE1K,OAAS,IAAA,CAATA;MACR,IAAM4K,OAAU,GAAAC,aAAA,CAAA;AAGdU,QAAAA,QAAU,EAAA,IAAA;AAGVT,QAAAA,QAAU,EAAA,KAAA;AAAA,OAAA,EACPJ,IAAA,CACL,CAAA;AACM,MAAA,IAAApK,MAAA,GAASN,IAAK,CAAAM,MAAA,IAAU,EAAC,CAAA;AAC/B,MAAA,IAAIuF,MAAM7F,IAAK,CAAA6D,UAAA,CAAA;AACX,MAAA,IAAA,CAAC+G,QAAQE,QAAU,EAAA;AACfjF,QAAAA,GAAA,GAAA,IAAIkF,GAAI,CAAA/K,IAAA,CAAK6D,UAAU,CAAA,CAAA;AAC/B,OAAA;MACA,IAAI+G,OAAQ,CAAAW,QAAA,IAAY,IAAK,CAAAnC,eAAA,EAAmB,EAAA;AAEvC,QAAA,OAAApJ,IAAA,CAAKwL,WAAW3F,GAAG,CAAA,CAAA;AAC5B,OAAA;AACI,MAAA,IAAA,IAAA,CAAKjC,aAAe,EAAA;AACtB,QAAA,IAAInC,OAAS,EAAA;UACX,IAAMgK,QAAW,GAAA9I,KAAA,CAAM+I,IAAK,CAAA7F,GAAA,CAAIjG,MAAM,CAAA,CAAA;AAClC,UAAA,IAAA,CAACU,OAAOqL,cAAgB,EAAA;YAC1B9F,GAAA,CAAI+F,KAAM,EAAA,CAAA;AACZ,WAAA;AACSH,UAAAA,QAAA,CAAAlJ,OAAA,CAAQ,UAAC1B,KAAU,EAAA;AACpB,YAAA,IAAAwD,IAAA,GAAOrE,IAAK,CAAA6L,OAAA,CAAQhL,KAAK,CAAA,CAAA;AAC/BwD,YAAAA,IAAA,aAAAA,IAAA,KAAA,KAAA,CAAA,IAAAA,IAAA,CAAMnB,MAAO,EAAA,CAAA;AACf,WAAC,CAAA,CAAA;UACG2C,GAAA,CAAAvD,GAAA,CAAI,IAAK,CAAAzB,KAAA,EAAO,IAAI,CAAA,CAAA;AAC1B,SAAO,MAAA;AACDgF,UAAAA,GAAA,CAAA,QAAA,CAAA,CAAO,KAAKhF,KAAK,CAAA,CAAA;AACvB,SAAA;AACF,OAAA;MACA,IAAA,CAAKqC,MAAO,EAAA,CAAA;AACL,MAAA,OAAAlD,IAAA,CAAKwL,WAAW3F,GAAG,CAAA,CAAA;AAC5B,KAAA;AAAA,GAAA,EAAA;IAAAxC,GAAA,EAAA,yBAAA;IAAAxC,KAAA,EAMO,SAAAiL,uBAAAA,GAAmC;AAClC,MAAA,IAAErL,WAAa,IAAA,CAAbA;AACR,MAAA,IAAI,CAACkC,KAAM,CAAAC,OAAA,CAAQnC,QAAQ,CAAK,IAAAA,QAAA,CAAS0D,UAAU,CAAG,EAAA;AAE7C,QAAA,OAAA,KAAA,CAAA;AACT,OAAA;MACA,IAAImF,KAAQ,GAAA,KAAA,CAAA;AACH7I,MAAAA,QAAA,CAAAsE,IAAA,CAAK,UAACgH,KAAU,EAAA;AAEvB,QAAA,IAAIA,MAAM3C,eAAgB,EAAA,EAAU,OAAA,KAAA,CAAA;AAEpC,QAAA,IAAI2C,MAAMlC,SAAU,EAAA,EAAU,OAAA,KAAA,CAAA;AAC1B,QAAA,IAAAkC,KAAA,CAAMhC,iBAAmB,EAAA;AAEvB,UAAA,IAAAgC,KAAA,CAAMD,yBAA2B,EAAA;AAC3BxC,YAAAA,KAAA,GAAA,IAAA,CAAA;AACD,YAAA,OAAA,IAAA,CAAA;AACT,WAAA;AAEO,UAAA,OAAA,KAAA,CAAA;AACT,SAAA;AAGQA,QAAAA,KAAA,GAAA,IAAA,CAAA;AACD,QAAA,OAAA,IAAA,CAAA;AACT,OAAC,CAAA,CAAA;AACM,MAAA,OAAAA,KAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAAjG,GAAA,EAAA,eAAA;AAAAxC,IAAAA,KAAA,EAQO,SAAAmL,aAActB,CAAAA,IAA4C,EAAA;AAC3D,MAAA,IAAA,IAAA,CAAKX,iBAAmB,EAAA;AAIpB,QAAA,IAAAkC,WAAA,GAAc,KAAKH,uBAAwB,EAAA,CAAA;AAC1C,QAAA,OAAA,IAAA,CAAKI,UAAW,CAAAD,WAAA,EAAavB,IAAI,CAAA,CAAA;AAC1C,OAAA;AACA,MAAA,OAAO,KAAKwB,UAAW,CAAA,CAAC,IAAK,CAAArC,SAAA,IAAaa,IAAI,CAAA,CAAA;AAChD,KAAA;AAAA,GAAA,EAAA;IAAArH,GAAA,EAAA,YAAA;AAAAxC,IAAAA,KAAA,EAYO,SAAAqL,UAAAA,CACLxK,SACAgJ,IACiB,EAAA;AACX,MAAA,IAAE1K,OAAS,IAAA,CAATA;AACF,MAAA,IAAAM,MAAA,GAASN,IAAK,CAAAM,MAAA,IAAU,EAAC,CAAA;MAC/B,IAAMsK,OAA8B,GAAAC,aAAA,CAAA;AAGlCU,QAAAA,QAAU,EAAA,IAAA;AAGVT,QAAAA,QAAU,EAAA,KAAA;AAAA,OAAA,EACPJ,IAAA,CACL,CAAA;AACA,MAAA,IAAI7E,MAAM7F,IAAK,CAAAsD,UAAA,CAAA;AACX,MAAA,IAAA,CAACsH,QAAQE,QAAU,EAAA;AACfjF,QAAAA,GAAA,GAAA,IAAIkF,GAAI,CAAA/K,IAAA,CAAKsD,UAAU,CAAA,CAAA;AAC/B,OAAA;AACI,MAAA,IAAA,CAAC,IAAK,CAAAoG,WAAA,EAAe,EAAA;AAEhB,QAAA,OAAA1J,IAAA,CAAKmM,WAAWtG,GAAG,CAAA,CAAA;AAC5B,OAAA;MACA,IAAI+E,OAAQ,CAAAW,QAAA,IAAY,IAAK,CAAAnC,eAAA,EAAmB,EAAA;AAEvC,QAAA,OAAApJ,IAAA,CAAKmM,WAAWtG,GAAG,CAAA,CAAA;AAC5B,OAAA;AAEI,MAAA,IAAAnE,OAAA,KAAY,IAAK,CAAAmI,SAAA,EAAa,EAAA;AAChC,QAAA,IAAMuC,YAAY,IAAK,CAAArC,eAAA,EAAqB,IAAA,CAAC,KAAK+B,uBAAwB,EAAA,CAAA;QAC1E,IAAI,CAACM,SAAW,EAAA;AAEP,UAAA,OAAApM,IAAA,CAAKmM,WAAWtG,GAAG,CAAA,CAAA;AAC5B,SAAA;AACF,OAAA;AAEA,MAAA,IAAInE,OAAS,EAAA;QACPmE,GAAA,CAAAvD,GAAA,CAAI,IAAK,CAAAzB,KAAA,EAAO,IAAI,CAAA,CAAA;AAC1B,OAAO,MAAA;AACDgF,QAAAA,GAAA,CAAA,QAAA,CAAA,CAAO,KAAKhF,KAAK,CAAA,CAAA;AACvB,OAAA;MAEA,IAAIP,OAAOiD,aAAe,EAAA;QAExB,IAAIqH,QAAQE,QAAU,EAAA;UAEpB,IAAA,CAAK7H,aAAc,EAAA,CAAA;AACrB,SAAA;AACF,OAAO,MAAA;QAEA,IAAA,CAAAoJ,qBAAA,CAAsB3K,OAAS,EAAAmE,GAAA,EAAK+E,OAAO,CAAA,CAAA;QAE3C,IAAA,CAAA0B,mBAAA,CAAoB5K,OAAS,EAAAmE,GAAA,EAAK+E,OAAO,CAAA,CAAA;QAG9C,IAAIA,QAAQE,QAAU,EAAA;UACpB,IAAMyB,eAAevM,IAAK,CAAAwM,eAAA,CAAgB,CAAC,IAAA,CAAK3L,KAAK,CAAG,EAAA;AACtD2H,YAAAA,OAAS,EAAA,IAAA;AACX,WAAC,CAAA,CAAA;AACY+D,UAAAA,YAAA,CAAAhK,OAAA,CAAQ,UAAC8B,IAAS,EAAA;YAC7BA,IAAA,CAAKpB,aAAc,EAAA,CAAA;AACrB,WAAC,CAAA,CAAA;AACH,SAAA;AACF,OAAA;AAEO,MAAA,OAAAjD,IAAA,CAAKmM,WAAWtG,GAAG,CAAA,CAAA;AAC5B,KAAA;AAAA,GAAA,EAAA;IAAAxC,GAAA,EAAA,qBAAA;IAAAxC,KAAA,EAGQ,SAAAyL,mBACN5K,CAAAA,OACA,EAAAmE,GAAA,EACA6E,IACA,EAAA;MACA,IAAME,OAA8B,GAAAC,aAAA,CAAA;AAClCU,QAAAA,QAAU,EAAA,IAAA;AACVT,QAAAA,QAAU,EAAA,KAAA;AAAA,OAAA,EACPJ,IAAA,CACL,CAAA;AAGI,MAAA,IAAA,CAAC,KAAKhB,WAAY,EAAA,EAAG,OAAA;AAEnB,MAAA,IAAEjJ,WAAa,IAAA,CAAbA;AACR,MAAA,IAAIkC,MAAMC,OAAQ,CAAAnC,QAAQ,CAAK,IAAAA,QAAA,CAAS0D,SAAS,CAAG,EAAA;AAE9C0B,QAAAA,GAAA,CAAA,QAAA,CAAA,CAAO,KAAKhF,KAAK,CAAA,CAAA;AACvB,OAAA;AAEM,MAAA,IAAEX,SAAW,IAAA,CAAXA;MACR,IAAI,CAACA,MAAA,EAAQ,OAAA;MACNA,MAAA,CAAAoM,mBAAA,CAAoB5K,OAAS,EAAAmE,GAAA,EAAK+E,OAAO,CAAA,CAAA;AAClD,KAAA;AAAA,GAAA,EAAA;IAAAvH,GAAA,EAAA,uBAAA;IAAAxC,KAAA,EAGQ,SAAAwL,qBACN3K,CAAAA,OACA,EAAAmE,GAAA,EACA6E,IACA,EAAA;MACA,IAAME,OAA8B,GAAAC,aAAA,CAAA;AAClCU,QAAAA,QAAU,EAAA,IAAA;AACVT,QAAAA,QAAU,EAAA,KAAA;AAAA,OAAA,EACPJ,IAAA,CACL,CAAA;AAGI,MAAA,IAAA,CAAC,KAAKhB,WAAY,EAAA,EAAG,OAAA;MAErB,IAAAkB,OAAA,CAAQW,QAAY,IAAA,IAAA,CAAKnC,eAAgB,EAAA,EAAG,OAAA;AAE1C,MAAA,IAAE3I,WAAa,IAAA,CAAbA;AACJ,MAAA,IAAA,CAACkC,KAAM,CAAAC,OAAA,CAAQnC,QAAQ,CAAA,EAAG,OAAA;AAC9B,MAAA,IAAIA,SAAS0D,MAAU,IAAA,CAAA,EAAG,OAAA;AAEtB0B,MAAAA,GAAA,CAAA,QAAA,CAAA,CAAO,KAAKhF,KAAK,CAAA,CAAA;AACZJ,MAAAA,QAAA,CAAA8B,OAAA,CAAQ,UAAC8B,IAAS,EAAA;QAErB,IAAAuG,OAAA,CAAQW,QAAY,IAAAlH,IAAA,CAAK+E,eAAgB,EAAA,EAAG,OAAA;AAChD,QAAA,IAAI1H,OAAS,EAAA;UACPmE,GAAA,CAAAvD,GAAA,CAAI+B,IAAK,CAAAxD,KAAA,EAAO,IAAI,CAAA,CAAA;AAC1B,SAAO,MAAA;AACDgF,UAAAA,GAAA,CAAA,QAAA,CAAA,CAAOxB,KAAKxD,KAAK,CAAA,CAAA;AACvB,SAAA;QACKwD,IAAA,CAAAgI,qBAAA,CAAsB3K,OAAS,EAAAmE,GAAA,EAAK+E,OAAO,CAAA,CAAA;AAClD,OAAC,CAAA,CAAA;AACH,KAAA;AAAA,GAAA,EAAA;IAAAvH,GAAA,EAAA,aAAA;AAAAxC,IAAAA,KAAA,EAMO,SAAA6G,WAAY3G,CAAAA,QAAmB,EAAA;MACpC,IAAA,CAAKA,QAAW,GAAAA,QAAA,CAAA;MAChB,IAAA,CAAKmC,MAAO,EAAA,CAAA;MACZ,IAAA,CAAKsH,cAAe,EAAA,CAAA;AACtB,KAAA;AAAA,GAAA,EAAA;IAAAnH,GAAA,EAAA,QAAA;IAAAxC,KAAA,EAQO,SAAAqC,MAAAA,GAAe;AACf,MAAA,IAAA,CAAAjC,KAAA,GAAQ,KAAKyC,QAAS,EAAA,CAAA;AACtB,MAAA,IAAA,CAAAtC,SAAA,GAAY,KAAK8I,OAAQ,EAAA,CAAA;AACzB,MAAA,IAAA,CAAA7I,QAAA,GAAW,KAAK8I,MAAO,EAAA,CAAA;AACvB,MAAA,IAAA,CAAAhJ,QAAA,GAAW,KAAKiJ,MAAO,EAAA,CAAA;AACvB,MAAA,IAAA,CAAAlJ,WAAA,GAAc,KAAKwI,WAAY,EAAA,CAAA;AAC/B,MAAA,IAAA,CAAApI,QAAA,GAAW,KAAKmH,MAAO,EAAA,CAAA;AACvB,MAAA,IAAA,CAAAhH,OAAA,GAAU,KAAKkI,SAAU,EAAA,CAAA;AACzB,MAAA,IAAA,CAAA/H,QAAA,GAAW,KAAKgI,UAAW,EAAA,CAAA;AAC3B,MAAA,IAAA,CAAApI,OAAA,GAAU,KAAKuH,SAAU,EAAA,CAAA;AACzB,MAAA,IAAA,CAAA/I,IAAA,CAAK2H,QAAQ,IAAI,CAAA,CAAA;AACxB,KAAA;AAAA,GAAA,EAAA;IAAAtE,GAAA,EAAA,eAAA;IAAAxC,KAAA,EAMO,SAAAoC,aAAAA,GAAsB;AACrB,MAAA,IAAEjD,IAAM,GAAU,IAAA,CAAhBA,IAAM;QAAAa,KAAA,GAAU,IAAA,CAAVA,KAAA,CAAA;AACR,MAAA,IAAEyC,aAAetD,IAAA,CAAfsD;AACH,MAAA,IAAA,CAAA5B,OAAA,GAAU,KAAKmI,SAAU,EAAA,CAAA;AACzB,MAAA,IAAA,CAAAlI,aAAA,GAAgB,KAAKoI,eAAgB,EAAA,CAAA;MAC1C,IAAI,KAAKrI,OAAS,EAAA;AACL4B,QAAAA,UAAA,CAAAhB,GAAA,CAAIzB,OAAO,IAAI,CAAA,CAAA;AAC5B,OAAA;AACAb,MAAAA,IAAA,CAAK2H,QAAQ,IAAI,CAAA,CAAA;AACnB,KAAA;AAAA,GAAA,EAAA;IAAAtE,GAAA,EAAA,gBAAA;IAAAxC,KAAA,EAOO,SAAA2J,cAAAA,GAAuB;AAAA,MAAA,IAAAiC,MAAA,GAAA,IAAA,CAAA;AACvB,MAAA,IAAA,CAAAC,cAAA,CAAe,UAACrI,IAAS,EAAA;QAC5B,IAAIA,IAAS,KAAAoI,MAAA,EAAM,OAAA;QACnBpI,IAAA,CAAKnB,MAAO,EAAA,CAAA;QACZmB,IAAA,CAAKpB,aAAc,EAAA,CAAA;AACrB,OAAC,CAAA,CAAA;AACH,KAAA;AAAA,GAAA,EAAA;IAAAI,GAAA,EAAA,eAAA;IAAAxC,KAAA,EAOO,SAAAyF,aAAAA,GAAsB;AAAA,MAAA,IAAAqG,MAAA,GAAA,IAAA,CAAA;AACtB,MAAA,IAAA,CAAAC,aAAA,CAAc,UAACvI,IAAmB,EAAA;QACrC,IAAIA,IAAS,KAAAsI,MAAA,EAAM,OAAA;QACnBtI,IAAA,CAAKnB,MAAO,EAAA,CAAA;QACZmB,IAAA,CAAKpB,aAAc,EAAA,CAAA;AACrB,OAAC,CAAA,CAAA;AACH,KAAA;AAAA,GAAA,EAAA;IAAAI,GAAA,EAAA,eAAA;IAAAxC,KAAA,EAOO,SAAA0D,aAAAA,GAAsB;AACrB,MAAA,IAAEvE,OAAS,IAAA,CAATA;MACR,IAAMuM,eAAevM,IAAK,CAAAwM,eAAA,CAAgB,CAAC,IAAA,CAAK3L,KAAK,CAAC,CAAA,CAAA;AACzC0L,MAAAA,YAAA,CAAAhK,OAAA,CAAQ,UAAC8B,IAAS,EAAA;QAC7BA,IAAA,CAAKnB,MAAO,EAAA,CAAA;QACZmB,IAAA,CAAKpB,aAAc,EAAA,CAAA;AACrB,OAAC,CAAA,CAAA;AACH,KAAA;AAAA,GAAA,EAAA;IAAAI,GAAA,EAAA,MAAA;IAAAxC,KAAA,EASO,SAAA8E,IAAAA,GAAmB;MACxB,IAAM5B,OAAmB,EAAC,CAAA;AACrB,MAAA,IAAA,CAAA2I,cAAA,CAAe,UAACrI,IAAmB,EAAA;AACtCN,QAAAA,IAAA,CAAKC,KAAKK,IAAI,CAAA,CAAA;AAChB,OAAC,CAAA,CAAA;AACM,MAAA,OAAAN,IAAA,CAAA;AACT,KAAA;AAAA,GAAA,EAAA;IAAAV,GAAA,EAAA,gBAAA;AAAAxC,IAAAA,KAAA,EAOQ,SAAA6L,cAAeG,CAAAA,EAAqB,EAAA;MAC1CA,EAAA,CAAG,IAAI,CAAA,CAAA;AACD,MAAA,IAAEpM,WAAa,IAAA,CAAbA;AACR,MAAA,IAAIkC,MAAMC,OAAQ,CAAAnC,QAAQ,CAAK,IAAAA,QAAA,CAAS0D,SAAS,CAAG,EAAA;AACzC1D,QAAAA,QAAA,CAAA8B,OAAA,CAAQ,UAAC8B,IAAS,EAAA;UACzBA,IAAA,KAAA,IAAA,IAAAA,IAAA,KAAAA,KAAAA,CAAAA,IAAAA,IAAA,CAAMqI,eAAeG,EAAE,CAAA,CAAA;AACzB,SAAC,CAAA,CAAA;AACH,OAAA;AACF,KAAA;AAAA,GAAA,EAAA;IAAAxJ,GAAA,EAAA,eAAA;AAAAxC,IAAAA,KAAA,EAOQ,SAAA+L,aAAcC,CAAAA,EAAqB,EAAA;MACzCA,EAAA,CAAG,IAAI,CAAA,CAAA;AACD,MAAA,IAAE3M,SAAW,IAAA,CAAXA;MACR,IAAI,CAACA,MAAA,EAAQ,OAAA;MACbA,MAAA,KAAA,IAAA,IAAAA,MAAA,KAAAA,KAAAA,CAAAA,IAAAA,MAAA,CAAQ0M,cAAcC,EAAE,CAAA,CAAA;AAC1B,KAAA;AAAA,GAAA,EAAA;IAAAxJ,GAAA,EAAA,UAAA;IAAAxC,KAAA,EASO,SAAAqH,QAAAA,GAA8B;AAC/B,MAAA,IAAElH,QAAU,IAAA,CAAVA;MACN,IAAI,CAACA,KAAO,EAAA;AACVA,QAAAA,KAAA,GAAQ8L,gBAAgB,IAAI,CAAA,CAAA;QAC5B,IAAA,CAAK9L,KAAQ,GAAAA,KAAA,CAAA;AACf,OAAA;AACO,MAAA,OAAAA,KAAA,CAAA;AACT,KAAA;AAAA,GAAA,CAAA,CAAA,CAAA;AAAA,CAAA;;;;"}