{"version":3,"file":"popup.js","sources":["../../src/popup/popup.tsx"],"sourcesContent":["import { createPopper, Placement } from '@popperjs/core';\nimport isFunction from 'lodash/isFunction';\nimport isObject from 'lodash/isObject';\nimport debounce from 'lodash/debounce';\nimport isString from 'lodash/isString';\nimport {\n  computed,\n  defineComponent,\n  inject,\n  InjectionKey,\n  nextTick,\n  onUnmounted,\n  provide,\n  ref,\n  Ref,\n  toRefs,\n  Transition,\n  watch,\n} from 'vue';\nimport { useContent, useTNodeJSX } from '../hooks';\nimport { useCommonClassName, usePrefixClass } from '../hooks/useConfig';\nimport useVModel from '../hooks/useVModel';\nimport { off, on, once } from '../utils/dom';\nimport setStyle from '../_common/js/utils/set-style';\nimport Container from './container';\nimport props from './props';\nimport { PopupTriggerEvent, TdPopupProps } from './type';\n\nconst POPUP_ATTR_NAME = 'data-td-popup';\nconst POPUP_PARENT_ATTR_NAME = 'data-td-popup-parent';\n\n/**\n * @param id\n * @param upwards query upwards poppers\n */\nfunction getPopperTree(id: number | string, upwards?: boolean): Element[] {\n  const list = [] as any;\n  const selectors = [POPUP_PARENT_ATTR_NAME, POPUP_ATTR_NAME];\n\n  if (!id) return list;\n  if (upwards) {\n    selectors.unshift(selectors.pop());\n  }\n\n  recurse(id);\n\n  return list;\n\n  function recurse(id: number | string) {\n    const children = document.querySelectorAll(`[${selectors[0]}=\"${id}\"]`);\n    children.forEach((el) => {\n      list.push(el);\n      const childId = el.getAttribute(selectors[1]);\n      if (childId && childId !== id) {\n        recurse(childId);\n      }\n    });\n  }\n}\n\nconst parentKey = Symbol() as InjectionKey<{\n  id: string;\n  assertMouseLeave: (ev: MouseEvent) => void;\n}>;\n\nfunction getPopperPlacement(placement: TdPopupProps['placement']): Placement {\n  return placement.replace(/-(left|top)$/, '-start').replace(/-(right|bottom)$/, '-end') as Placement;\n}\n\nfunction attachListeners(elm: Ref<Element>) {\n  const offs: Array<() => void> = [];\n  return {\n    add<K extends keyof HTMLElementEventMap>(type: K, listener: (ev: HTMLElementEventMap[K]) => void) {\n      if (!type) return;\n      on(elm.value, type, listener);\n      offs.push(() => {\n        off(elm.value, type, listener);\n      });\n    },\n    clean() {\n      offs.forEach((handler) => handler?.());\n      offs.length = 0;\n    },\n  };\n}\n\nexport default defineComponent({\n  name: 'TPopup',\n\n  props: {\n    ...props,\n    expandAnimation: {\n      type: Boolean,\n    },\n  },\n  setup(props, { expose }) {\n    const { visible: propVisible, modelValue } = toRefs(props);\n    const [visible, setVisible] = useVModel(\n      propVisible,\n      modelValue,\n      props.defaultVisible,\n      props.onVisibleChange,\n      'visible',\n    );\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n\n    /** popperjs instance */\n    let popper: ReturnType<typeof createPopper>;\n    /** timeout id */\n    let showTimeout: any;\n    let hideTimeout: any;\n\n    const triggerEl = ref<HTMLElement>(null);\n    const overlayEl = ref<HTMLElement>(null);\n    const popperEl = ref<HTMLElement>(null);\n    const containerRef = ref<typeof Container>(null);\n    const isOverlayHover = ref(false);\n\n    const id = typeof process !== 'undefined' && process.env?.TEST ? '' : Date.now().toString(36);\n    const parent = inject(parentKey, undefined);\n\n    provide(parentKey, {\n      id,\n      assertMouseLeave: onMouseLeave,\n    });\n\n    const prefixCls = usePrefixClass('popup');\n    const { STATUS: commonCls } = useCommonClassName();\n    const delay = computed(() => {\n      const delay = props.trigger !== 'hover' ? [0, 0] : [].concat(props.delay ?? [250, 150]);\n      return {\n        show: delay[0],\n        hide: delay[1] ?? delay[0],\n      };\n    });\n\n    const trigger = attachListeners(triggerEl);\n\n    watch(\n      () => [props.trigger, triggerEl.value],\n      () => {\n        if (!triggerEl.value) return;\n        trigger.clean();\n\n        trigger.add(\n          (\n            {\n              hover: 'mouseenter',\n              focus: 'focusin',\n              'context-menu': 'contextmenu',\n              click: 'click',\n            } as any\n          )[props.trigger],\n          (ev: MouseEvent) => {\n            if (props.disabled) return;\n\n            if (ev.type === 'contextmenu') {\n              ev.preventDefault();\n            }\n\n            if ((ev.type === 'click' || ev.type === 'contextmenu') && visible.value) {\n              hide(ev);\n              return;\n            }\n\n            show(ev);\n          },\n        );\n\n        trigger.add(\n          (\n            {\n              hover: 'mouseleave',\n              focus: 'focusout',\n            } as any\n          )[props.trigger],\n          hide,\n        );\n      },\n    );\n\n    watch(\n      () => [props.overlayStyle, props.overlayInnerStyle, overlayEl.value],\n      () => {\n        updateOverlayInnerStyle();\n        updatePopper();\n      },\n    );\n\n    watch(\n      () => props.placement,\n      () => {\n        destroyPopper();\n        updatePopper();\n      },\n    );\n\n    watch(\n      () => visible.value,\n      (visible) => {\n        if (visible) {\n          on(document, 'mousedown', onDocumentMouseDown, true);\n          if (props.trigger === 'focus') {\n            once(triggerEl.value, 'keydown', (ev: KeyboardEvent) => {\n              const code = typeof process !== 'undefined' && process.env?.TEST ? '27' : 'Escape';\n              if (ev.code === code) {\n                hide(ev);\n              }\n            });\n          }\n          return;\n        }\n        off(document, 'mousedown', onDocumentMouseDown, true);\n      },\n    );\n\n    onUnmounted(() => {\n      destroyPopper();\n      clearAllTimeout();\n      off(document, 'mousedown', onDocumentMouseDown, true);\n    });\n\n    expose({\n      update: updatePopper,\n      getOverlay: () => overlayEl.value,\n      getOverlayState: () => ({\n        hover: isOverlayHover.value,\n      }),\n      /** close is going to be deprecated. visible is enough */\n      close: () => hide(),\n    });\n\n    function getOverlayStyle() {\n      const { overlayStyle } = props;\n\n      if (!triggerEl.value || !overlayEl.value) return;\n      if (isFunction(overlayStyle)) {\n        return overlayStyle(triggerEl.value, overlayEl.value);\n      }\n      if (isObject(overlayStyle)) {\n        return overlayStyle;\n      }\n    }\n\n    function updateOverlayInnerStyle() {\n      const { overlayInnerStyle } = props;\n\n      if (!triggerEl.value || !overlayEl.value) return;\n      if (isFunction(overlayInnerStyle)) {\n        setStyle(overlayEl.value, overlayInnerStyle(triggerEl.value, overlayEl.value));\n      } else if (isObject(overlayInnerStyle)) {\n        setStyle(overlayEl.value, overlayInnerStyle);\n      }\n    }\n\n    function updatePopper() {\n      if (!popperEl.value || !visible.value) return;\n      if (popper) {\n        /**\n         * web component 内的元素限制在了shadow root内，\n         * 无法通过寻找父元素的方式判定是否在当前文档内\n         */\n        if (triggerEl.value.getRootNode() instanceof ShadowRoot) {\n          popper.state.elements.reference = triggerEl.value;\n          popper.update();\n        } else {\n          const rect = triggerEl.value.getBoundingClientRect();\n          let parent = triggerEl.value;\n          while (parent && parent !== document.body) {\n            parent = parent.parentElement;\n          }\n          const isHidden = parent !== document.body || (rect.width === 0 && rect.height === 0);\n          if (!isHidden) {\n            popper.state.elements.reference = triggerEl.value;\n            popper.update();\n          } else {\n            setVisible(false, { trigger: getTriggerType({ type: 'mouseenter' } as MouseEvent) });\n          }\n        }\n        return;\n      }\n\n      popper = createPopper(triggerEl.value, popperEl.value, {\n        placement: getPopperPlacement(props.placement),\n        onFirstUpdate: () => {\n          nextTick(updatePopper);\n        },\n        ...props.popperOptions,\n      });\n    }\n\n    function destroyPopper() {\n      if (popper) {\n        popper?.destroy();\n        popper = null;\n      }\n      if (props.destroyOnClose) {\n        containerRef.value?.unmountContent();\n      }\n    }\n\n    function show(ev: PopupTriggerEvent) {\n      clearAllTimeout();\n      showTimeout = setTimeout(() => {\n        setVisible(true, { trigger: getTriggerType(ev) });\n      }, delay.value.show);\n    }\n\n    function hide(ev?: PopupTriggerEvent) {\n      clearAllTimeout();\n      hideTimeout = setTimeout(() => {\n        setVisible(false, { trigger: getTriggerType(ev), e: ev });\n      }, delay.value.hide);\n    }\n\n    function clearAllTimeout() {\n      clearTimeout(showTimeout);\n      clearTimeout(hideTimeout);\n    }\n\n    function getTriggerType(ev?: PopupTriggerEvent) {\n      switch (ev?.type) {\n        case 'mouseenter':\n          return 'trigger-element-hover';\n        case 'mouseleave':\n          return 'trigger-element-hover';\n        case 'focusin':\n          return 'trigger-element-focus';\n        case 'focusout':\n          return 'trigger-element-blur';\n        case 'click':\n          return 'trigger-element-click';\n        case 'context-menu':\n        case 'keydown':\n          return 'keydown-esc';\n        case 'mousedown':\n          return 'document';\n        default:\n          return 'trigger-element-close';\n      }\n    }\n\n    function onDocumentMouseDown(ev: MouseEvent) {\n      // click content\n      if (popperEl.value?.contains(ev.target as Node)) {\n        return;\n      }\n\n      // click trigger element\n      if (triggerEl.value?.contains(ev.target as Node)) {\n        return;\n      }\n\n      // ignore upwards\n      const activedPopper = getPopperTree(id).find((el) => el.contains(ev.target as Node));\n      if (\n        activedPopper &&\n        getPopperTree(activedPopper.getAttribute(POPUP_PARENT_ATTR_NAME), true).some((el) => el === popperEl.value)\n      ) {\n        return;\n      }\n\n      hide(ev);\n    }\n\n    function onMouseLeave(ev: MouseEvent) {\n      isOverlayHover.value = false;\n      if (props.trigger !== 'hover' || triggerEl.value.contains(ev.target as Node)) return;\n\n      const isCursorOverlaps = getPopperTree(id).some((el) => {\n        const rect = el.getBoundingClientRect();\n\n        return ev.x > rect.x && ev.x < rect.x + rect.width && ev.y > rect.y && ev.y < rect.y + rect.height;\n      });\n      if (!isCursorOverlaps) {\n        hide(ev);\n        parent?.assertMouseLeave(ev);\n      }\n    }\n\n    function onMouseenter() {\n      isOverlayHover.value = true;\n      if (visible.value && props.trigger === 'hover') {\n        clearAllTimeout();\n      }\n    }\n\n    function onOverlayClick(e: MouseEvent) {\n      props.onOverlayClick?.({ e });\n    }\n\n    const updateScrollTop = inject('updateScrollTop', undefined);\n\n    function handleOnScroll(e: WheelEvent) {\n      const { scrollTop, clientHeight, scrollHeight } = e.target as HTMLDivElement;\n\n      // 防止多次触发添加截流\n      const debounceOnScrollBottom = debounce((e) => props.onScrollToBottom?.({ e }), 100);\n\n      // windows 下 scrollTop 会出现小数，这里取整\n      if (clientHeight + Math.floor(scrollTop) === scrollHeight) {\n        // touch bottom\n        debounceOnScrollBottom(e);\n      }\n      props.onScroll?.({ e });\n    }\n    watch(\n      () => [visible.value, overlayEl.value],\n      () => {\n        if (visible.value && overlayEl.value && updateScrollTop) {\n          updateScrollTop?.(overlayEl.value);\n        }\n      },\n    );\n\n    return () => {\n      const content = renderTNodeJSX('content');\n      const hidePopup = props.hideEmptyPopup && ['', undefined, null].includes(content);\n\n      const overlay =\n        visible.value || !props.destroyOnClose ? (\n          <div\n            {...{\n              [POPUP_ATTR_NAME]: id,\n              [POPUP_PARENT_ATTR_NAME]: parent?.id,\n            }}\n            class={[prefixCls.value, props.overlayClassName]}\n            ref={(ref: HTMLElement) => (popperEl.value = ref)}\n            style={[{ zIndex: props.zIndex }, getOverlayStyle(), hidePopup && { visibility: 'hidden' }]}\n            vShow={visible.value}\n            onClick={onOverlayClick}\n            onMouseenter={onMouseenter}\n            onMouseleave={onMouseLeave}\n          >\n            <div\n              class={[\n                `${prefixCls.value}__content`,\n                {\n                  [`${prefixCls.value}__content--text`]: isString(props.content),\n                  [`${prefixCls.value}__content--arrow`]: props.showArrow,\n                  [commonCls.value.disabled]: props.disabled,\n                },\n                props.overlayInnerClassName,\n              ]}\n              ref={overlayEl}\n              onScroll={handleOnScroll}\n            >\n              {content}\n              {props.showArrow && <div class={`${prefixCls.value}__arrow`} />}\n            </div>\n          </div>\n        ) : null;\n\n      return (\n        <Container\n          ref={(ref: any) => (containerRef.value = ref)}\n          forwardRef={(ref) => (triggerEl.value = ref)}\n          onContentMounted={() => {\n            if (visible.value) {\n              updatePopper();\n\n              const timer = setTimeout(() => {\n                /** compted after animation finished */\n                updateOverlayInnerStyle();\n                clearTimeout(timer);\n              }, 60);\n            }\n          }}\n          onResize={() => {\n            if (visible.value) {\n              updatePopper();\n            }\n          }}\n          visible={visible.value}\n          attach={props.attach}\n        >\n          {{\n            content: () => (\n              <Transition\n                name={`${prefixCls.value}--animation${props.expandAnimation ? '-expand' : ''}`}\n                appear\n                onEnter={updatePopper}\n                onAfterLeave={destroyPopper}\n              >\n                {overlay}\n              </Transition>\n            ),\n            default: () => renderContent('default', 'triggerElement'),\n          }}\n        </Container>\n      );\n    };\n  },\n});\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","POPUP_ATTR_NAME","POPUP_PARENT_ATTR_NAME","getPopperTree","id","upwards","list","selectors","unshift","pop","recurse","children","document","querySelectorAll","concat","forEach","el","push","childId","getAttribute","parentKey","Symbol","getPopperPlacement","placement","replace","attachListeners","elm","offs","add","type","listener","on","value","off","clean","handler","length","defineComponent","name","props","_objectSpread","expandAnimation","Boolean","setup","_process$env","expose","_ref","_toRefs","toRefs","propVisible","visible","modelValue","_useVModel","useVModel","defaultVisible","onVisibleChange","_useVModel2","_slicedToArray","setVisible","renderTNodeJSX","useTNodeJSX","renderContent","useContent","popper","showTimeout","hideTimeout","triggerEl","ref","overlayEl","popperEl","containerRef","isOverlayHover","process","env","TEST","Date","now","parent","inject","provide","assertMouseLeave","onMouseLeave","prefixCls","usePrefixClass","_useCommonClassName","useCommonClassName","commonCls","STATUS","delay","computed","_props2$delay","_delay2$","trigger","show","hide","watch","hover","focus","click","ev","disabled","preventDefault","overlayStyle","overlayInnerStyle","updateOverlayInnerStyle","updatePopper","destroyPopper","onDocumentMouseDown","once","_process$env2","code","onUnmounted","clearAllTimeout","update","getOverlay","getOverlayState","close","getOverlayStyle","isFunction","isObject","setStyle","getRootNode","ShadowRoot","state","elements","reference","rect","getBoundingClientRect","body","parentElement","isHidden","width","height","getTriggerType","createPopper","onFirstUpdate","nextTick","popperOptions","_popper","destroy","destroyOnClose","_containerRef$value","unmountContent","setTimeout","e","clearTimeout","_popperEl$value","_triggerEl$value","contains","target","activedPopper","find","some","isCursorOverlaps","x","y","onMouseenter","onOverlayClick","_props2$onOverlayClic","updateScrollTop","handleOnScroll","_props2$onScroll","_e$target","scrollTop","clientHeight","scrollHeight","debounceOnScrollBottom","debounce","onScrollToBottom","_props2$onScrollToBot","Math","floor","onScroll","content","hidePopup","hideEmptyPopup","includes","overlay","_withDirectives","_createVNode","_mergeProps","_defineProperty","overlayClassName","zIndex","visibility","isString","showArrow","overlayInnerClassName","_vShow","Container","forwardRef","onContentMounted","timer","onResize","attach","Transition","_default"],"mappings":"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"}