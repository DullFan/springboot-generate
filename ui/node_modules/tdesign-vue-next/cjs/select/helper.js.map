{"version":3,"file":"helper.js","sources":["../../src/select/helper.ts"],"sourcesContent":["import { InjectionKey, ComputedRef } from 'vue';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { TdSelectProps, TdOptionProps, SelectValue, SelectOption } from './type';\n\nexport const selectInjectKey: InjectionKey<\n  ComputedRef<{\n    hoverIndex: number;\n    selectValue: TdSelectProps['value'];\n    size: TdSelectProps['size'];\n    max: TdSelectProps['max'];\n    reserveKeyword: TdSelectProps['reserveKeyword'];\n    multiple: TdSelectProps['multiple'];\n    handleValueChange: TdSelectProps['onChange'];\n    handleCreate: TdSelectProps['onCreate'];\n    handlerInputChange: TdSelectProps['onInputChange'];\n    handlePopupVisibleChange: TdSelectProps['onPopupVisibleChange'];\n    popupContentRef: ComputedRef<HTMLElement>;\n    indeterminate: boolean;\n    isCheckAll: boolean;\n    onCheckAllChange: (checked: boolean) => void;\n    getSelectedOptions: (selectValue?: SelectValue[] | SelectValue) => TdOptionProps[];\n    displayOptions: TdSelectProps['options'];\n  }>\n> = Symbol('selectProvide');\n\nexport const getSingleContent = (\n  value: TdSelectProps['value'],\n  optionsMap: ComputedRef<Map<SelectValue<SelectOption>, TdOptionProps>>,\n): string => {\n  const option = optionsMap.value.get(value);\n  return option?.label || value?.toString();\n};\n\nexport const getMultipleContent = (\n  value: SelectValue[],\n  optionsMap: ComputedRef<Map<SelectValue<SelectOption>, TdOptionProps>>,\n) => {\n  const res = [];\n  for (const iterator of value) {\n    const resLabel = getSingleContent(iterator, optionsMap);\n    if (resLabel) {\n      res.push(resLabel);\n    }\n  }\n  return res;\n};\n\nexport const getNewMultipleValue = (innerValue: SelectValue[], optionValue: SelectValue) => {\n  const value = cloneDeep(innerValue) as SelectValue[];\n  const valueIndex = value.indexOf(optionValue);\n  if (valueIndex < 0) {\n    value.push(optionValue);\n  } else {\n    value.splice(valueIndex, 1);\n  }\n  return {\n    value,\n    isCheck: valueIndex < 0,\n  };\n};\n"],"names":["selectInjectKey","Symbol","getSingleContent","value","optionsMap","option","get","label","toString","getMultipleContent","res","_iterator","_createForOfIteratorHelper","_step","s","n","done","iterator","resLabel","push","err","e","f","getNewMultipleValue","innerValue","optionValue","cloneDeep","valueIndex","indexOf","splice","isCheck"],"mappings":";;;;;;;;;;;;;;;;;;;IAIaA,eAAA,GAmBTC,OAAO,eAAe,EAAA;AAEb,IAAAC,gBAAA,GAAmB,SAAnBA,gBAAAA,CACXC,KAAA,EACAC,UACW,EAAA;EACX,IAAMC,MAAS,GAAAD,UAAA,CAAWD,KAAM,CAAAG,GAAA,CAAIH,KAAK,CAAA,CAAA;AAClC,EAAA,OAAA,CAAAE,MAAA,KAAA,IAAA,IAAAA,MAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,MAAA,CAAQE,KAAS,MAAAJ,KAAA,aAAAA,KAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,KAAA,CAAOK,QAAS,EAAA,CAAA,CAAA;AAC1C,EAAA;AAEa,IAAAC,kBAAA,GAAqB,SAArBA,kBAAAA,CACXN,KAAA,EACAC,UACG,EAAA;EACH,IAAMM,MAAM,EAAC,CAAA;AAAA,EAAA,IAAAC,SAAA,GAAAC,0BAAA,CACUT,KAAO,CAAA;IAAAU,KAAA,CAAA;AAAA,EAAA,IAAA;IAA9B,KAAAF,SAAA,CAAAG,CAAA,EAAAD,EAAAA,CAAAA,CAAAA,KAAA,GAAAF,SAAA,CAAAI,CAAA,EAAAC,EAAAA,IAAA,GAA8B;AAAA,MAAA,IAAnBC;AACH,MAAA,IAAAC,QAAA,GAAWhB,gBAAiB,CAAAe,QAAA,EAAUb,UAAU,CAAA,CAAA;AACtD,MAAA,IAAIc,QAAU,EAAA;AACZR,QAAAA,GAAA,CAAIS,KAAKD,QAAQ,CAAA,CAAA;AACnB,OAAA;AACF,KAAA;AAAA,GAAA,CAAA,OAAAE,GAAA,EAAA;IAAAT,SAAA,CAAAU,CAAA,CAAAD,GAAA,CAAA,CAAA;AAAA,GAAA,SAAA;AAAAT,IAAAA,SAAA,CAAAW,CAAA,EAAA,CAAA;AAAA,GAAA;AACO,EAAA,OAAAZ,GAAA,CAAA;AACT,EAAA;AAEa,IAAAa,mBAAA,GAAsB,SAAtBA,mBAAAA,CAAuBC,UAAA,EAA2BC,WAA6B,EAAA;AACpF,EAAA,IAAAtB,KAAA,GAAQuB,8BAAUF,UAAU,CAAA,CAAA;AAC5B,EAAA,IAAAG,UAAA,GAAaxB,KAAM,CAAAyB,OAAA,CAAQH,WAAW,CAAA,CAAA;EAC5C,IAAIE,aAAa,CAAG,EAAA;AAClBxB,IAAAA,KAAA,CAAMgB,KAAKM,WAAW,CAAA,CAAA;AACxB,GAAO,MAAA;AACCtB,IAAAA,KAAA,CAAA0B,MAAA,CAAOF,YAAY,CAAC,CAAA,CAAA;AAC5B,GAAA;EACO,OAAA;AACLxB,IAAAA,KAAA,EAAAA,KAAA;IACA2B,SAASH,UAAa,GAAA,CAAA;GACxB,CAAA;AACF;;;;;;;"}