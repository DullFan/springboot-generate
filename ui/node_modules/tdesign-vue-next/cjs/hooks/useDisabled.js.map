{"version":3,"file":"useDisabled.js","sources":["../../src/hooks/useDisabled.ts"],"sourcesContent":["import { Ref, inject, computed, getCurrentInstance } from 'vue';\nimport isBoolean from 'lodash/isBoolean';\nimport { TdFormProps } from '../form/type';\n\nexport interface FormDisabledProvider {\n  disabled: Ref<TdFormProps['disabled']>;\n}\n\nexport interface DisabledContext {\n  beforeDisabled?: Ref<boolean>;\n  afterDisabled?: Ref<boolean>;\n}\n\n/**\n * 用于实现组件全局禁用状态的hook\n * 优先级:(beforeDisabled) > Component.disabled > ComponentGroup.disabled(afterDisabled) > Form.disabled\n * @returns\n */\nexport function useDisabled(context?: DisabledContext) {\n  const currentInstance = getCurrentInstance();\n  const componentDisabled = computed(() => currentInstance.props.disabled as boolean);\n\n  const formDisabled = inject<FormDisabledProvider>('formDisabled', Object.create(null));\n\n  return computed(() => {\n    if (isBoolean(context?.beforeDisabled.value)) return context.beforeDisabled.value;\n    // Component\n    if (isBoolean(componentDisabled.value)) return componentDisabled.value;\n    // ComponentGroup\n    if (isBoolean(context?.afterDisabled.value)) return context.afterDisabled.value;\n    // Form\n    if (isBoolean(formDisabled.disabled?.value)) return formDisabled.disabled.value;\n\n    return false;\n  });\n}\n"],"names":["useDisabled","context","currentInstance","getCurrentInstance","componentDisabled","computed","props","disabled","formDisabled","inject","Object","create","_formDisabled$disable","isBoolean","beforeDisabled","value","afterDisabled"],"mappings":";;;;;;;;;;;;;;;;;AAkBO,SAASA,YAAYC,OAA2B,EAAA;AACrD,EAAA,IAAMC,kBAAkBC,sBAAmB,EAAA,CAAA;EAC3C,IAAMC,iBAAoB,GAAAC,YAAA,CAAS,YAAA;AAAA,IAAA,OAAMH,eAAA,CAAgBI,MAAMC,QAAmB,CAAA;GAAA,CAAA,CAAA;AAElF,EAAA,IAAMC,eAAeC,UAA6B,CAAA,cAAA,iBAAuBC,MAAA,CAAAC,MAAA,CAAO,IAAI,CAAC,CAAA,CAAA;EAErF,OAAON,aAAS,YAAM;AAAA,IAAA,IAAAO,qBAAA,CAAA;AAChB,IAAA,IAAAC,6BAAA,CAAUZ,OAAS,aAATA,OAAS,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAATA,OAAS,CAAAa,cAAA,CAAeC,KAAK,CAAA,EAAG,OAAOd,QAAQa,cAAe,CAAAC,KAAA,CAAA;IAExE,IAAAF,6BAAA,CAAUT,kBAAkBW,KAAK,CAAA,EAAG,OAAOX,iBAAkB,CAAAW,KAAA,CAAA;AAE7D,IAAA,IAAAF,6BAAA,CAAUZ,OAAS,aAATA,OAAS,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAATA,OAAS,CAAAe,aAAA,CAAcD,KAAK,CAAA,EAAG,OAAOd,QAAQe,aAAc,CAAAD,KAAA,CAAA;IAEtE,IAAAF,6BAAA,EAAAD,qBAAA,GAAUJ,YAAa,CAAAD,QAAA,cAAAK,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAbA,qBAAA,CAAuBG,KAAK,CAAA,EAAG,OAAOP,aAAaD,QAAS,CAAAQ,KAAA,CAAA;AAEnE,IAAA,OAAA,KAAA,CAAA;AACT,GAAC,CAAA,CAAA;AACH;;;;"}