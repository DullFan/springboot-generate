{"version":3,"file":"submenu.js","sources":["../../src/menu/submenu.tsx"],"sourcesContent":["import {\n  defineComponent,\n  computed,\n  inject,\n  ref,\n  provide,\n  onMounted,\n  getCurrentInstance,\n  watch,\n  Slots,\n  toRefs,\n  reactive,\n  nextTick,\n  Transition,\n} from 'vue';\nimport props from './submenu-props';\nimport { renderContent, renderTNodeJSX } from '../utils/render-tnode';\nimport { TdMenuInterface, TdSubMenuInterface, TdMenuItem } from './const';\nimport FakeArrow from '../common-components/fake-arrow';\nimport useRipple from '../hooks/useRipple';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport { Popup, PopupPlacement } from '../popup';\nimport isFunction from 'lodash/isFunction';\nimport { TdSubmenuProps } from './type';\nimport useCollapseAnimation from '../hooks/useCollapseAnimation';\n\nexport default defineComponent({\n  name: 'TSubmenu',\n\n  props,\n  setup(props, ctx) {\n    const classPrefix = usePrefixClass();\n    const menu = inject<TdMenuInterface>('TdMenu');\n    const { theme, activeValues, expandValues, isHead, open } = menu;\n    const submenu = inject<TdSubMenuInterface>('TdSubmenu', {});\n    const { setSubPopup, closeParentPopup } = submenu;\n    const mode = computed(() => ctx.attrs.expandType || menu.mode.value);\n\n    const menuItems = ref([]); // 因composition-api的缺陷，不用reactive， 详见：https://github.com/vuejs/composition-api/issues/637\n    const isActive = computed(() => activeValues.value.indexOf(props.value) > -1);\n    const popupVisible = ref(false);\n    const isCursorInPopup = ref(false);\n    const rippleColor = computed(() => (theme.value === 'light' ? '#E7E7E7' : '#383838'));\n    const isOpen = computed(() => {\n      if (mode.value === 'popup') {\n        return popupVisible.value;\n      }\n      return expandValues ? expandValues.value?.includes(props.value) : false;\n    });\n    const isNested = ref(false); // 是否嵌套\n\n    const popupWrapperRef = ref<HTMLElement>();\n    const subPopupRef = ref<HTMLElement>();\n    const submenuRef = ref<HTMLElement>();\n    const transitionClass = usePrefixClass('slide-down');\n    useRipple(submenuRef, rippleColor);\n\n    const classes = computed(() => [\n      `${classPrefix.value}-submenu`,\n      {\n        [`${classPrefix.value}-is-disabled`]: props.disabled,\n        [`${classPrefix.value}-is-opened`]: isOpen.value,\n      },\n    ]);\n    const overlayInnerClassName = computed(() => [\n      `${classPrefix.value}-menu__popup`,\n      `${classPrefix.value}-is-${isHead ? 'horizontal' : 'vertical'}`,\n      {\n        [`${classPrefix.value}-is-opened`]: popupVisible.value,\n      },\n      (props.popupProps as TdSubmenuProps['popupProps'])?.overlayInnerClassName,\n    ]);\n    const overlayClassName = computed(() => [\n      `${classPrefix.value}-menu--${theme.value}`,\n      isHead && `${classPrefix.value}-is-head-menu`,\n      { [`${classPrefix.value}-menu-is-nested`]: isNested.value },\n      (props.popupProps as TdSubmenuProps['popupProps'])?.overlayClassName,\n    ]);\n    const submenuClass = computed(() => [\n      `${classPrefix.value}-menu__item`,\n      `${classPrefix.value}-menu__item-spacer`,\n      `${classPrefix.value}-menu__item-spacer--${isHead && !isNested.value ? 'bottom' : 'right'}`,\n      {\n        [`${classPrefix.value}-is-disabled`]: props.disabled,\n        [`${classPrefix.value}-is-opened`]: isOpen.value,\n        [`${classPrefix.value}-is-active`]: isActive.value,\n      },\n    ]);\n    const subClass = computed(() => [\n      `${classPrefix.value}-menu__sub`,\n      {\n        [`${classPrefix.value}-is-opened`]: isOpen.value,\n      },\n    ]);\n    const arrowClass = computed(() => [\n      {\n        [`${classPrefix.value}-fake-arrow--active`]: isOpen.value,\n      },\n    ]);\n\n    const passSubPopupRefToParent = (val: HTMLElement) => {\n      if (isFunction(setSubPopup)) {\n        setSubPopup(val);\n      }\n    };\n\n    // methods\n    const handleMouseEnter = () => {\n      if (props.disabled) return;\n      setTimeout(() => {\n        if (!popupVisible.value) {\n          open(props.value);\n\n          // popupVisible设置为TRUE之后打开popup，因此需要在nextTick中确保可以拿到ref值\n          nextTick().then(() => {\n            passSubPopupRefToParent(popupWrapperRef.value);\n          });\n        }\n        popupVisible.value = true;\n      }, 0);\n    };\n\n    const targetInPopup = (el: HTMLElement) => el?.classList.contains(`${classPrefix.value}-menu__popup`);\n    const loopInPopup = (el: HTMLElement): boolean => {\n      if (!el) return false;\n      return targetInPopup(el) || loopInPopup(el.parentElement);\n    };\n\n    const handleMouseLeave = (e: MouseEvent) => {\n      setTimeout(() => {\n        const inPopup = targetInPopup(e.relatedTarget as HTMLElement);\n\n        if (isCursorInPopup.value || inPopup) return;\n        popupVisible.value = false;\n      }, 0);\n    };\n\n    const handleMouseLeavePopup = (e: any) => {\n      const { toElement, relatedTarget } = e;\n      let target = toElement || relatedTarget;\n\n      if (target === subPopupRef.value) return;\n\n      const isSubmenu = (el: Element) => el === submenuRef.value;\n      while (target !== null && target !== document && !isSubmenu(target)) {\n        target = target.parentNode;\n      }\n\n      isCursorInPopup.value = false;\n\n      if (!isSubmenu(target)) {\n        popupVisible.value = false;\n      }\n\n      closeParentPopup?.(e);\n    };\n    const handleEnterPopup = () => {\n      isCursorInPopup.value = true;\n    };\n\n    const handleSubmenuItemClick = () => {\n      if (props.disabled) return;\n      open(props.value);\n    };\n\n    watch(popupVisible, (visible) => {\n      menu.open(props.value, visible ? 'add' : 'remove');\n    });\n\n    // provide\n    const { value } = toRefs(props);\n    provide<TdSubMenuInterface>(\n      'TdSubmenu',\n      reactive({\n        value,\n        addMenuItem: (item: TdMenuItem) => {\n          menuItems.value.push(item);\n          if (submenu) {\n            submenu.addMenuItem(item);\n          }\n        },\n        setSubPopup: (ref: HTMLElement) => {\n          subPopupRef.value = ref;\n        },\n        closeParentPopup: (e: MouseEvent) => {\n          const related = e.relatedTarget as HTMLElement;\n          if (loopInPopup(related)) return;\n          handleMouseLeavePopup(e);\n        },\n      }),\n    );\n\n    watch(popupWrapperRef, () => {\n      // 第一次触发nextTick会取空值，导致subPopupRef拿不到对应的DOM\n      passSubPopupRefToParent(popupWrapperRef.value);\n    });\n\n    onMounted(() => {\n      menu?.vMenu?.add({ value: props.value, parent: submenu?.value, vnode: ctx.slots.default });\n      const instance = getCurrentInstance();\n      let node = instance.parent;\n\n      while (node && !/^t(head)?menu/i.test(node?.type.name)) {\n        if (/submenu/i.test(node?.type.name)) {\n          isNested.value = true;\n          break;\n        }\n        node = node?.parent;\n      }\n    });\n\n    return {\n      classPrefix,\n      menuItems,\n      mode,\n      theme,\n      isHead,\n      isNested,\n      classes,\n      subClass,\n      isOpen,\n      transitionClass,\n      arrowClass,\n      overlayInnerClassName,\n      overlayClassName,\n      submenuClass,\n      submenuRef,\n      popupWrapperRef,\n      popupVisible,\n      isCursorInPopup,\n      handleEnterPopup,\n      handleMouseEnter,\n      handleMouseLeave,\n      handleMouseLeavePopup,\n      handleSubmenuItemClick,\n    };\n  },\n  methods: {\n    renderPopup(triggerElement: Slots[]) {\n      let placement = 'right-top';\n      if (!this.isNested && this.isHead) {\n        placement = 'bottom-left';\n      }\n\n      const popupWrapper = (\n        <div\n          ref=\"popupWrapperRef\"\n          class={[\n            `${this.classPrefix}-menu__spacer`,\n            `${this.classPrefix}-menu__spacer--${!this.isNested && this.isHead ? 'top' : 'left'}`,\n          ]}\n          onMouseenter={this.handleEnterPopup}\n          onMouseleave={this.handleMouseLeavePopup}\n        >\n          <ul class={`${this.classPrefix}-menu__popup-wrapper`}>{renderContent(this, 'default', 'content')}</ul>\n        </div>\n      );\n      const slots = {\n        content: () => popupWrapper,\n      };\n\n      const realPopup = (\n        <Popup\n          {...((this.popupProps ?? {}) as TdSubmenuProps['popupProps'])}\n          overlayInnerClassName={[...this.overlayInnerClassName]}\n          overlayClassName={[...this.overlayClassName]}\n          visible={this.popupVisible}\n          placement={placement as PopupPlacement}\n          v-slots={slots}\n        >\n          <div ref=\"submenuRef\" class={this.submenuClass}>\n            {triggerElement}\n          </div>\n        </Popup>\n      );\n\n      return realPopup;\n    },\n    renderHeadSubmenu() {\n      const icon = renderTNodeJSX(this, 'icon');\n      const normalSubmenu = [\n        <div ref=\"submenuRef\" class={this.submenuClass} onClick={this.handleSubmenuItemClick}>\n          {icon}\n          <span class={[`${this.classPrefix}-menu__content`]}>{renderTNodeJSX(this, 'title', { silent: true })}</span>\n        </div>,\n        <ul style=\"opacity: 0; width: 0; height: 0; overflow: hidden\">{renderContent(this, 'default', 'content')}</ul>,\n      ];\n\n      const needRotate = this.mode === 'popup' && this.isNested;\n\n      const triggerElement = [\n        icon,\n        <span class={[`${this.classPrefix}-menu__content`]}>{renderTNodeJSX(this, 'title', { silent: true })}</span>,\n        <FakeArrow\n          overlayClassName={/menu/i.test(this.$parent.$options.name) ? this.arrowClass : null}\n          overlayStyle={{ transform: `rotate(${needRotate ? -90 : 0}deg)` }}\n        />,\n      ];\n\n      return this.mode === 'normal' ? normalSubmenu : this.renderPopup(triggerElement);\n    },\n    renderSubmenu() {\n      const hasContent = this.$slots.content || this.$slots.default;\n      const icon = renderTNodeJSX(this, 'icon');\n      const child = renderContent(this, 'default', 'content');\n      let { parent } = getCurrentInstance();\n      let paddingLeft = 44;\n\n      while (parent && parent.type.name !== 'TMenu') {\n        if (parent.type.name === 'TSubmenu') {\n          paddingLeft += 16;\n        }\n        parent = parent.parent;\n      }\n\n      const { beforeEnter, enter, afterEnter, beforeLeave, leave, afterLeave } = useCollapseAnimation();\n\n      const needRotate = this.mode === 'popup' && this.isNested;\n\n      const normalSubmenu = [\n        <div ref=\"submenuRef\" class={this.submenuClass} onClick={this.handleSubmenuItemClick}>\n          {icon}\n          <span class={[`${this.classPrefix}-menu__content`]}>{renderTNodeJSX(this, 'title', { silent: true })}</span>\n          {hasContent && (\n            <FakeArrow\n              overlayClassName={this.arrowClass}\n              overlayStyle={{ transform: `rotate(${needRotate ? -90 : 0}deg)` }}\n            />\n          )}\n        </div>,\n        <Transition\n          name={this.transitionClass}\n          onBeforeEnter={beforeEnter}\n          onEnter={enter}\n          onAfterEnter={afterEnter}\n          onBeforeLeave={beforeLeave}\n          onLeave={leave}\n          onAfterLeave={afterLeave}\n        >\n          <ul v-show={this.isOpen} class={this.subClass} style={{ '--padding-left': `${paddingLeft}px` }}>\n            {child}\n          </ul>\n        </Transition>,\n      ];\n\n      const triggerElement = [\n        icon,\n        <span class={[`${this.classPrefix}-menu__content`]}>{renderTNodeJSX(this, 'title', { silent: true })}</span>,\n        <FakeArrow\n          overlayClassName={/menu/i.test(this.$parent.$options.name) ? this.arrowClass : null}\n          overlayStyle={{ transform: `rotate(${needRotate ? -90 : 0}deg)`, 'margin-left': 'auto' }}\n        />,\n      ];\n\n      return this.mode === 'normal' ? normalSubmenu : this.renderPopup(triggerElement);\n    },\n  },\n  render() {\n    let child = null;\n    let events = {};\n\n    if (this.mode === 'popup') {\n      events = {\n        onMouseenter: this.handleMouseEnter,\n        onMouseleave: this.handleMouseLeave,\n      };\n    }\n    if (Object.keys(this.$slots).length > 0) {\n      child = this.isHead ? this.renderHeadSubmenu() : this.renderSubmenu();\n    }\n    return (\n      <li class={this.classes} {...events}>\n        {child}\n      </li>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","setup","ctx","classPrefix","usePrefixClass","menu","inject","theme","activeValues","expandValues","isHead","open","submenu","setSubPopup","closeParentPopup","mode","computed","attrs","expandType","value","menuItems","ref","isActive","indexOf","popupVisible","isCursorInPopup","rippleColor","isOpen","_expandValues$value","includes","isNested","popupWrapperRef","subPopupRef","submenuRef","transitionClass","useRipple","classes","concat","_defineProperty","disabled","overlayInnerClassName","_props2$popupProps","popupProps","overlayClassName","_props2$popupProps2","submenuClass","subClass","arrowClass","passSubPopupRefToParent","val","isFunction","handleMouseEnter","setTimeout","nextTick","then","targetInPopup","el","classList","contains","loopInPopup","parentElement","handleMouseLeave","e","inPopup","relatedTarget","handleMouseLeavePopup","toElement","target","isSubmenu","document","parentNode","handleEnterPopup","handleSubmenuItemClick","watch","visible","_toRefs","toRefs","provide","reactive","addMenuItem","item","push","related","onMounted","_menu$vMenu","vMenu","add","parent","vnode","slots","instance","getCurrentInstance","node","test","_node","type","_node2","_node3","methods","renderPopup","triggerElement","_this$popupProps","_this","placement","popupWrapper","_createVNode","renderContent","content","realPopup","_toConsumableArray","_objectSpread","_default","renderHeadSubmenu","icon","renderTNodeJSX","normalSubmenu","silent","needRotate","$parent","$options","transform","renderSubmenu","_this2","hasContent","$slots","child","_getCurrentInstance","paddingLeft","_useCollapseAnimation","useCollapseAnimation","beforeEnter","enter","afterEnter","beforeLeave","leave","afterLeave","FakeArrow","Transition","_withDirectives","_vShow","render","events","onMouseenter","onMouseleave","Object","keys","length","_mergeProps"],"mappings":"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"}