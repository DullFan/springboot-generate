{"version":3,"file":"breadcrumb-item.js","sources":["../../src/breadcrumb/breadcrumb-item.tsx"],"sourcesContent":["import { defineComponent, VNode, inject, ref, computed, getCurrentInstance, onMounted, onBeforeUpdate } from 'vue';\nimport { ChevronRightIcon as TdChevronRightIcon } from 'tdesign-icons-vue-next';\n\nimport props from './breadcrumb-item-props';\nimport Tooltip from '../tooltip/index';\nimport { isNodeOverflow } from '../utils/dom';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\nimport isFunction from 'lodash/isFunction';\n\ninterface LocalTBreadcrumb {\n  separator: (() => void) | string;\n  theme: string;\n  slots: {\n    separator: VNode | string;\n  };\n  maxItemWidth: string;\n}\n\nconst localTBreadcrumbOrigin: LocalTBreadcrumb = {\n  separator: '',\n  theme: 'light',\n  slots: { separator: '' },\n  maxItemWidth: undefined,\n};\n\nexport default defineComponent({\n  name: 'TBreadcrumbItem',\n  inheritAttrs: false,\n  props: {\n    ...props,\n  },\n  setup(props, { attrs }) {\n    const renderContent = useContent();\n    const renderTNodeJSX = useTNodeJSX();\n\n    const breadcrumbText = ref<HTMLElement>();\n    const localTBreadcrumb = inject('tBreadcrumb', localTBreadcrumbOrigin);\n    const themeClassName = ref(localTBreadcrumb?.theme);\n    const isCutOff = ref(false);\n    const COMPONENT_NAME = usePrefixClass('breadcrumb__item');\n    const separatorClass = usePrefixClass('breadcrumb__separator');\n    const disableClass = usePrefixClass('is-disabled');\n    const linkClass = usePrefixClass('link');\n    const maxLengthClass = usePrefixClass('breadcrumb__inner');\n    const textFlowClass = usePrefixClass('breadcrumb--text-overflow');\n\n    const { ChevronRightIcon } = useGlobalIcon({ ChevronRightIcon: TdChevronRightIcon });\n    const maxWithStyle = computed(() => {\n      const maxItemWidth = localTBreadcrumb?.maxItemWidth;\n      const maxWith: string = props.maxWidth || maxItemWidth || '120';\n      return { maxWidth: `${maxWith}px` };\n    });\n\n    onMounted(() => {\n      isCutOff.value = isNodeOverflow(breadcrumbText.value);\n    });\n    onBeforeUpdate(() => {\n      isCutOff.value = isNodeOverflow(breadcrumbText.value);\n    });\n\n    const separatorPropContent = localTBreadcrumb?.separator;\n    const separatorSlot = localTBreadcrumb?.slots?.separator;\n    const separatorContent = separatorPropContent || separatorSlot || (\n      <ChevronRightIcon {...{ color: 'rgba(0,0,0,.3)' }} />\n    );\n    const { proxy } = getCurrentInstance();\n\n    const handleClick = () => {\n      if (props.href) {\n        window.location.href = props.href;\n      }\n      const router = props.router || proxy.$router;\n      if (props.to && router) {\n        props.replace ? router.replace(props.to) : router.push(props.to);\n      }\n    };\n    const bindEvent = (e: MouseEvent) => {\n      if (!props.disabled)\n        if (props.target === '_blank') {\n          props.href ? window.open(props.href) : window.open(props.to as string);\n        } else {\n          e.preventDefault();\n          handleClick();\n        }\n    };\n\n    return () => {\n      const itemClass = [COMPONENT_NAME.value, themeClassName.value];\n      const textClass = [textFlowClass.value];\n\n      if (props.disabled) {\n        textClass.push(disableClass.value);\n      }\n\n      const listeners = {\n        onClick: (e: MouseEvent) => {\n          if (props.disabled) {\n            e.stopPropagation();\n            return;\n          }\n        },\n      };\n\n      const content = renderContent('default', 'content');\n\n      const textContent = (\n        <span {...{ class: maxLengthClass.value, style: maxWithStyle.value }}>\n          {renderTNodeJSX('icon')}\n          <span ref={breadcrumbText} class={`${maxLengthClass.value}-text`}>\n            {content}\n          </span>\n        </span>\n      );\n      let itemContent = <span {...{ class: textClass, ...listeners }}>{textContent}</span>;\n\n      if ((props.href || props.to) && !props.disabled) {\n        textClass.push(linkClass.value);\n        itemContent = (\n          <a class={textClass} href={props.href} target={props.target} {...listeners} onClick={bindEvent}>\n            {textContent}\n          </a>\n        );\n      }\n      return (\n        <div class={itemClass} {...attrs} onClick={!props.disabled && props.onClick}>\n          {isCutOff.value ? <Tooltip content={() => content}>{itemContent}</Tooltip> : itemContent}\n          <span class={separatorClass.value}>\n            {isFunction(separatorContent) ? separatorContent() : separatorContent}\n          </span>\n        </div>\n      );\n    };\n  },\n});\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","localTBreadcrumbOrigin","separator","theme","slots","maxItemWidth","defineComponent","name","inheritAttrs","props","_objectSpread","setup","_localTBreadcrumb$slo","attrs","_ref","renderContent","useContent","renderTNodeJSX","useTNodeJSX","breadcrumbText","ref","localTBreadcrumb","inject","themeClassName","isCutOff","COMPONENT_NAME","usePrefixClass","separatorClass","disableClass","linkClass","maxLengthClass","textFlowClass","_useGlobalIcon","useGlobalIcon","ChevronRightIcon","TdChevronRightIcon","maxWithStyle","computed","maxWith","maxWidth","concat","onMounted","value","isNodeOverflow","onBeforeUpdate","separatorPropContent","separatorSlot","separatorContent","_createVNode","color","_getCurrentInstance","getCurrentInstance","proxy","handleClick","href","window","location","router","$router","to","replace","push","bindEvent","e","disabled","target","open","preventDefault","itemClass","textClass","listeners","onClick","stopPropagation","content","textContent","style","itemContent","_mergeProps","_default","isFunction"],"mappings":"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"}